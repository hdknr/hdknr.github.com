

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Discussion &mdash; identity 1.0 documentation</title>
    
    <link rel="stylesheet" href="static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    <link rel="stylesheet" href="static/openid.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
    <link rel="top" title="identity 1.0 documentation" href="index.html" />
    <link rel="next" title="Decoupling Identity and Authentication" href="signed_nonce.html" />
    <link rel="prev" title="Resource" href="resource.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="index.html">
          <span>identity 1.0 documentation</span></a></h1>
        <h2 class="heading"><span>Discussion</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="resource.html">Resource</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="signed_nonce.html">Decoupling Identity and Authentication</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="discussion">
<h1><a class="toc-backref" href="#id5">Discussion</a><a class="headerlink" href="#discussion" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="toc">
<p class="topic-title first">TOC</p>
<ul class="simple">
<li><a class="reference internal" href="#discussion" id="id5">Discussion</a><ul>
<li><a class="reference internal" href="#breaking-change-in-oauth-2-0-rev-23" id="id6">Breaking change in OAuth 2.0 rev. 23</a><ul>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001672-html" id="id7">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001672.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001673-html" id="id8">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001673.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001674-html" id="id9">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001674.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001675-html" id="id10">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001675.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001676-html" id="id11">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001676.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001684-html" id="id12">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001684.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001677-html" id="id13">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001677.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001678-html" id="id14">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001678.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001679-html" id="id15">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001679.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001682-html" id="id16">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001682.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001685-html" id="id17">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001685.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001686-html" id="id18">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001686.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001687-html" id="id19">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001687.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001688-html" id="id20">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001688.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001689-html" id="id21">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001689.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001680-html" id="id22">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001680.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001681-html" id="id23">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001681.html</a></li>
</ul>
</li>
<li><a class="reference internal" href="#does-connect-support-public-clients" id="id24">Does Connect support public clients?</a><ul>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001592-html" id="id25">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001592.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001598-html" id="id26">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001598.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001596-html" id="id27">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001596.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001599-html" id="id28">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001599.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001600-html" id="id29">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001600.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001601-html" id="id30">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001601.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001602-html" id="id31">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001602.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001603-html" id="id32">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001603.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001604-html" id="id33">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001604.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001627-html" id="id34">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001627.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001628-html" id="id35">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001628.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001629-html" id="id36">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001629.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001630-html" id="id37">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001630.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001631-html" id="id38">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001631.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001632-html" id="id39">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001632.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001636-html" id="id40">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001636.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001637-html" id="id41">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001637.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001638-html" id="id42">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001638.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001639-html" id="id43">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001639.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001605-html" id="id44">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001605.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001606-html" id="id45">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001606.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001625-html" id="id46">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001625.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001626-html" id="id47">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001626.html</a></li>
</ul>
</li>
<li><a class="reference internal" href="#response-types-clarification" id="id48">Response types clarification</a><ul>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001588-html" id="id49">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001588.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001590-html" id="id50">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001590.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001591-html" id="id51">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001591.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001595-html" id="id52">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001595.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001608-html" id="id53">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001608.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001610-html" id="id54">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001610.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001611-html" id="id55">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001611.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001612-html" id="id56">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001612.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001613-html" id="id57">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001613.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001614-html" id="id58">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001614.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001615-html" id="id59">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001615.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001617-html" id="id60">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001617.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001640-html" id="id61">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001640.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001641-html" id="id62">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001641.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001618-html" id="id63">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001618.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001619-html" id="id64">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001619.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001620-html" id="id65">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001620.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001621-html" id="id66">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001621.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001622-html" id="id67">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001622.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001623-html" id="id68">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001623.html</a></li>
<li><a class="reference internal" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001624-html" id="id69">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001624.html</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mandatory-to-implement-token-type" id="id70">Mandatory-to-implement token type</a><ul>
<li><a class="reference internal" href="#http-www-ietf-org-mail-archive-web-oauth-current-msg07906-html" id="id71">http://www.ietf.org/mail-archive/web/oauth/current/msg07906.html</a></li>
<li><a class="reference internal" href="#http-www-ietf-org-mail-archive-web-oauth-current-msg07918-html" id="id72">http://www.ietf.org/mail-archive/web/oauth/current/msg07918.html</a></li>
<li><a class="reference internal" href="#http-www-ietf-org-mail-archive-web-oauth-current-msg07921-html" id="id73">http://www.ietf.org/mail-archive/web/oauth/current/msg07921.html</a></li>
<li><a class="reference internal" href="#http-www-ietf-org-mail-archive-web-oauth-current-msg07923-html" id="id74">http://www.ietf.org/mail-archive/web/oauth/current/msg07923.html</a></li>
<li><a class="reference internal" href="#http-www-ietf-org-mail-archive-web-oauth-current-msg07973-html" id="id75">http://www.ietf.org/mail-archive/web/oauth/current/msg07973.html</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="breaking-change-in-oauth-2-0-rev-23">
<h2><a class="toc-backref" href="#id6">Breaking change in OAuth 2.0 rev. 23</a><a class="headerlink" href="#breaking-change-in-oauth-2-0-rev-23" title="Permalink to this headline">¶</a></h2>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001672-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001672.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001672.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001672-html" title="Permalink to this headline">¶</a></h3>
<p>I only noticed now that rev 23 had a breaking change.
it seems to doesn&#8217;t allow the response_type=code token
unless we define another client type such as &#8220;<strong>hybrid</strong>&#8221;.</p>
<p>This is a breaking change.</p>
<p>I wonder why I did not notice it till now.</p>
<p>See below.</p>
<p>&gt;From <a class="reference internal" href="oauth.html#oauth-2-1"><em>section 2.1</em></a> of
<a class="reference external" href="http://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=draft-ietf-oauth-v2-23.txt">http://tools.ietf.org/rfcdiff?difftype=&#8211;hwdiff&amp;url2=draft-ietf-oauth-v2-23.txt</a></p>
<p>&#8220;A client application consisting of multiple components, each with its
own client type (e.g. a distributed client with both a confidential
server-based component and a public browser-based component), <em>MUST</em>
register each component separately as a different client to ensure
proper handling by the authorization server.&#8221;</p>
<p>Discuss.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001673-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001673.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001673.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001673-html" title="Permalink to this headline">¶</a></h3>
<p>Yes I didn&#8217;t see any discussion on that before the change.</p>
<p>It is unclear if you can define a new client type,
it is not a real parameter.</p>
<p>Perhaps it is enough to say
that any client asking for code token is hybrid
and needs to be treated appropriately.
Though that section seems to make having a separate client_id
for each component mandatory.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001674-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001674.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001674.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001674-html" title="Permalink to this headline">¶</a></h3>
<p>Yes I didn&#8217;t see any discussion on that before the change.</p>
<p>It is unclear if you can define a new client type,
it is not a real parameter.</p>
<p>Perhaps it is enough to say that
any client asking for <a class="reference internal" href="standard.html#term-code-token"><em class="xref std std-term">code token</em></a> is <strong>hybrid</strong>
and needs to be treated appropriately.
Though that section seems to make
having a separate client_id for each component mandatory.</p>
<p>Indeed, and that&#8217;s the breaking point.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001675-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001675.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001675.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001675-html" title="Permalink to this headline">¶</a></h3>
<p>The way I read it, &#8220;<a class="reference internal" href="standard.html#term-code-token"><em class="xref std std-term">code token</em></a>&#8221; is its own type,
and it needs to be treated differently from either &#8220;code&#8221; or &#8220;token&#8221;,
which isn&#8217;t a change.
What the intent of the text is, I believe,
is to keep people from using the same client id with &#8220;code&#8221; as with &#8220;token&#8221;.
This would effectively be mixing public and private clients
in the most normal use cases,
which is the section that it&#8217;s in,
and that&#8217;s not a good thing.</p>
<p>I don&#8217;t think it&#8217;s actually a breaking change,
but I&#8217;m less convinced of the utility of normative language here.</p>
<blockquote>
<div>&#8211; Justin</div></blockquote>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001676-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001676.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001676.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001676-html" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>The way I read it, &#8220;code token&#8221; is its own type, and it needs to be treated</div></blockquote>
<p>My first take was that but the text goes:</p>
<blockquote>
<div>a distributed client with both a confidential
server-based component and a public browser-based component), <em>MUST</em>
register each component separately as a different client</div></blockquote>
<p>so looks to me that it does not allow that interpretation...</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001684-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001684.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001684.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001684-html" title="Permalink to this headline">¶</a></h3>
<p>A related question came up on the OAuth WG list:
<a class="reference external" href="http://www.ietf.org/mail-archive/web/oauth/current/msg08548.html">http://www.ietf.org/mail-archive/web/oauth/current/msg08548.html</a>
though I don&#8217;t know if that provides much guidance.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001677-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001677.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001677.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001677-html" title="Permalink to this headline">¶</a></h3>
<p>This is the only discussion about this change.
<a class="reference external" href="http://www.ietf.org/mail-archive/web/oauth/current/msg08271.html">http://www.ietf.org/mail-archive/web/oauth/current/msg08271.html</a></p>
<p>And this is the response I got in OAuth ML.
<a class="reference external" href="http://www.ietf.org/mail-archive/web/oauth/current/msg08548.html">http://www.ietf.org/mail-archive/web/oauth/current/msg08548.html</a></p>
<p>According to the Eran&#8217;s reply, I thought extensions (eg. response_type=code token) can overwrite the requirement.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001678-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001678.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001678.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001678-html" title="Permalink to this headline">¶</a></h3>
<p><strong>The problem is the normative MUST language</strong>.
If it were SHOULD, it is less of the problem.</p>
<p>Since it is a MUST, we cannot extend it.
That is the problem that I am pointing  out.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001679-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001679.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001679.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001679-html" title="Permalink to this headline">¶</a></h3>
<p>Not true &#8211; extensions can override MUST requirements
if they specify the conditions that break it.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001682-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001682.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001682.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001682-html" title="Permalink to this headline">¶</a></h3>
<p>Good to know it.
I thought an extension could only extend
from an extension point
but could not override a normative  language.
If it can, it would not be a problem.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001685-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001685.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001685.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001685-html" title="Permalink to this headline">¶</a></h3>
<p>I am quite confused with this change.</p>
<p>In particular,
I am not sure <strong>response_type</strong> is anymore relevant.
Can&#8217;t it be inferred from the client,
since each client is bound to a security context?</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001686-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001686.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001686.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001686-html" title="Permalink to this headline">¶</a></h3>
<p>If we&#8217;re concerned about this change,
we should begin discussing it on the OAuth mailing list
and lobbying to have it undone.
Discussing it on the AB list won&#8217;t accomplish this.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001687-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001687.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001687.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001687-html" title="Permalink to this headline">¶</a></h3>
<p>I agree and I am planning to raise the issue here.
However, I would like to register it here
that I don&#8217;t think the current approach to defer
to extensions is necessarily sufficient to remove all cause for concern by this WG.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001688-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001688.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001688.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001688-html" title="Permalink to this headline">¶</a></h3>
<p>&gt; If we’re concerned about this change, we should begin discussing it on the
&gt; OAuth mailing list and lobbying to have it undone.  Discussing it on the AB
&gt; list won’t accomplish this.</p>
<p>I just sent a message to the OAuth list in this regard. Yes, I think
this should be debated there.</p>
<p>Marius</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001689-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001689.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001689.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001689-html" title="Permalink to this headline">¶</a></h3>
<p>So it was my attempt to see if it were a problem that we can solve
here or not and good to hear that you filed it to the oauth list.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001680-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001680.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001680.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001680-html" title="Permalink to this headline">¶</a></h3>
<p>The change does not preclude these being the same physical client</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001681-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001681.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120312/001681.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120312-001681-html" title="Permalink to this headline">¶</a></h3>
<p>Right, this, too. A client could effectively have two personae.</p>
</div>
</div>
<div class="section" id="does-connect-support-public-clients">
<h2><a class="toc-backref" href="#id24">Does Connect support public clients?</a><a class="headerlink" href="#does-connect-support-public-clients" title="Permalink to this headline">¶</a></h2>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001592-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001592.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001592.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001592-html" title="Permalink to this headline">¶</a></h3>
<p>Hi all,</p>
<p>I&#8217;m unable to find out whether OpenID Connect supports <a class="reference internal" href="oauth.html#term-public-clients"><em class="xref std std-term">public clients</em></a>.
It seems Connect assumes all clients register with the OP and obtain a
client credential. If this observation is correct, what is the reason
for being <strong>more restrictive</strong> than OAuth?</p>
<p>regards,
Torsten.</p>
<p>Torsten,</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001598-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001598.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001598.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001598-html" title="Permalink to this headline">¶</a></h3>
<p>From your tickets it looks like you are thinking that the <em class="xref std std-term">Basic client profile</em> is for <em class="xref std std-term">JS clients</em>
in the browser doing <em class="xref std std-term">canvas type Aps</em> and directly accessing the <em class="xref std std-term">check_id</em> and <em class="xref std std-term">user_info</em> endpoints.</p>
<p>The idea for what i&#8217;t worth was that it is intended to be a <em class="xref std std-term">Web server profile</em>
that uses the browser side <a class="reference internal" href="glossary.html#term-implicit-flow"><em class="xref std std-term">implicit flow</em></a>,
with a simple sever side callback that extracts the fragment
and passes it to the server for processing and verification.
That is why <em class="xref std std-term">Cross Origin Resource</em> sharing is not mentioned win that profile.</p>
<p>It is true
that that profile could be used for a <em class="xref std std-term">Canvas type JS app</em> in the browser
accessing the endpoints as well.</p>
<p>Would your preference have been to make the <em class="xref std std-term">basic client</em> use the <a class="reference internal" href="glossary.html#term-code-flow"><em class="xref std std-term">code flow</em></a>?
It is arguably similar in complexity at the end of the day,
but with better security for <em class="xref std std-term">Web Server type applications</em>.</p>
<p>I would probably just have the <a class="reference internal" href="session.html#term-client"><em class="xref std std-term">client</em></a> base64 decode the <a class="reference internal" href="standard.html#term-24"><em class="xref std std-term">id_token</em></a>
and forget calling the <em class="xref std std-term">check_id endpoint</em>.
If the client doesn&#8217;t have the correct token endpoint
and gives the <a class="reference internal" href="glossary.html#term-225"><em class="xref std std-term">client secret</em></a> to it checking the signature on the <a class="reference internal" href="standard.html#term-24"><em class="xref std std-term">id_token</em></a> is not very useful:)</p>
<p>Regards
John B.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001596-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001596.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001596.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001596-html" title="Permalink to this headline">¶</a></h3>
<p>All clients must register there <em class="xref std std-term">redirect_url</em> and get a <a class="reference internal" href="standard.html#term-client-id"><em class="xref std std-term">client_id</em></a>.</p>
<p>They are <strong>not required</strong> to use the <a class="reference internal" href="glossary.html#term-225"><em class="xref std std-term">client secret</em></a> if they are <a class="reference internal" href="oauth.html#term-public-clients"><em class="xref std std-term">public clients</em></a>.</p>
<p>We talked about allowing a <a class="reference internal" href="standard.html#term-client-id"><em class="xref std std-term">client_id</em></a> of  &#8220;public&#8221;
and not requiring pre-registerd <a class="reference internal" href="standard.html#term-redirect-uri"><em class="xref std std-term">redirect_uri</em></a>,
but the feedback was that <strong>IdP were uncomfortable</strong> giving <a class="reference internal" href="glossary.html#term-access-tokens"><em class="xref std std-term">access tokens</em></a> to unknown clients.</p>
<p><a class="reference internal" href="glossary.html#term-oauth"><em class="xref std std-term">OAuth</em></a> recommends against <a class="reference internal" href="oauth.html#term-public-clients"><em class="xref std std-term">public clients</em></a> with <strong>unregistered</strong> <a class="reference internal" href="standard.html#term-redirect-uri"><em class="xref std std-term">redirect_uri</em></a>.</p>
<p>In a effort to have some balance we do have <a class="reference internal" href="glossary.html#term-dynamic-registration"><em class="xref std std-term">dynamic registration</em></a> for <a class="reference internal" href="glossary.html#term-clients"><em class="xref std std-term">clients</em></a>.</p>
<p>If a user wants to revoke a <a class="reference internal" href="session.html#term-client"><em class="xref std std-term">client</em></a> not having all of them
with the same <a class="reference internal" href="standard.html#term-client-id"><em class="xref std std-term">client_id</em></a> is probably an advantage.</p>
<p>If it is something you think you need I am open to discussing it.</p>
<p>John B.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001599-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001599.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001599.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001599-html" title="Permalink to this headline">¶</a></h3>
<p>I would prefer to have the <em class="xref std std-term">Basic Client</em> use the <a class="reference internal" href="glossary.html#term-code-flow"><em class="xref std std-term">code flow</em></a>
for another reason:
the <strong>code flow</strong> is the only one that&#8217;s mandatory to implement for the <a class="reference internal" href="glossary.html#term-server"><em class="xref std std-term">server</em></a>.
So what we have right now is advice for <em class="xref std std-term">servers</em> to implement
something that our advice to <a class="reference internal" href="glossary.html#term-clients"><em class="xref std std-term">clients</em></a> say they don&#8217;t have to.</p>
<blockquote>
<div>&#8211; Justin</div></blockquote>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001600-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001600.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001600.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001600-html" title="Permalink to this headline">¶</a></h3>
<p>Both <a class="reference internal" href="standard.html#term-19"><em class="xref std std-term">code</em></a> and &#8216;<em class="xref std std-term">token id_token</em>&#8216;  should be <em class="xref std std-term">mediatory to implement</em> for <em class="xref std std-term">servers</em>.</p>
<p>Is there a particular place that you are seeing that in the spec.
I think that is a bug, if true.   I will look for it today.</p>
<p>If the WG did want code to be the only <a class="reference internal" href="#term-mti-flow"><em class="xref std std-term">MTI flow</em></a> then we would defiantly need
to change the <em class="xref std std-term">basic profile</em> to <a class="reference internal" href="standard.html#term-19"><em class="xref std std-term">code</em></a>.</p>
<p>John</p>
<dl class="glossary docutils">
<dt id="term-mti-flow"><span id="term-mti-token"></span><span id="term-mti"></span><span id="term-mandatory-to-implement"></span>MTI flow<br />MTI Token<br />MTI<br />mandatory-to-implement</dt>
<dd><p class="first">may be Mandatory-To-Implement flow. Connect Basic MUST implement &#8220;code&#8221; and &#8220;token id_token&#8221;.</p>
<p class="last">OAuth MTI token discussion is  <a class="reference external" href="http://www.ietf.org/mail-archive/web/oauth/current/msg07906.html">http://www.ietf.org/mail-archive/web/oauth/current/msg07906.html</a></p>
</dd>
</dl>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001601-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001601.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001601.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001601-html" title="Permalink to this headline">¶</a></h3>
<p>Hrm. Reading through the drafts again just now, it does clearly say that
&#8216;<a class="reference internal" href="standard.html#term-19"><em class="xref std std-term">code</em></a>&#8216; and &#8216;<em class="xref std std-term">token id_token</em>&#8216; are <a class="reference internal" href="glossary.html#term-mti"><em class="xref std std-term">MTI</em></a>,
so I&#8217;m not sure where I got that impression from.
My mistake.</p>
<blockquote>
<div>&#8211; Justin</div></blockquote>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001602-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001602.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001602.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001602-html" title="Permalink to this headline">¶</a></h3>
<p>No problem, sometimes even I am surprised by things that have snuck in
or are left over from older versions.</p>
<p>Do you still prefer the <a class="reference internal" href="standard.html#term-19"><em class="xref std std-term">code</em></a> follow for the <em class="xref std std-term">basic client profile</em>?</p>
<p>John</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001603-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001603.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001603.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001603-html" title="Permalink to this headline">¶</a></h3>
<p>Yes, I certainly do. <strong>It&#8217;s cleaner in design</strong>, its pattern is <strong>more proven</strong>,
and it can be implemented in all kinds of different clients, even
lightweight Javascript ones.</p>
<p>The <a class="reference internal" href="glossary.html#term-implicit-flow"><em class="xref std std-term">implicit flow</em></a> is an optimization for <strong>fewer network calls</strong>,
and it&#8217;s always felt more like a <strong>codified hack</strong> than a real protocol flow to me.
Whenever I&#8217;ve seen somebody pressed on the issue of whether
or not their clients could really support the <a class="reference internal" href="glossary.html#term-code-flow"><em class="xref std std-term">code flow</em></a>,
they&#8217;ve admitted that yes, they could, but they didn&#8217;t want to pay
the time costs of a second round trip to the server.</p>
<p>We&#8217;re also concentrating on the <a class="reference internal" href="glossary.html#term-code-flow"><em class="xref std std-term">code flow</em></a> for our own Connect
deployment, and we&#8217;ll patch in the <a class="reference internal" href="glossary.html#term-implicit-flow"><em class="xref std std-term">implicit flow</em></a> sometime later.</p>
<blockquote>
<div>&#8211; Justin</div></blockquote>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001604-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001604.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001604.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001604-html" title="Permalink to this headline">¶</a></h3>
<p>As I recall it was Facebook and Google who were keen on the <a class="reference internal" href="glossary.html#term-implicit-flow"><em class="xref std std-term">implicit flow</em></a>.</p>
<p>Part of the argument was that
it was easier to get someone to implement it by dropping some <em class="xref std std-term">JS code</em>
on their site for the <em class="xref std std-term">callback URI</em> and setting the <a class="reference internal" href="standard.html#term-24"><em class="xref std std-term">id_token</em></a> as a <em class="xref std std-term">cookie</em>.</p>
<p>It is a different approach than the more traditional library one, that fits the <a class="reference internal" href="glossary.html#term-code-flow"><em class="xref std std-term">code flow</em></a> better.</p>
<p>I am not personally attached to the <a class="reference internal" href="glossary.html#term-implicit-flow"><em class="xref std std-term">implicit flow</em></a>.</p>
<p>However we probably need wider feedback before changing the <em class="xref std std-term">basic client profile</em>.</p>
<p>John</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Implicit Flow advantages:</p>
<ul class="last simple">
<li>Easier to deploy:  Just drop Facebook/Google provided Javscript on your pages.</li>
<li>ID Token can be user agent authenication cookie.   It is good for big cloud providers like Google/Facebook.</li>
</ul>
</div>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001627-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001627.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001627.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001627-html" title="Permalink to this headline">¶</a></h3>
<p>&gt; As I recall it was Facebook and Google who were keen on the implicit flow.</p>
<p>Actually, I think I suggested at least once to have &#8216;<a class="reference internal" href="standard.html#term-19"><em class="xref std std-term">code</em></a>&#8216; be the
basic flow in OpenIDConnect.
Not that I think the current approach of using &#8216;token&#8217; to have been a bad decision.
Just that I don&#8217;t have a strong view either way.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001628-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001628.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001628.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001628-html" title="Permalink to this headline">¶</a></h3>
<p>It was a close decision, as I recall.
Both flows work almost equally well.</p>
<p>The question was what would look simpler for a client to implement.</p>
<p>I think the thought at the time was that we could produce a <em class="xref std std-term">JS</em>
that someone could drop on their site and have them up and running
with the <em class="xref std std-term">Basic profile</em> <strong>without significant server side programming</strong>.</p>
<p>One thing we are missing for the current Basic profile is that drop in JS code example.</p>
<p>Without the implicit example/template JS the <a class="reference internal" href="glossary.html#term-code-flow"><em class="xref std std-term">code flow</em></a> may be simper for server side programers to understand.</p>
<p>John B.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001629-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001629.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001629.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001629-html" title="Permalink to this headline">¶</a></h3>
<p>The <em class="xref std std-term">token flow</em> is simpler <em>if</em> there&#8217;s an existing corroborating server page
with the returned javascript, which is the Facebook use case.
Without that existing code, as John points out,
it&#8217;s no simpler than the code, and potentially more complex to implement securely.</p>
<blockquote>
<div>&#8211; Justin</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Javascript proof sample is required for Basic RP implementer.</p>
</div>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001630-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001630.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001630.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001630-html" title="Permalink to this headline">¶</a></h3>
<p>This sounds to me like an argument for us
to create the JavaScript code so the promise of clients not having do any substantial programming
to use Connect can come true.
That&#8217;s the reason we chose the <a class="reference internal" href="glossary.html#term-implicit-flow"><em class="xref std std-term">implicit flow</em></a>,
and why I think we should make it possible by getting the code written.</p>
<p>The process of writing the code might also give us valuable feedback on the specs,
while we&#8217;re still at Implementer&#8217;s Draft stage.</p>
<p>Who would make sense to write that code?
Maybe we could use <strong>some directed funding</strong> to make it happen???</p>
<blockquote>
<div>&#8211; Mike</div></blockquote>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001631-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001631.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001631.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001631-html" title="Permalink to this headline">¶</a></h3>
<p>There are two approaches we could take with the JS code.</p>
<p>The <strong>simple one</strong> is the example code I posted earlier in the thread
that the client puts at it <a class="reference internal" href="standard.html#term-redirect-uri"><em class="xref std std-term">redirect_uri</em></a>
and it takes the <a class="reference internal" href="glossary.html#term-fragment"><em class="xref std std-term">fragment</em></a> and sends it to the <em class="xref std std-term">Web server client</em> via POST for parsing.</p>
<p>The <strong>more complicated one</strong> would be to have the JS make the and process
the response setting the validated <a class="reference internal" href="standard.html#term-24"><em class="xref std std-term">id_token</em></a> as a cookie
and save the <em class="xref std std-term">user_info</em> attributes to <em class="xref std std-term">HTML local storage</em> or post them back to the <em class="xref std std-term">Web Client</em>.</p>
<p>That would be the most standalone example.
Include a <em class="xref std std-term">JS login widget</em> and it will set a <em class="xref std std-term">openID cookie</em> once they are logged in.
The Web Client just needs to validate the signature of the <a class="reference internal" href="standard.html#term-24"><em class="xref std std-term">id_token</em></a>.</p>
<p>There are probably in-between states.
There is probably example code around for most of that,
someone needs to put it together and clean it up.</p>
<p>John  B</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001632-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001632.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001632.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001632-html" title="Permalink to this headline">¶</a></h3>
<p>Let&#8217;s add discussion of getting this code written to our agenda for the in-person working group meeting.</p>
<blockquote>
<div>&#8211; Mike</div></blockquote>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001636-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001636.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001636.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001636-html" title="Permalink to this headline">¶</a></h3>
<p>+1</p>
<p>Unlike FB Connect, we do support <em class="xref std std-term">asymmetric signature</em>
so the <em class="xref std std-term">signature validation</em> actually can be done by the JS client as well.</p>
<p>=nat</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001637-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001637.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001637.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001637-html" title="Permalink to this headline">¶</a></h3>
<p>Yes, but the <em class="xref std std-term">Basic client profile</em> is <strong>only using symmetric signatures</strong>.</p>
<p>The other issues is even if the <em class="xref std std-term">JS client</em> can validate the signature
the Web server still can&#8217;t trust the validation,
it needs to validate the assertion itself
before releasing any of it&#8217;s resources to the client.</p>
<p>I suppose one interesting option
we haven&#8217;t talked about is using the <a class="reference internal" href="standard.html#term-24"><em class="xref std std-term">id_token</em></a>
as the <a class="reference internal" href="standard.html#term-30"><em class="xref std std-term">access_token</em></a> for additional API resources on the <em class="xref std std-term">Client Web Server</em>.
That should work quite nicely given the <a class="reference internal" href="standard.html#term-24"><em class="xref std std-term">id_token</em></a> has the <a class="reference internal" href="session.html#term-client"><em class="xref std std-term">client</em></a> as it&#8217;s <a class="reference internal" href="oauth_assertion.html#term-audience"><em class="xref std std-term">audience</em></a> already.</p>
<p>John B.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001638-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001638.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001638.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001638-html" title="Permalink to this headline">¶</a></h3>
<p>In the case of FB,
only the way that the <em class="xref std std-term">web server</em> can protect itself and
the user is to send the <a class="reference internal" href="glossary.html#term-access-token"><em class="xref std std-term">access token</em></a> to an undocumented api /app and get
the intended <a class="reference internal" href="standard.html#term-client-id"><em class="xref std std-term">client_id</em></a>.</p>
<p>That is just like the <a class="reference internal" href="messages.html#term-check-id-endpoint"><em class="xref std std-term">check id endpoint</em></a> except that
it is using <a class="reference internal" href="glossary.html#term-access-token"><em class="xref std std-term">access token</em></a> instead: i.e., it is a <em class="xref std std-term">Check access token endpoint</em>.
We could define such an extension endpoint.</p>
<p>Nat</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001639-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001639.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001639.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001639-html" title="Permalink to this headline">¶</a></h3>
<p>The current proposal is to <strong>add a hash</strong> of the <a class="reference internal" href="standard.html#term-30"><em class="xref std std-term">access_token</em></a>
to the <a class="reference internal" href="standard.html#term-24"><em class="xref std std-term">id_token</em></a> so that we would not need a separate <a class="reference internal" href="standard.html#term-30"><em class="xref std std-term">access_token</em></a> <em class="xref std std-term">introspection endpoint</em>.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001605-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001605.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001605.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001605-html" title="Permalink to this headline">¶</a></h3>
<p>Actually, after Johns blog post about the vulnerability of OAuth as
authentication, I got a strong feedback from security and privacy community
that <em class="xref std std-term">it is insane to send the token to the server</em>.
The token was issued to the <a class="reference internal" href="glossary.html#term-161"><em class="xref std std-term">user agent</em></a>
and sending that to the server constitutes security, privacy and policy breach.
If we are to avoid sending token to the server,
implicit flow is not simple any more.
We have to use CORS or postMessage inter frame communication etc.</p>
<p>That is another reason to consider the possibility of making the code flow the default.</p>
<p>Nat Sakimura</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>To whom Implict tokens are to be issued  ?</p>
<blockquote class="last">
<div><ol class="arabic simple">
<li>User Agent : User must grant to issue a token to UA where his privacy data is used at.</li>
<li>User Agent and Client : Javascript and pages are controlled by Clients anyway.</li>
</ol>
</div></blockquote>
</div>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001606-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001606.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001606.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001606-html" title="Permalink to this headline">¶</a></h3>
<p>+1 pro <a class="reference internal" href="standard.html#term-19"><em class="xref std std-term">code</em></a> as default flow
Gesendet mit BlackBerry® Webmail von Telekom Deutschland</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001625-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001625.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001625.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001625-html" title="Permalink to this headline">¶</a></h3>
<p>Actually, I am not suggeting to through current Basic Client (side flow) Profile.</p>
<p>I was suggesting that perhaps it would be worthwhile to have appropriately
constrained Basic Server side flow Profile as well.</p>
<p>Reading through some of the FB documentation,
<strong>I believe it does not have to be in the RFC format</strong>, really.
For those people who wants to read only a concise document,
a white paper or a blog post like thing in a similar manner to
<a class="reference external" href="http://nat.sakimura.org/2012/01/20/openid-connect-nutshell/">http://nat.sakimura.org/2012/01/20/openid-connect-nutshell/</a> would be more
valuable, I suppose.</p>
<p>=nat</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Could be two basics:</p>
<ul class="last simple">
<li>Basic Client Side</li>
<li>Basic Server Side</li>
</ul>
</div>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001626-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001626.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001626.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001626-html" title="Permalink to this headline">¶</a></h3>
<p>A correction: s/through/throw away/=</p>
</div>
</div>
<div class="section" id="response-types-clarification">
<h2><a class="toc-backref" href="#id48">Response types clarification</a><a class="headerlink" href="#response-types-clarification" title="Permalink to this headline">¶</a></h2>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001588-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001588.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001588.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001588-html" title="Permalink to this headline">¶</a></h3>
<p>oHi all,</p>
<p>I&#8217;m trying to catch up with the Implementors Draft and need some advice
from the group.</p>
<p>Is it correct that &#8220;<a class="reference internal" href="standard.html#term-19"><em class="xref std std-term">code</em></a>&#8221; is the only <a class="reference internal" href="oauth_responses.html#term-response-type"><em class="xref std std-term">response type</em></a>,
which is delivered to the <a class="reference internal" href="session.html#term-client"><em class="xref std std-term">client</em></a> via <em class="xref std std-term">URI query parameter</em>?
For all other <a class="reference internal" href="glossary.html#term-response-types"><em class="xref std std-term">response types</em></a>,
the response parameters are encoded within the <em class="xref std std-term">URI fragment</em>.</p>
<p>Furthermore,
is the <a class="reference internal" href="session.html#term-client"><em class="xref std std-term">client</em></a> always issued an <a class="reference internal" href="glossary.html#term-access-token"><em class="xref std std-term">access token</em></a> _and_ an <a class="reference internal" href="standard.html#term-24"><em class="xref std std-term">id_token</em></a>
for <a class="reference internal" href="uma_core.html#term-scope"><em class="xref std std-term">scope</em></a> &#8220;<a class="reference internal" href="glossary.html#term-openid"><em class="xref std std-term">openid</em></a>&#8221; and <a class="reference internal" href="oauth_responses.html#term-response-type"><em class="xref std std-term">response type</em></a> &#8220;<a class="reference internal" href="standard.html#term-19"><em class="xref std std-term">code</em></a>&#8221;?</p>
<p>thanks in advance,
Torsten.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001590-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001590.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001590.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001590-html" title="Permalink to this headline">¶</a></h3>
<p>&gt; Is it correct that &#8220;code&#8221; is the only response type, which is delivered to the client via URI query parameter? For all other response types, the response parameters are encoded within the URI fragment.
Yes
&gt;
&gt; Furthermore, is the client always issued an access token _and_ an id_token for scope &#8220;openid&#8221; and response type &#8220;code&#8221;?</p>
<p>The response from the <a class="reference internal" href="oauth.html#term-authorization-server"><em class="xref std std-term">Authorization server</em></a> is <a class="reference internal" href="standard.html#term-19"><em class="xref std std-term">code</em></a> as was asked for.</p>
<p>The <a class="reference internal" href="oauth.html#term-token-endpoint"><em class="xref std std-term">Token endpoint</em></a> includes <a class="reference internal" href="standard.html#term-24"><em class="xref std std-term">id_token</em></a> in it&#8217;s response as an extra parameter.</p>
<p>So strictly speaking Yes <a class="reference internal" href="standard.html#term-24"><em class="xref std std-term">id_token</em></a> is <strong>always issued</strong> if the <a class="reference internal" href="uma_core.html#term-scope"><em class="xref std std-term">scope</em></a> is &#8216;<a class="reference internal" href="glossary.html#term-openid"><em class="xref std std-term">openid</em></a>&#8216;
(scope is a single value with spaces, so don&#8217;t say includes) and the <a class="reference internal" href="standard.html#term-response-type"><em class="xref std std-term">response_type</em></a> is <a class="reference internal" href="standard.html#term-19"><em class="xref std std-term">code</em></a>.</p>
<p>However the <a class="reference internal" href="oauth_responses.html#term-response-type"><em class="xref std std-term">response type</em></a> is <a class="reference internal" href="standard.html#term-19"><em class="xref std std-term">code</em></a> and <strong>only code</strong>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>scope</td>
<td>response_type</td>
<td>response</td>
<td>in</td>
</tr>
<tr class="row-even"><td>openid</td>
<td>code</td>
<td>code</td>
<td>query</td>
</tr>
<tr class="row-odd"><td>openid</td>
<td>token id_token</td>
<td>token id_token</td>
<td>fragment</td>
</tr>
</tbody>
</table>
<p>The <a class="reference internal" href="standard.html#term-24"><em class="xref std std-term">id_token</em></a> is only returned
if <a class="reference internal" href="standard.html#term-19"><em class="xref std std-term">code</em></a> is exchanged at the <a class="reference internal" href="oauth.html#term-token-endpoint"><em class="xref std std-term">token endpoint</em></a> for and <a class="reference internal" href="standard.html#term-30"><em class="xref std std-term">access_token</em></a> and <a class="reference internal" href="standard.html#term-24"><em class="xref std std-term">id_token</em></a>.</p>
<p>So I suppose you could avoid getting <a class="reference internal" href="standard.html#term-24"><em class="xref std std-term">id_token</em></a> by not exchanging <a class="reference internal" href="standard.html#term-19"><em class="xref std std-term">code</em></a>,
but I don&#8217;t think anyone is going to think that is a good idea.</p>
<p>The problem is that <strong>response)type</strong> only controls
what comes back from the <a class="reference internal" href="oauth_responses.html#term-authorization-endpoint"><em class="xref std std-term">Authorization endpoint</em></a>, and not the <a class="reference internal" href="oauth.html#term-token-endpoint"><em class="xref std std-term">token endpoint</em></a>.</p>
<p>The only option
we found was overloading a <a class="reference internal" href="uma_core.html#term-scope"><em class="xref std std-term">scope</em></a> to change the behaviour of the <a class="reference internal" href="oauth.html#term-token-endpoint"><em class="xref std std-term">token endpoint</em></a>
to return the extra value.</p>
<p>The <a class="reference internal" href="glossary.html#term-token-endpoint-response"><em class="xref std std-term">token endpoint response</em></a> is direct,
so size is not a big issue.
It was simpler to always return it from that endpoint
than create a complicated way of asking for it from the <a class="reference internal" href="oauth.html#term-token-endpoint"><em class="xref std std-term">token endpoint</em></a>.</p>
<p>Worst case the response is a bit bigger, but the client ignores the extra parameter.</p>
<p>John B.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001591-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001591.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001591.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001591-html" title="Permalink to this headline">¶</a></h3>
<p>Hi John,</p>
<p>thanks for the clarification.</p>
<p>So all <a class="reference internal" href="glossary.html#term-response-types"><em class="xref std std-term">response types</em></a> containing the string value &#8220;<a class="reference internal" href="standard.html#term-24"><em class="xref std std-term">id_token</em></a>&#8221; cause the
authorization server to directly return a <a class="reference internal" href="standard.html#term-24"><em class="xref std std-term">id_token</em></a>
(along with all other parameters) to the <a class="reference internal" href="session.html#term-client"><em class="xref std std-term">client</em></a> via <a class="reference internal" href="glossary.html#term-fragment"><em class="xref std std-term">fragment</em></a>?</p>
<p>regards,
Torsten.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001595-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001595.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001595.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001595-html" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="glossary.html#term-response-types"><em class="xref std std-term">Response types</em></a> are <strong>single values</strong>.
(I am starting to hate Erin&#8217;s compromise) <a class="footnote-reference" href="#id2" id="id1">[1]</a></p>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>What compromise ?</td></tr>
</tbody>
</table>
<p>The <a class="reference internal" href="glossary.html#term-response-types"><em class="xref std std-term">response types</em></a> are documented in: <a class="reference external" href="http://openid.bitbucket.org/oauth-v2-multiple-response-types-1_0.html">http://openid.bitbucket.org/oauth-v2-multiple-response-types-1_0.html</a></p>
<p>The <a class="reference internal" href="glossary.html#term-response-types"><em class="xref std std-term">response types</em></a>
&#8220;code id_token&#8221;,
&#8220;id_token token&#8221;, and
&#8220;code id_token token&#8221;
MUST return a <a class="reference internal" href="standard.html#term-24"><em class="xref std std-term">id_token</em></a> and the response <strong>SHOULD</strong> be <strong>fragment encoded</strong>.</p>
<p>Now you are asking yourself
why is that SHOULD be <em class="xref std std-term">fragment encoded</em> as opposed to MUST be fragment encoded.</p>
<p>The reason for that is that the <a class="reference internal" href="standard.html#term-response-type"><em class="xref std std-term">response_type</em></a> registration
is leaving wiggle room to use the same <strong>response type with post message</strong> as well.</p>
<p>For that to work the client would need to register a <em class="xref std std-term">JS Origin</em>
and DOM Channel Names(or pick a fixed strings).</p>
<p>We did stub in <strong>post message configuration parameters</strong>,
but removed them due to there not being a OAuth spec yet.</p>
<p>Probably more than the yes you were looking for,
but the history provides some perspective.</p>
<p>John B.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001608-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001608.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001608.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001608-html" title="Permalink to this headline">¶</a></h3>
<p>Hi John,</p>
<p>thanks again for the clarification. HTTP/HTML can be so complicated :-(</p>
<p>Another question crossed my mind:
The number of <a class="reference internal" href="glossary.html#term-response-types"><em class="xref std std-term">response types</em></a> really struck and confused me
during my first read and I assume this will happen to others as well.
Why not significantly reduce the number of response types by</p>
<ul class="simple">
<li>not combining <a class="reference internal" href="standard.html#term-19"><em class="xref std std-term">code</em></a> and <a class="reference internal" href="standard.html#term-token"><em class="xref std std-term">token</em></a> and</li>
<li>just using &#8220;token&#8221; instead of all combinations of id_token and token ?</li>
</ul>
<p>The response type &#8220;token&#8221; could cause the OP to return both the id_token
and the access token in the <a class="reference internal" href="glossary.html#term-fragment"><em class="xref std std-term">fragment</em></a>,
which is similar to the response of the <em class="xref std std-term">tokens endpoint</em>.
I know this would return tokens the client is potentially not interested in.
But this seems to be accepptable for the code response type.</p>
<p>regards,
Torsten.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001610-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001610.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001610.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001610-html" title="Permalink to this headline">¶</a></h3>
<p>&gt; - just using &#8220;token&#8221; instead of all combinations of id_token and token ?
&gt;
&gt; The response type &#8220;token&#8221; could cause the OP to return both the
&gt; id_token and the access token in the fragment, which is similar to the
&gt; response of the tokens endpoint. I know this would return tokens the
&gt; client is potentially not interested in. But this seems to be
&gt; accepptable for the code response type.
&gt;</p>
<p>I actually rather like this approach.
It keeps the question of whether or not
you want OpenID confined to the value of the &#8216;scope&#8217; field
(that is, presence of an &#8216;openid&#8217; value in there),
and it makes serialization of the ID Token just a part of the access token output,
like the code flow with the token endpoint.
Of course we still have to profile how it gets encoded,
but it&#8217;s ultimately another field in the token output.</p>
<blockquote>
<div>&#8211; Justin</div></blockquote>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001611-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001611.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001611.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001611-html" title="Permalink to this headline">¶</a></h3>
<p>That was the way we originally had it.
Later on people thought that using the OAuth multi-response type was more OAuth friendly.</p>
<p>Originally if you had the scope openid:</p>
<p>1 response_type=code   both code and id_token were query encoded in the response
2 response_type=token  both access_token and id_token were fragment encoded.</p>
<p>There was no way to just get code or access_token,
and no way to get just id_token.</p>
<p>It was simpler I will give you that.</p>
<p>It is a bit different from adding id_token to the token endpoint in that
there is no OAuth mechanism for controlling the response from the endpoint.
I suppose the alternative would have been to add an extra parameter to the token endpoint request
to say if you wanted a id_token.</p>
<p>Again the problem is that the <a class="reference internal" href="glossary.html#term-response-types"><em class="xref std std-term">response types</em></a> are not really combinations of token id_token
but entirely new response types that contain the substrings token or id_token to confuse developers.</p>
<p>John</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001612-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001612.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001612.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001612-html" title="Permalink to this headline">¶</a></h3>
<p>&gt; That was the way we originally had it.   Later on people thought that using the OAuth multi-response type was more OAuth friendly.
&gt;
&gt; Originally if you had the scope openid:
&gt; 1 response_type=code   both code and id_token were query encoded in the response</p>
<p>Query encoding id_token leads to increased privacy risks.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001613-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001613.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001613.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001613-html" title="Permalink to this headline">¶</a></h3>
<p>Yes query encoding of id_tokens runs the risks of leaking them through logs, proxys,
and most of all through <em class="xref std std-term">referrer</em>.</p>
<p>One of the reasons for the change in the later drafts.</p>
<p>You can protect against <em class="xref std std-term">referrer leaking</em>
but that requires a level of client sophistication that is unlikely in the wild.</p>
<p>I should mention that <em class="xref std std-term">POST responses</em> were an option in openID 2.0,
but are not in OAuth (for lots of good reasons).</p>
<p>The <em class="xref std std-term">fragment encoded response</em> is also less size constrained in many cases,
especially if the JS is using POST to push the parameters to the server.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">No POST response in OAuth 2.0</p>
</div>
<p>John B.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001614-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001614.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001614.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001614-html" title="Permalink to this headline">¶</a></h3>
<p>Hi,</p>
<p>John Bradley &lt;ve7jtb at ve7jtb.com&gt; schrieb:</p>
<p>&gt;Yes query encoding of id_tokens runs the risks of leaking them through
&gt;logs, proxys, and most of all through referrer.
&gt;</p>
<p>I&#8217;m getting confused.
Didn&#8217;t you say in your response to my posting regarding id tokens
as URI query parameters security was not the reason for not transmitting id tokens that way?</p>
<p>&gt;One of the reasons for the change in the later drafts.
&gt;
&gt;You can protect against referrer leaking but that requires a level of
&gt;client sophistication that is unlikely in the wild.
&gt;
&gt;I should mention that POST responses were an option in openID 2.0, but
&gt;are not in OAuth (for lots of good reasons).
&gt;
&gt;The fragment encoded response is also less size constrained in many
&gt;cases, especially if the JS is using POST to push the parameters to the
&gt;server.
&gt;</p>
<p>What is the difference between the POST binding and a JS pushing the token via POST request?</p>
<p>regards,
Torsten.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001615-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001615.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001615.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001615-html" title="Permalink to this headline">¶</a></h3>
<p>The redirect response with a id_token is no more likely
to leak than a openID 2 redirect response.</p>
<p>The main reason was functionality the <em class="xref std std-term">fragment response</em> works
for both web servers and JS clients.</p>
<p>Leaking the <a class="reference internal" href="standard.html#term-24"><em class="xref std std-term">id_token</em></a> is more of a <strong>privacy problem</strong> than a <strong>security one</strong>.</p>
<p>Breno is correct that <a class="reference internal" href="glossary.html#term-fragment"><em class="xref std std-term">fragment</em></a> has better privacy less leakage.</p>
<p>The difference between a <em class="xref std std-term">post redirect</em> and JS pushing via POST
is the large <strong>browser warning</strong>
if you are going between https and non https endpoints
and other strange side effects of cross origin POSTs.</p>
<p>The JS version is less prone to freak out users.</p>
<p>John B.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001617-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001617.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001617.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001617-html" title="Permalink to this headline">¶</a></h3>
<p>I appreciate that you are trying to catch up with the logic of decisions made
over a multi year development process that involved a large number of people.</p>
<p>I am trying to fill in the colour as best as I can remember, as one of the editors.</p>
<p>OAuth 2 itself also changed under us during the process as well.</p>
<p>Fortunately or unfortunately making breaking changes at this point
will require a supermajority of the WG, now that we have implementers drafts in peoples hands.</p>
<p>Non normative changes are not going to be a big issue
if we find things that need further clarification or outright bugs.</p>
<p>I expect that additional profiles for things like code flow are probably a good idea
even if we leave the Basic Client profile as is.</p>
<p>We just need to decide if they are normative and part of the specs or non-normative implementers guides.
Basic is a bit of a mix as it was intended to work as a standalone document
without referencing the other parts of the specs.</p>
<p>I am still trying to figure out
why you are getting the impression that the Basic profile is just for JS clients?</p>
<p>John B.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001640-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001640.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001640.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001640-html" title="Permalink to this headline">¶</a></h3>
<p>Hi John,</p>
<p>Am 21.02.2012 20:48, schrieb John Bradley:
&gt; I am still trying to figure out why you are getting the impression that the Basic profile is just for JS clients?</p>
<p>I&#8217;ve got a basic understanding of how it is supposed to work for web
applications.
But I suspect I&#8217;m not the only one considering it rather complicated.</p>
<p>Let me revisit the flow (after sucessful login):</p>
<ol class="arabic simple">
<li>the OP redirects back to the redirect_uri (client web site)</li>
<li>the web site uploads HTML and pieces of JS to the client</li>
<li>the JS code extracts the id_token from the URL fragment and posts it to its backend</li>
</ol>
<p>So the RP implementation requires a combination of backend and client side code.
Furthermore,
the RP needs to process two (or more? - see below) calls to perform the login.
In contrast,
a login based on the code flow can be implemented in the backend
only and requires only a single request on the RP.</p>
<p>In my opinion,
the Basic profile is opimized from a OP perspective
as it minimizes calls and (potentially) shared state on the OP&#8217;s side whereas
the <a class="reference internal" href="glossary.html#term-code-flow"><em class="xref std std-term">code flow</em></a> is easier to use from a RPs perspective.</p>
<p>Further questions regarding Basic profile:
How are client and server state synchronized with respect to the user identity after step (3)?
Independently,
based on the id_token that is evaluated on either side?
Or will the client fetch additional data?</p>
<p>I assume URL length restrictions do not hold for <strong>fragements</strong>,
otherwise there would be limitations regarding id_token/access_token size.</p>
<p>What is your story for existing OpenID 2.0 RP?
Do you intend to propose them to migrate to the Basic profile?</p>
<p>regards,
Torsten.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001641-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001641.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001641.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001641-html" title="Permalink to this headline">¶</a></h3>
<p>&gt; So the RP implementation requires a combination of backend and client side code. Furthermore, the RP needs to process two (or more? - see below) calls to perform the login. In contrast, a login based on the code flow can be implemented in the backend only and requires only a single request on the RP.</p>
<p>The JS for POSTing the fragment to the backend could be cached
as part of the initial page load at the RP,
the redirect from the Authorization endpoint would trigger the cached JS
and the result would be a single POST to the RP.</p>
<p>The response from the post can set browser cookies,
allowing a simple client less overhead in maintaining state with the backend call.</p>
<p>I don&#8217;t have any special personal attachment to the implicit flow,
others can probably better defend it.</p>
<p>&gt; In my opinion, the Basic profile is opimized from a OP perspective as it minimizes calls and (potentially) shared state on the OP&#8217;s side whereas the code flow is easier to use from a RPs perspective.
&gt;</p>
<p>That may depend on the RP, but point taken.</p>
<p>&gt; Further questions regarding Basic profile:
&gt; How are client and server state synchronized with respect to the user identity after step (3)? Independently, based on the id_token that is evaluated on either side? Or will the client fetch additional data?
&gt;</p>
<p>I don&#8217;t understand the question client and server are a bit ambiguous.</p>
<p>In the above flow the Web Server is the client,
It has a bit of JS to help relay the message and get around using a POST redirect.</p>
<p>I would not call the browser the client in that case.</p>
<p>It is possible that there are cases where you would have a canvas app in the browser that is interacting with the OAuth endpoints as well as a WebServer that is using the id_token to grant access to some of it&#8217;s resources.
That is however a much more complicated case.</p>
<p>&gt; I assume URL length restrictions do not hold for fragements, otherwise there would be limitations regarding id_token/access_token size.
&gt;
&gt; What is your story for existing OpenID 2.0 RP? Do you intend to propose them to migrate to the Basic profile?</p>
<p>Migrate to Connect,
Basic if it works for them or one of the other flows if they work better.</p>
<p>Basic is not intended to be the bast way to implement Connect,
only a proposal for the simplest with basic functionality.</p>
<p>John</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001618-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001618.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001618.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001618-html" title="Permalink to this headline">¶</a></h3>
<p>John,
thanks for the background. This leaves me with a major question though:</p>
<p>&gt; That was the way we originally had it.   Later on people thought that using the OAuth multi-response type was more OAuth friendly.
&gt;
&gt; Originally if you had the scope openid:
&gt; 1 response_type=code   both code and id_token were query encoded in the response</p>
<p>Maybe I&#8217;m missing something,
but in the &#8220;code&#8221; flow, you don&#8217;t get back an id_token in that response.
You get back a code,
and that code can be exchanged for an access token and an id_token,
since you asked for something that includes the &#8220;openid&#8221; scope. From Standard, section 2.2.1:</p>
<p>code</p>
<blockquote>
<div>When supplied as the value for the response_type parameter, a
successful response MUST include an Authorization Code as defined in
the OAuth 2.0 specification. Both successful and error responses
MUST be added as parameters to the query component of the response.
All tokens are returned from the Token Endpoint. Authorization
Servers MUST support this response_type.</div></blockquote>
<p>So the whole issue of query-encoding the id_token isn&#8217;t even an option here.
It <em>is</em> an option
if you&#8217;re asking for something akin to &#8220;code id_token&#8221;,
but that wasn&#8217;t on the table.
In the current spec, those are both defined as <em class="xref std std-term">fragment encoded</em> anyway.</p>
<p>&gt; 2 response_type=token  both access_token and id_token were fragment encoded.
&gt;
&gt; There was no way to just get code or access_token, and no way to get just id_token.</p>
<p>The former, yes, there is:
just don&#8217;t include the &#8220;openid&#8221; scope.</p>
<p>The latter, no.
But if you ask for a token with just the &#8220;openid&#8221; scope and don&#8217;t ask for any other permissions,
the server <em>could</em> give you a null or empty or otherwise useless access token there,
if it wanted to.
I agree that if this is a real and viable use case,
then it should be a separate kind of <a class="reference internal" href="standard.html#term-response-type"><em class="xref std std-term">response_type</em></a>,
but I&#8217;m not seeing that right now.</p>
<p>&gt; It was simpler I will give you that.
&gt;
&gt; It is a bit different from adding id_token to the token endpoint in that there is no OAuth mechanism for controlling the response from the endpoint.  I suppose the alternative would have been to add an extra parameter to the token endpoint request to say if you wanted a id_token.</p>
<p>No, again,
that&#8217;s what the scope already handles.
If we didn&#8217;t have a standardized <a class="reference internal" href="uma_core.html#term-scope"><em class="xref std std-term">scope</em></a> value, then I&#8217;d agree with this.</p>
<blockquote>
<div>&#8211; Justin</div></blockquote>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001619-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001619.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001619.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001619-html" title="Permalink to this headline">¶</a></h3>
<p>&gt; So the whole issue of query-encoding the id_token isn&#8217;t even an option here. It <em>is</em> an option if you&#8217;re asking for something akin to &#8220;code id_token&#8221;, but that wasn&#8217;t on the table. In the current spec, those are both defined as fragment encoded anyway.</p>
<p>Having <a class="reference internal" href="standard.html#term-24"><em class="xref std std-term">id_token</em></a> returned in the front channel was one of the early must haves from the major IdP.
Given that in the early days
we returned <a class="reference internal" href="standard.html#term-24"><em class="xref std std-term">id_token</em></a> query encoded in the front channel and from the <a class="reference internal" href="oauth.html#term-token-endpoint"><em class="xref std std-term">token endpoint</em></a>.
It looked like a hack.
There was no way to change the semantics of <a class="reference internal" href="standard.html#term-19"><em class="xref std std-term">code</em></a>.
With the <em class="xref std std-term">multi token response type</em> change around draft 19 of OAuth I think,
Google and Facebook decided that was the best way to indicate the <a class="reference internal" href="standard.html#term-response-type"><em class="xref std std-term">response_type</em></a>,
rather than overloading the semantics of <a class="reference internal" href="uma_core.html#term-58"><em class="xref std std-term">scopes</em></a>.</p>
<p>Currently if you ask for code it is defined in the OAuth 2 core spec
and you get code back just as you would expect, the same goes for token.
We avoided reinterpreting the OAuth spec as much as possible.
The permissible way to ask for multiple tokens is the return type and that is what we are currently doing.</p>
<p>&gt;
&gt;&gt; 2 response_type=token  both access_token and id_token were fragment encoded.
&gt;&gt;
&gt;&gt; There was no way to just get code or access_token, and no way to get just id_token.
&gt;
&gt; The former, yes, there is: just don&#8217;t include the &#8220;openid&#8221; scope. The latter, no. But if you ask for a token with just the &#8220;openid&#8221; scope and don&#8217;t ask for any other permissions, the server <em>could</em> give you a null or empty or otherwise useless access token there, if it wanted to. I agree that if this is a real and viable use case, then it should be a separate kind of response_type, but I&#8217;m not seeing that right now.
&gt;</p>
<p>The thing is that if you don&#8217;t include the openid scope
you are not doing openid Connect and our spec has nothing to say in the matter.
So removing the <a class="reference internal" href="glossary.html#term-openid"><em class="xref std std-term">openid</em></a> scope
so that the IdP can&#8217;t tell if it is a connect request or some other OAuth request is not a real option.</p>
<p>The only thing I might change at this point on <a class="reference internal" href="standard.html#term-response-type"><em class="xref std std-term">response_type</em></a>
if I had a do over would be to use underscores rather than spaces to reduce confusion.
Other than that I don&#8217;t think we have a problem.</p>
<p>In reality
a client will only use a single response type appropriate for it.
They are not dynamically changing these things.
If you want code as a query parameter just ask for &#8216;code&#8217; all the options are available
to the clients without confusing it with the scopes.</p>
<p>&gt;&gt; It was simpler I will give you that.
&gt;&gt;
&gt;&gt; It is a bit different from adding id_token to the token endpoint in that there is no OAuth mechanism for controlling the response from the endpoint.  I suppose the alternative would have been to add an extra parameter to the token endpoint request to say if you wanted a id_token.
&gt;
&gt; No, again, that&#8217;s what the scope already handles. If we didn&#8217;t have a standardized scope value, then I&#8217;d agree with this.
&gt;</p>
<p>Again if you remove the <a class="reference internal" href="glossary.html#term-openid"><em class="xref std std-term">openid</em></a> scope it is not openid.
That is the scope that asks for the user_info endpoint and the user_id.</p>
<p>John</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001620-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001620.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001620.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001620-html" title="Permalink to this headline">¶</a></h3>
<p>On not being OpenID:
I would say that
if you&#8217;re not getting an ID Token back,
you&#8217;re not doing OpenID Connect, you&#8217;re just doing OAuth2.
If you happen to be doing OAuth2 against something that has a User Info Endpoint, that&#8217;s fine,
but it&#8217;s not binding you to the user&#8217;s session.
It&#8217;s definitely the right thing to avoid mucking about with OAuth2 wherever possible.</p>
<p>But the question being addressed below was
&#8220;how do I know when to include the ID Token?&#8221;,
and I think it should break down as follows
(assuming user grants access and all else is validated):</p>
<ul class="simple">
<li>if the request to the token endpoint includes the scope &#8216;<a class="reference internal" href="glossary.html#term-openid"><em class="xref std std-term">openid</em></a>&#8216;,
throw the <a class="reference internal" href="messages.html#term-id-token"><em class="xref std std-term">id token</em></a> into the <em class="xref std std-term">JSON response</em></li>
<li>if the request to the <a class="reference internal" href="oauth_responses.html#term-authorization-endpoint"><em class="xref std std-term">authorization endpoint</em></a> is for type &#8216;<a class="reference internal" href="standard.html#term-token"><em class="xref std std-term">token</em></a>&#8216; and
the <a class="reference internal" href="uma_core.html#term-scope"><em class="xref std std-term">scope</em></a> includes &#8216;<a class="reference internal" href="glossary.html#term-openid"><em class="xref std std-term">openid</em></a>&#8216;,
throw the <em class="xref std std-ref">id token</em> into the <a class="reference internal" href="glossary.html#term-fragment"><em class="xref std std-term">fragment</em></a></li>
<li>if the request to the authorization endpoint is for type &#8216;<a class="reference internal" href="standard.html#term-code-id-token"><em class="xref std std-term">code id_token</em></a>&#8216;
and the scope includes &#8216;<a class="reference internal" href="glossary.html#term-openid"><em class="xref std std-term">openid</em></a>&#8216;,
throw the <a class="reference internal" href="messages.html#term-id-token"><em class="xref std std-term">id token</em></a> into the <a class="reference internal" href="glossary.html#term-fragment"><em class="xref std std-term">fragment</em></a>
along with the <a class="reference internal" href="standard.html#term-19"><em class="xref std std-term">code</em></a>
(again, avoids the query parameter leakage issue brought up before)</li>
<li>if the request to the <a class="reference internal" href="oauth_responses.html#term-authorization-endpoint"><em class="xref std std-term">authorization endpoint</em></a> is for type &#8216;<a class="reference internal" href="standard.html#term-code-token"><em class="xref std std-term">code token</em></a>&#8216;
and the scope includes &#8216;<a class="reference internal" href="glossary.html#term-openid"><em class="xref std std-term">openid</em></a>&#8216;,
throw the <a class="reference internal" href="messages.html#term-id-token"><em class="xref std std-term">id token</em></a> and the <a class="reference internal" href="glossary.html#term-access-token"><em class="xref std std-term">access token</em></a> into the <em class="xref std std-term">fragment along</em> with the <a class="reference internal" href="standard.html#term-19"><em class="xref std std-term">code</em></a></li>
</ul>
<p>What I&#8217;m saying is that #3 above is an odd special case that could be subsumed by #4 above.
This all gets rid of the need for the id_token response type entirely.
Apart from being a breaking change,
I don&#8217;t see how this doesn&#8217;t cover the use cases described below.</p>
<blockquote>
<div>&#8211; Justin</div></blockquote>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001621-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001621.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001621.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001621-html" title="Permalink to this headline">¶</a></h3>
<p>The current specs have much simpler rules than the ones proposed below.  They are:</p>
<ul class="simple">
<li>If response_type includes id_token, return an ID Token.</li>
<li>If response_type includes token, return a Token.</li>
<li>If response_type includes code, return a Code.</li>
</ul>
<p>These can be mixed and matched as meets the Client&#8217;s needs.</p>
<p>I don&#8217;t see a good reason to make it any more complicated than that.</p>
<blockquote>
<div>&#8211; Mike</div></blockquote>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001622-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001622.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001622.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001622-html" title="Permalink to this headline">¶</a></h3>
<p>( refer to <a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001620.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001620.html</a> )</p>
<p>I don&#8217;t see why this is simpler. It&#8217;s actually more obscure to developers.
The scope &#8216;openid&#8217; refers to scope of access &#8211;
<strong>namely the request to learn the user&#8217;s identifier at the issuer</strong>.</p>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001623-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001623.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001623.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001623-html" title="Permalink to this headline">¶</a></h3>
<p>I agree with Breno,
keeping <a class="reference internal" href="uma_core.html#term-58"><em class="xref std std-term">scopes</em></a> and <a class="reference internal" href="glossary.html#term-response-types"><em class="xref std std-term">response types</em></a> <strong>separate</strong> will cause fewer problems down the road.</p>
<p>We have a number of new response types registered,
(I may have to hurt the next person who talk about them being com posable.)</p>
<p>Each <a class="reference internal" href="standard.html#term-response-type"><em class="xref std std-term">response_type</em></a> clearly defines
what is returned from the authorization server,
and how it is to be returned (ignoring grey area for post message).</p>
<p>The <a class="reference internal" href="glossary.html#term-openid"><em class="xref std std-term">openid</em></a> scope makes the protocol <a class="reference internal" href="glossary.html#term-openid"><em class="xref std std-term">openid</em></a> asking for a authentication grant.
e.g. Do you want to log into x and give them access to your user_id.   Simple.</p>
<p>The openid protocol requires that <a class="reference internal" href="standard.html#term-24"><em class="xref std std-term">id_token</em></a> is always returned
from the token endpoint when exchanging code.  Simple.</p>
<p>The registered responstypes define what is returned from the authorization endpoint and how.  Simple.</p>
<p>Removing some of the return_types and overloading the openid scope with more semantics is more complicated.</p>
<p>My opinion
John B.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>scope=openid</p>
<blockquote>
<div><ul class="simple">
<li>authentication assertion -  identifier <a class="reference external" href="mailto:user&#37;&#52;&#48;idp">user<span>&#64;</span>idp</a> is asserted.</li>
<li>standard user attributes -  access token to User Info endpoint</li>
</ul>
</div></blockquote>
<p>authentiation assertion:</p>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>format</dt>
<dd><ul class="first last simple">
<li>id_token</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">response</p>
<blockquote>
<div><ul class="simple">
<li>indirectly in URL fragment  ( only if specified response_type has id_token)</li>
<li>directly  from tokne endpoint</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>standard user attributes</p>
<blockquote class="last">
<div><ul class="simple">
<li>User Info JSON</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001624-html">
<h3><a class="reference external" href="http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001624.html">http://lists.openid.net/pipermail/openid-specs-ab/Week-of-Mon-20120220/001624.html</a><a class="headerlink" href="#http-lists-openid-net-pipermail-openid-specs-ab-week-of-mon-20120220-001624-html" title="Permalink to this headline">¶</a></h3>
<p>Yes.</p>
<p>As I understand,
OAuth&#8217;s <a class="reference internal" href="standard.html#term-response-type"><em class="xref std std-term">response_type</em></a> parameter tells
<strong>what is to be returned</strong> by the <a class="reference internal" href="oauth_responses.html#term-authorization-endpoint"><em class="xref std std-term">Authorization Endpoint</em></a>.
We should stick to the semantics of it and should not alter it.</p>
<p>Perhaps we could state it in our specs, but that actually is something that
OAuth spec. really should do.</p>
<p>FYI, I wrote a blog post with a table showing what are to be returned in
each cases.</p>
<p>Hope this helps.</p>
<p><a class="reference external" href="http://nat.sakimura.org/2012/02/22/the-relationship-between-endpoint-responses-and-response_type-scope-pair/">http://nat.sakimura.org/2012/02/22/the-relationship-between-endpoint-responses-and-response_type-scope-pair/</a></p>
<p>=nat</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">response_type = what is(are in Connect) to be returned.</p>
</div>
</div>
</div>
<div class="section" id="mandatory-to-implement-token-type">
<h2><a class="toc-backref" href="#id70">Mandatory-to-implement token type</a><a class="headerlink" href="#mandatory-to-implement-token-type" title="Permalink to this headline">¶</a></h2>
<div class="section" id="http-www-ietf-org-mail-archive-web-oauth-current-msg07906-html">
<h3><a class="reference external" href="http://www.ietf.org/mail-archive/web/oauth/current/msg07906.html">http://www.ietf.org/mail-archive/web/oauth/current/msg07906.html</a><a class="headerlink" href="#http-www-ietf-org-mail-archive-web-oauth-current-msg07906-html" title="Permalink to this headline">¶</a></h3>
<p>Stephen, as AD, brought up the question of <a class="reference internal" href="#term-mandatory-to-implement"><em class="xref std std-term">mandatory-to-implement</em></a>
token types, in the IETF 82 meeting.  There was some extended
discussion on the point:</p>
<ul class="simple">
<li>Stephen is firm in his belief that it&#8217;s necessary for interoperability.
He notes that mandatory to <em>implement</em> is not the same as mandatory to <em>use</em>.</li>
<li>Several participants believe
that without a mechanism for requesting or negotiating a token type,
there is no value in having any type be <em class="xref std std-term">mandatory to implement</em>.</li>
</ul>
<p>Stephen is happy to continue the discussion on the list, and make his point clear.
In any case,
there was clear consensus in the room that we <em>should</em> specify a <a class="reference internal" href="#term-mandatory-to-implement"><em class="xref std std-term">mandatory-to-implement</em></a> type,
and that that type be <a class="reference internal" href="glossary.html#term-bearer-tokens"><em class="xref std std-term">bearer tokens</em></a>.
This would be specified in the base document,
and would make a normative reference from the base doc to the bearer token doc.</p>
<p>We need to confirm that consensus on the mailing list,
so this starts the discussion.
Let&#8217;s work on resolving this over the next week or so, and moving forward:</p>
<ol class="arabic simple">
<li>Should we specify some token type as <em class="xref std std-term">mandatory to implement</em>?
Why or why not (<em>briefly</em>)?</li>
<li>If we do specify one, which token type should it be?</li>
</ol>
<p>Barry, as chair</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>mandatory-to-implement</li>
<li>mandatory-to-use</li>
</ul>
</div>
</div>
<div class="section" id="http-www-ietf-org-mail-archive-web-oauth-current-msg07918-html">
<h3><a class="reference external" href="http://www.ietf.org/mail-archive/web/oauth/current/msg07918.html">http://www.ietf.org/mail-archive/web/oauth/current/msg07918.html</a><a class="headerlink" href="#http-www-ietf-org-mail-archive-web-oauth-current-msg07918-html" title="Permalink to this headline">¶</a></h3>
<p>&gt; 1. Should we specify some token type as mandatory to implement?  Why
&gt; or why not (<em>briefly</em>)?</p>
<p>No,
since I do not believe that the force of compliance with this one point of the spec
will be enough to persuade those who don&#8217;t want to use
whatever the MTI token type ends up being to use it.
Let&#8217;s say that we were to pick <a class="reference internal" href="glossary.html#term-bearer"><em class="xref std std-term">Bearer</em></a>,
but Example.com decides to only support <a class="reference internal" href="glossary.html#term-mac"><em class="xref std std-term">MAC</em></a> for their API.
Is it correct to say that Example.com is not really doing OAuth2?
I would argue no,
since they&#8217;re doing everything within spec to issue tokens,
and the tokens that they&#8217;re issuing are well defined and within spec as well.
So then let&#8217;s say, hypothetically, that in order comply with the letter of the law,
they implement a <a class="reference internal" href="oauth_threat.html#term-bearer-token"><em class="xref std std-term">Bearer token</em></a> as well as <a class="reference internal" href="glossary.html#term-mac"><em class="xref std std-term">MAC</em></a>.
But which type do they issue to clients?
Clients have no way of choosing or discovering which what kind of token comes back (yet).
If <a class="reference internal" href="glossary.html#term-bearer"><em class="xref std std-term">Bearer</em></a> is MTI, how do you even use another token type?</p>
<p>Which brings us to <a class="reference internal" href="glossary.html#term-mti"><em class="xref std std-term">MTI</em></a> in clients,  <a class="footnote-reference" href="#id4" id="id3">[2]</a>
which makes even less sense.
Let&#8217;s say that I&#8217;m writing a client to talk to Example.com,
which hands back <em class="xref std std-term">MAC tokens</em>.
I want to comply with the spec,
so I implement <a class="reference internal" href="glossary.html#term-bearer"><em class="xref std std-term">Bearer</em></a> support in my client,
code paths which will never see the light of day.</p>
<p>Then there&#8217;s the argument
that a generic library is what&#8217;s really meant by &#8220;client&#8221; here,
and that those MUST follow the MTI guidelines.
I also find this to be ludicrous, since client libraries will implement whatever servers support.
A good client library will support <em>both</em> <a class="reference internal" href="glossary.html#term-mac"><em class="xref std std-term">MAC</em></a> and <a class="reference internal" href="glossary.html#term-bearer"><em class="xref std std-term">Bearer</em></a> together,
along with whatever magical tokens that haven&#8217;t been dreamed up yet that are getting traction.</p>
<p>Ultimately, I think that our declaring something MTI is a position of
hubris that won&#8217;t affect how people really use this thing.</p>
<blockquote>
<div>&#8211; Justin</div></blockquote>
</div>
<div class="section" id="http-www-ietf-org-mail-archive-web-oauth-current-msg07921-html">
<h3><a class="reference external" href="http://www.ietf.org/mail-archive/web/oauth/current/msg07921.html">http://www.ietf.org/mail-archive/web/oauth/current/msg07921.html</a><a class="headerlink" href="#http-www-ietf-org-mail-archive-web-oauth-current-msg07921-html" title="Permalink to this headline">¶</a></h3>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[2]</a></td><td>: refered.</td></tr>
</tbody>
</table>
<p>I think this is really the key problem.
To date, there isn&#8217;t a unified library that clients and servers are using
that could force this issue:
every server/site is rolling their own oauth sdk,
and they don&#8217;t have much reason <em>now</em> to change that.
If/when something emerged as being the oauth equivalent of openssl,
then it would make sense to tighten requirements on such a library
to achieve better interoperability.
It would also coincide with actual real world _knowledge_ of
what the appropriate MUST-IMPLEMENT&#8217;s are instead of guessing.
All a <em class="xref std std-term">mandatory requirement</em> will do now is alienate a lot implementations
who are otherwise striving to be compliant.</p>
<p>So my bottom line to Stephen:
defer this to a later recycle of the rfc.</p>
<p>Mike</p>
</div>
<div class="section" id="http-www-ietf-org-mail-archive-web-oauth-current-msg07923-html">
<h3><a class="reference external" href="http://www.ietf.org/mail-archive/web/oauth/current/msg07923.html">http://www.ietf.org/mail-archive/web/oauth/current/msg07923.html</a><a class="headerlink" href="#http-www-ietf-org-mail-archive-web-oauth-current-msg07923-html" title="Permalink to this headline">¶</a></h3>
<p>&gt; 1. Should we specify some token type as mandatory to implement?  Why or
&gt; why not (<em>briefly</em>)?</p>
<p>On the server - no.
It makes no sense
because the server <strong>dictates</strong> the token type
so if it decides to never issue the mandated type,
what&#8217;s the point in implementing?</p>
<p>On the client, maybe.
If the server knows that a client will always understand a set of token types,
it can choose to use that and ensure interop (or not).
In practice,
<strong>mandating will add no real interop value</strong>.
Almost every client will hard-code the token types
it needs to understand and providers are not likely to support more than one or to change it.
We can mandate a type for &#8216;generic clients&#8217; so that libraries support both,
but it won&#8217;t actually make any difference.</p>
<p>Bottom line,
this is a red herring.
OAuth doesn&#8217;t really provide this level of interop and was never designed for that.
In the future,
when we have more interop web APIs (photos, social, etc.)
and we have real world experience with discovery,
this will be important. But that&#8217;s a few years away (at least).</p>
<p>&gt; 2. If we do specify one, which token type should it be?</p>
<p>This is a no win situation.
Most providers will ignore a requirement to support MAC,
or will support it but will not see much usage because most developers
when given the choice will go with <a class="reference internal" href="glossary.html#term-bearer"><em class="xref std std-term">Bearer</em></a>.
Mandating <a class="reference internal" href="glossary.html#term-bearer"><em class="xref std std-term">Bearer</em></a> will be ignored by providers who want better security
and will most likely render <a class="reference internal" href="glossary.html#term-mac"><em class="xref std std-term">MAC</em></a> pointless.
If we mandate <a class="reference internal" href="glossary.html#term-bearer"><em class="xref std std-term">Bearer</em></a>,
I see no point in even publishing <a class="reference internal" href="glossary.html#term-mac"><em class="xref std std-term">MAC</em></a>
as it will turn into a purely theoretical exercise.</p>
<p>Given the history of this group,
no change is the only likely consensus.</p>
<p>EHL</p>
</div>
<div class="section" id="http-www-ietf-org-mail-archive-web-oauth-current-msg07973-html">
<h3><a class="reference external" href="http://www.ietf.org/mail-archive/web/oauth/current/msg07973.html">http://www.ietf.org/mail-archive/web/oauth/current/msg07973.html</a><a class="headerlink" href="#http-www-ietf-org-mail-archive-web-oauth-current-msg07973-html" title="Permalink to this headline">¶</a></h3>
<p>Re: &#8220;So, pick one (my strong personal preference) or establish and
document why you&#8217;re not picking one seem to me to be the choices
available.&#8221;</p>
<p>We don&#8217;t have discovery done (enough)
yet to lean on it in the core spec,
but if we did I&#8217;d be in favor of something that says
that you must implement either an MTI token
OR a discovery mechanism that advertises at least one token.
Would that be workable?</p>
<p>We could bang on the discovery stuff in pretty short order I think if we needed to.</p>
<p>-bill</p>
</div>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="resource.html">Resource</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="signed_nonce.html">Decoupling Identity and Authentication</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2011, HDKNR.COM.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2pre/3c28de26aac2.
    </div>
  </body>
</html>