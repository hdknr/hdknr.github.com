

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Simple Web Discovery (SWD) &mdash; identity 1.0 documentation</title>
    
    <link rel="stylesheet" href="static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    <link rel="stylesheet" href="static/openid.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
    <link rel="top" title="identity 1.0 documentation" href="index.html" />
    <link rel="next" title="The ‘acct’ URI Scheme" href="acct.html" />
    <link rel="prev" title="WebFinger" href="webfinger.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="index.html">
          <span>identity 1.0 documentation</span></a></h1>
        <h2 class="heading"><span>Simple Web Discovery (SWD)</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="webfinger.html">WebFinger</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="acct.html">The &#8216;acct&#8217; URI Scheme</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="simple-web-discovery-swd">
<h1><a class="toc-backref" href="#id1">Simple Web Discovery (SWD)</a><a class="headerlink" href="#simple-web-discovery-swd" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="swd">
<p class="topic-title first">SWD</p>
<ul class="simple">
<li><a class="reference internal" href="#simple-web-discovery-swd" id="id1">Simple Web Discovery (SWD)</a><ul>
<li><a class="reference internal" href="#abstract" id="id2">Abstract</a></li>
<li><a class="reference internal" href="#introduction" id="id3">1.  Introduction</a></li>
<li><a class="reference internal" href="#simple-web-discovery-request" id="id4">2.  Simple Web Discovery Request</a></li>
<li><a class="reference internal" href="#simple-web-discovery-responses" id="id5">3.  Simple Web Discovery Responses</a><ul>
<li><a class="reference internal" href="#response-containing-one-or-more-locations" id="id6">3.1.  Response Containing One or More Locations</a></li>
<li><a class="reference internal" href="#redirecting-all-simple-web-discovery-requests" id="id7">3.2.  Redirecting All Simple Web Discovery Requests</a></li>
<li><a class="reference internal" href="#unauthorized-response" id="id8">3.3.  401 Unauthorized Response</a></li>
<li><a class="reference internal" href="#other-http-1-1-responses" id="id9">3.4.  Other HTTP 1.1 Responses</a></li>
</ul>
</li>
<li><a class="reference internal" href="#iana-considerations" id="id10">4. IANA Considerations</a></li>
<li><a class="reference internal" href="#security-considerations" id="id11">5. Security Considerations</a></li>
<li><a class="reference internal" href="#references" id="id12">6. References</a><ul>
<li><a class="reference internal" href="#normative-references" id="id13">6.1. Normative References</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<p>Based on Mike Jones&#8217; <a class="reference external" href="http://self-issued.info/docs/draft-jones-simple-web-discovery.html">draft-jones-simple-web-discovery-02</a> .</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last">
<li><p class="first">December 13, 2011, Draft 02 (checked)</p>
</li>
<li><p class="first"><a class="reference external" href="https://datatracker.ietf.org/doc/draft-jones-simple-web-discovery/">IETF Tracker</a></p>
</li>
<li><p class="first">John Bradley&#8217;s proposal to extend multiple issuer support at the same server.</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://hg.openid.net/connect/issue/513/basic-12-messages-814-discovery-31-32">http://hg.openid.net/connect/issue/513/basic-12-messages-814-discovery-31-32</a></li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="abstract">
<h2><a class="toc-backref" href="#id2">Abstract</a><a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h2>
<dl class="glossary docutils">
<dt id="term-swd">SWD</dt>
<dd>Simple Web Discovery (SWD) defines an HTTPS GET based mechanism to discover the location of a given type of service
for a given principal starting only with a domain name.</dd>
</dl>
</div>
<div class="section" id="introduction">
<span id="swd-1"></span><h2><a class="toc-backref" href="#id3">1.  Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Simple Web Discovery (SWD) defines an HTTPS GET based mechanism
to discover the location of a given type of service
for a given principal starting only with a domain name.
SWD requests use the x-www-form-urlencoded format to specify a URI for the principal
and another URI for the type of service being sought.
If the request is successful then the response, by default, is a JSON object containing an array of URIs
that point to where the principal has instances of services of the requested type.</p>
<p>For example, let us say that a requester wants to discover where Joe keeps his calendar.
The requester could take Joe&#8217;s e-mail address, &#8220;<a class="reference external" href="mailto:joe&#37;&#52;&#48;example&#46;com">joe<span>&#64;</span>example<span>&#46;</span>com</a>&#8221;
and use from it its domain to create an HTTPS GET request of the following form
(with long lines broken for display purposes only):</p>
<div class="highlight-python"><pre>GET /.well-known/simple-web-discovery?principal=mailto:joe@example.com&amp;service=urn:adatum.com:calendar HTTP/1.1
Host: example.com

HTTP/1.1 200 OK
Content-Type: application/json

{
 "locations": ["http://calendars.proseware.com/calendars/joseph"]
}</pre>
</div>
<p>Note:
The request-URI is left unencoded in the above example
for the sake of readability in the above example.
The query parameters above would actually be encoded
as &#8221;?principal=mailto%3Ajoe%40example.com&amp;service=urn%3Aexample.org%3Aservice%3Acalendar&#8221;.</p>
</div>
<div class="section" id="simple-web-discovery-request">
<span id="swd-2"></span><h2><a class="toc-backref" href="#id4">2.  Simple Web Discovery Request</a><a class="headerlink" href="#simple-web-discovery-request" title="Permalink to this headline">¶</a></h2>
<p>Domains that support SWD requests MUST make available a SWD server
for their domain at the path &#8220;/.well-known/simple-web-discovery&#8221;.
The syntax and semantics of &#8220;/.well-known&#8221; are defined in RFC 5785 [<span class="target" id="index-0"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc5785.html"><strong>RFC 5785</strong></a>].
&#8220;simple-web-discovery&#8221; MUST point to a SWD server compliant with this specification.</p>
<p>SWD servers MUST support receiving SWD requests via TLS 1.2 as defined in RFC 5246 [<span class="target" id="index-1"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc5246.html"><strong>RFC 5246</strong></a>]
and MAY support other transport layer security mechanisms of equivalent security.
SWD servers MUST reject SWD requests sent over plain HTTP or any other transport that
does not provide both privacy and validation of the server&#8217;s identity.</p>
<p>A SWD server is queried using an HTTPS GET request
with the previously specified path along
with a query segment containing an <em class="xref std std-term">x-www-form-urlencoded</em> form
as defined in HTML 4.01 [W3C.REC‑html401‑19991224].
The form MUST contain two name/value pairs
that MUST appear exactly once, &#8220;principal&#8221; and &#8220;service&#8221;.
Both name/value pairs MUST have values that are set to URIs
(as defined in RFC 3986 [RFC3986]).
If any of the previous requirements are not met in a SWD request,
then the request MUST be rejected with a 400 Bad Request.</p>
<p>The SWD request form MAY contain additional name/value pairs
but if those name/value pairs are not recognized by the SWD server
then the SWD server MUST ignore them for processing purposes.</p>
<p>The principal query component is a URI that identifies an entity.
The service query component is a URI that identifies a service type.
The semantics of the SWD query is &#8220;Please return the location(s) of instances of the specified service type
associated with the specified principal&#8221;.
The definition of URIs used to identify principals and services are outside the scope of this specification.</p>
</div>
<div class="section" id="simple-web-discovery-responses">
<span id="swd-3"></span><h2><a class="toc-backref" href="#id5">3.  Simple Web Discovery Responses</a><a class="headerlink" href="#simple-web-discovery-responses" title="Permalink to this headline">¶</a></h2>
<div class="section" id="response-containing-one-or-more-locations">
<span id="swd-3-1"></span><h3><a class="toc-backref" href="#id6">3.1.  Response Containing One or More Locations</a><a class="headerlink" href="#response-containing-one-or-more-locations" title="Permalink to this headline">¶</a></h3>
<p>Unless another content-type is negotiated, a 200 OK response to a SWD request
that contains the information requested MUST return content of type application/json as defined in RFC 4627 [RFC4627].
The JSON response MUST contain a JSON object that contains a member pair whose name is the string locations
and whose value is an array of strings that are each a URI pointing to a location
where the desired service type belonging to the specified principal can be found.
There are no semantics associated with the order in which the URIs are listed in the array.</p>
<p>The JSON object MAY contain other members
but a receiver of the object MAY ignore any member pairs whose name it does not recognize.</p>
</div>
<div class="section" id="redirecting-all-simple-web-discovery-requests">
<span id="swd-3-2"></span><h3><a class="toc-backref" href="#id7">3.2.  Redirecting All Simple Web Discovery Requests</a><a class="headerlink" href="#redirecting-all-simple-web-discovery-requests" title="Permalink to this headline">¶</a></h3>
<p>SWD requests by definition start off by being issued
to the &#8220;/.well-known/simple-web-discovery&#8221; location.
But locating a SWD server at a root location can prove inconvenient.
To enable service level redirection,
a SWD server MAY return a 200 OK to an HTTPS request with a content type of application/json
(or whatever other content type has been negotiated)
that contains a JSON object that contains a member pair whose name is the string SWD_service_redirect
whose value is a JSON object with a member pair whose name is location
and whose value is a string that encodes a URI.
Optionally the JSON object value of SWD_service_redirect MAY also contain a member
whose name is expires and whose value is a JSON number that encodes an integer.</p>
<p>A SWD compliant client MUST support the &#8220;SWD_service_redirect&#8221; response.</p>
<p>The JSON objects MAY contain other members
but a receiver of the objects MAY ignore any pairs whose name it does not recognize.</p>
<p>The &#8220;location&#8221; member identifies the URI that
the caller MUST redirect all SWD requests
for that domain to until the &#8220;expires&#8221; time has passed.
SWD requests for the redirected domain MUST be constructed
by taking the URI returned in the &#8220;location&#8221;
and using it as the base URI to which the SWD form arguments are then added as query parameters.
The location URI MUST NOT include a query component.</p>
<p>The following is an example of redirect messages
(with long lines broken for display purposes only):</p>
<div class="highlight-python"><pre>GET /.well-known/simple-web-discovery?principal=mailto:joe@example.com&amp;service=urn:adatum.com:calendar HTTP/1.1
Host: example.com

HTTP/1.1 200 OK
Content-Type: application/json

{
 "SWD_service_redirect":
  {
   "location": "https://swd.proseware.com/swd_server",
   "expires": 1300752001
  }
}</pre>
</div>
<div class="highlight-python"><pre>GET /swd_server?principal=mailto:joe@example.com&amp;service=urn:adatum.com:calendar HTTP/1.1
Host: swd.proseware.com

HTTP/1.1 200 OK
Content-Type: application/json

{
 "locations": ["http://calendars.proseware.com/calendars/joseph"]
}</pre>
</div>
<p>Note:
The request-URIs are left unencoded in the above example for the sake of readability.</p>
<p>The &#8220;location&#8221; URI MUST be an HTTPS URL.</p>
<p>The optional &#8220;expires&#8221; member identifies the point
in time at which the caller MUST NOT redirect its SWD requests
for that domain to the previously obtained location and MUST instead return
to the &#8220;/.well-known/simple-web-discovery&#8221; location.</p>
<p>The value of the &#8220;expires&#8221; member MUST encode the number of seconds
from <strong>1970-01-01T0:0:0Z</strong> as measured in UTC
until the desired date/time.
See RFC 3339 [RFC3339] for details regarding date/times in general and UTC in particular.
If the expires value is in the past or if the value is more than one hour in the future
then the response MUST be treated as if it didn&#8217;t contain an expires value.</p>
<p>If the expires value is omitted or if its value is incorrect
then the expires value MUST be treated as having a value of exactly one hour into the future.</p>
<p>If a JSON response is received that contains both a member pair with the name SWD_service_redirect
and a member pair with the name locations as children of the object root
then the SWD_service_redirect member pair MUST be ignored.</p>
</div>
<div class="section" id="unauthorized-response">
<span id="swd-3-3"></span><h3><a class="toc-backref" href="#id8">3.3.  401 Unauthorized Response</a><a class="headerlink" href="#unauthorized-response" title="Permalink to this headline">¶</a></h3>
<p>A SWD server MAY respond to a request with a 401 Unauthorized Response,
as described in RFC 2616 [RFC2616], Section 10.
Per the RFC, the request MAY be repeated with a suitable Authorization header field.
Authorization information may be communicated in this manner, including a JSON Web Token [<a class="reference internal" href="standard.html#term-jwt"><em class="xref std std-term">JWT</em></a>].</p>
</div>
<div class="section" id="other-http-1-1-responses">
<span id="swd-3-4"></span><h3><a class="toc-backref" href="#id9">3.4.  Other HTTP 1.1 Responses</a><a class="headerlink" href="#other-http-1-1-responses" title="Permalink to this headline">¶</a></h3>
<p>A SWD server MAY return other HTTP 1.1 responses, including 404 Not Found, 400 Bad Request,
and 403 Forbidden.
SWD implementations MUST correctly handle these responses.</p>
</div>
</div>
<div class="section" id="iana-considerations">
<h2><a class="toc-backref" href="#id10">4. IANA Considerations</a><a class="headerlink" href="#iana-considerations" title="Permalink to this headline">¶</a></h2>
<p>Per RFC 5785 [RFC5785], the following registration template is offered:</p>
<blockquote>
<div><p>URI suffix  simple-web-discovery</p>
<p>Change controller  IETF</p>
<p>Specification document  This RFC</p>
</div></blockquote>
</div>
<div class="section" id="security-considerations">
<h2><a class="toc-backref" href="#id11">5. Security Considerations</a><a class="headerlink" href="#security-considerations" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>TLS</li>
<li>Request Authorization</li>
<li>JWT</li>
<li>Redirection Restriction( expire time )</li>
</ul>
</div>
<p>SWD responses can contain confidential information.
Therefore a, general approach is used to require <strong>TLS</strong> in all cases.</p>
<p>But TLS can only provide for privacy and server validation,
it cannot validate that the requester is authorized to see the results of a query.
The exact mechanism used to determine
if the requester is authorized to see the result of the query is
outside the scope of this specification.</p>
<p>Because SWD responses can contain confidential information,
the requestor may need authorization to receive them.
Standard HTTP authorization mechanisms MAY be employed to request authorized access,
including the use of an HTTP Authorization header field in requests,
which in turn, may contain a JSON Web Token [JWT], among other authorization data formats.</p>
<p>The ability to redirect an entire SWD server
as defined in this document is an obvious attack point.
This is another reason why we have mandated TLS,
so as to be sure that the redirect can only be received over a secure connection.
We have also put in the upper limit of 60 minutes for a redirect
so as to provide a path for regaining control over queries should a successful attack be launched
to return false redirects.</p>
<p>The &#8220;SWD_service_redirect&#8221; capability may cause unanticipated failures
in cases where a requestor may have permissions to discover content
at the original SWD endpoint but not the one redirected to, or vice-versa.</p>
</div>
<div class="section" id="references">
<h2><a class="toc-backref" href="#id12">6. References</a><a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<div class="section" id="normative-references">
<h3><a class="toc-backref" href="#id13">6.1. Normative References</a><a class="headerlink" href="#normative-references" title="Permalink to this headline">¶</a></h3>
<dl class="glossary docutils">
<dt id="term-rfc2119">[RFC2119]</dt>
<dd>Bradner, S., &#8220;Key words for use in RFCs to Indicate
Requirement Levels&#8221;, BCP 14, RFC 2119, March 1997.</dd>
<dt id="term-rfc2616">[RFC2616]</dt>
<dd>Fielding, R., Gettys, J., Mogul, J., Frystyk, H.,
Masinter, L., Leach, P., and T. Berners-Lee, &#8220;Hypertext
Transfer Protocol &#8211; HTTP/1.1&#8221;, RFC 2616, June 1999.</dd>
<dt id="term-rfc3339">[RFC3339]</dt>
<dd>Klyne, G., Ed. and C. Newman, &#8220;Date and Time on the
Internet: Timestamps&#8221;, RFC 3339, July 2002.</dd>
<dt id="term-rfc3986">[RFC3986]</dt>
<dd>Berners-Lee, T., Fielding, R., and L. Masinter, &#8220;Uniform
Resource Identifier (URI): Generic Syntax&#8221;, STD 66,
RFC 3986, January 2005.</dd>
<dt id="term-rfc4627">[RFC4627]</dt>
<dd>Crockford, D., &#8220;The application/json Media Type for
JavaScript Object Notation (JSON)&#8221;, RFC 4627, July 2006.</dd>
<dt id="term-rfc5246">[RFC5246]</dt>
<dd>Dierks, T. and E. Rescorla, &#8220;The Transport Layer Security
(TLS) Protocol Version 1.2&#8221;, RFC 5246, August 2008.</dd>
<dt id="term-rfc5785">[RFC5785]</dt>
<dd>Nottingham, M. and E. Hammer-Lahav, &#8220;Defining Well-Known
Uniform Resource Identifiers (URIs)&#8221;, RFC 5785,
April 2010.</dd>
<dt id="term-w3c-rec-html401-19991224">[W3C.REC-html401-19991224]</dt>
<dd>Jacobs, I., Raggett, D., and A. Hors, &#8220;HTML 4.01
Specification&#8221;, World Wide Web Consortium
Recommendation REC-html401-19991224, December 1999,
&lt;<a class="reference external" href="http://www.w3.org/TR/1999/REC-html401-19991224">http://www.w3.org/TR/1999/REC-html401-19991224</a>&gt;.</dd>
<dt id="term-jwt">[JWT]</dt>
<dd>Jones, M., Balfanz, D., Bradley, J., Goland, Y., Panzer,
J., Sakimura, N., and P. Tarjan, &#8220;JSON Web Token (JWT)&#8221;,
December 2011.</dd>
</dl>
</div>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="webfinger.html">WebFinger</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="acct.html">The &#8216;acct&#8217; URI Scheme</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2011, HDKNR.COM.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>