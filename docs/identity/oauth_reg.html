

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>OAuth Dynamic Client Registration Protocol &mdash; identity 1.0 documentation</title>
    
    <link rel="stylesheet" href="static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    <link rel="stylesheet" href="static/openid.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
    <link rel="top" title="identity 1.0 documentation" href="index.html" />
    <link rel="next" title="OAuth Token Introspection" href="oauth_introspect.html" />
    <link rel="prev" title="HTTP Authentication: MAC Access Authentication" href="oauth_mac.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="index.html">
          <span>identity 1.0 documentation</span></a></h1>
        <h2 class="heading"><span>OAuth Dynamic Client Registration Protocol</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="oauth_mac.html">HTTP Authentication: MAC Access Authentication</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="oauth_introspect.html">OAuth Token Introspection</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="oauth-dynamic-client-registration-protocol">
<span id="oauth-reg-head"></span><h1>OAuth Dynamic Client Registration Protocol<a class="headerlink" href="#oauth-dynamic-client-registration-protocol" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#abstract" id="id1">Abstract</a></li>
<li><a class="reference internal" href="#introduction" id="id2">1. Introduction</a><ul>
<li><a class="reference internal" href="#notational-conventions" id="id3">1.1. Notational Conventions</a></li>
<li><a class="reference internal" href="#terminology" id="id4">1.2. Terminology</a></li>
<li><a class="reference internal" href="#requirements" id="id5">1.3. Requirements</a><ul>
<li><a class="reference internal" href="#the-client-needs-to-be-uniquely-identifiable-by-the-authorization-server" id="id6">1.3.1. The client needs to be uniquely identifiable by the authorization server</a></li>
<li><a class="reference internal" href="#the-authorization-server-must-collect-metadata-about-a-client-for-later-user-interaction" id="id7">1.3.2. The authorization server must collect metadata about a client for later user interaction</a></li>
<li><a class="reference internal" href="#the-authorization-server-should-have-the-option-of-strongly-authenticating-the-client-and-its-metadata" id="id8">1.3.3. The authorization server should have the option of strongly authenticating the client and its metadata</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dynamic-client-registration-must-be-possible-from-both-web-server-applications-and-applications-with-other-capabilities-and-limitations-such-as-native-applications" id="id9">1.3.4. Dynamic client registration must be possible from both web-server applications and applications with other capabilities and limitations, such as native applications</a><ul>
<li><a class="reference internal" href="#transaction-integrity-must-be-ensured" id="id10">1.3.5. Transaction integrity must be ensured</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#client-registration-endpoint" id="id11">2. Client Registration Endpoint</a><ul>
<li><a class="reference internal" href="#client-association-request" id="id12">2.1. Client Association Request</a></li>
<li><a class="reference internal" href="#client-association-response" id="id13">2.2. Client Association Response</a></li>
<li><a class="reference internal" href="#client-update-request" id="id14">2.3. Client Update Request</a></li>
<li><a class="reference internal" href="#client-update-response" id="id15">2.4. Client Update Response</a></li>
<li><a class="reference internal" href="#rotate-secret-request" id="id16">2.5. Rotate Secret Request</a></li>
<li><a class="reference internal" href="#rotate-secret-response" id="id17">2.6. Rotate Secret Response</a></li>
<li><a class="reference internal" href="#client-registration-error-response" id="id18">2.7. Client Registration Error Response</a></li>
<li><a class="reference internal" href="#client-metadata" id="id19">3. Client Metadata</a></li>
</ul>
</li>
</ul>
</div>
<p>Based on <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-oauth-dyn-reg-01">http://tools.ietf.org/html/draft-ietf-oauth-dyn-reg-01</a></p>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Now Draft 14 ( <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-oauth-dyn-reg-14">http://tools.ietf.org/html/draft-ietf-oauth-dyn-reg-14</a> )</p>
</div>
<div class="section" id="abstract">
<span id="oauth-reg-abstract"></span><h2><a class="toc-backref" href="#id1">Abstract</a><a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h2>
<p>This specification proposes an OAuth Dynamic Client Registration protocol.</p>
<p>(draft 01)</p>
</div>
<div class="section" id="introduction">
<span id="oauth-reg-1"></span><h2><a class="toc-backref" href="#id2">1. Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>In some use-case scenarios,
it is desirable or necessary to allow OAuth clients
to obtain authorization from an OAuth <a class="reference internal" href="glossary.html#term-authorization-server"><em class="xref std std-term">authorization server</em></a>
without the two parties having previously interacted.</p>
<p>Nevertheless,
in order for the authorization server
to accurately represent to end-users
which client is seeking authorization to access the end-user&#8217;s resources,
a method for automatic and unique registration of clients is needed.
The OAuth2 authorization framework does not define
how the relationship between the Client and the Authorization Server is initialized,
or how a given client is assigned a unique Client Identifier.
Historically,
this has happened out-of-band from the OAuth protocol.
This draft provides a mechanism for a client to register itself
with the Authorization Server,
which can be used to dynamically provision a Client Identifier,
and optionally a Client Secret.</p>
<p>As part of the registration process,
this specification also defines a mechanism
for the client to present the Authorization Server
with a set of meta information,
such as a display name and icon to be presented
to the user during the authorization step.</p>
<p>This draft provides a method for the client
to register and update this information over time.</p>
<p>(draft 01)</p>
<div class="section" id="notational-conventions">
<span id="oauth-reg-1-1"></span><h3><a class="toc-backref" href="#id3">1.1. Notational Conventions</a><a class="headerlink" href="#notational-conventions" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>The key words &#8216;MUST&#8217;, &#8216;MUST NOT&#8217;, &#8216;REQUIRED&#8217;, &#8216;SHALL&#8217;, &#8216;SHALL NOT&#8217;,
&#8216;SHOULD&#8217;, &#8216;SHOULD NOT&#8217;, &#8216;RECOMMENDED&#8217;, &#8216;MAY&#8217;, and &#8216;OPTIONAL&#8217; in this
document are to be interpreted as described in [RFC2119].</p>
<p>Unless otherwise noted, all the protocol parameter names and values
are case sensitive.</p>
</div></blockquote>
</div>
<div class="section" id="terminology">
<span id="oauth-reg-1-2"></span><h3><a class="toc-backref" href="#id4">1.2. Terminology</a><a class="headerlink" href="#terminology" title="Permalink to this headline">¶</a></h3>
<p>This specification uses the terms &#8220;Access Token&#8221;, &#8220;Refresh Token&#8221;,
&#8220;Authorization Code&#8221;, &#8220;Authorization Grant&#8221;, &#8220;Authorization Server&#8221;,
&#8220;Authorization Endpoint&#8221;, &#8220;Client&#8221;, &#8220;Client Identifier&#8221;, &#8220;Client
Secret&#8221;, &#8220;Protected Resource&#8221;, &#8220;Resource Owner&#8221;, &#8220;Resource Server&#8221;,
and &#8220;Token Endpoint&#8221; defined by OAuth 2.0 [OAuth2.0].</p>
<p>This specification defines the following additional terms:</p>
<dl class="glossary docutils">
<dt id="term-client-registration-endpoint">Client Registration Endpoint</dt>
<dd>The OAuth 2.0 Endpoint through which
a Client can request new registration and manage the metadata
associated with it.</dd>
<dt id="term-registration-access-token">Registration Access Token</dt>
<dd>An OAuth 2.0 Bearer Token issued by the
Authorization Server through the Client Registration Endpoint
which is used by the Client to authenticate itself during update
and secret rotation operations.</dd>
</dl>
<p>(draft 01)</p>
</div>
<div class="section" id="requirements">
<span id="oauth-reg-1-3"></span><h3><a class="toc-backref" href="#id5">1.3. Requirements</a><a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>[[ Following are proposed requirements for dynamic client
registration.  This section is intended for discussion and will
likely be removed in the final draft. ]]</div></blockquote>
<p>(draft 01)</p>
<div class="section" id="the-client-needs-to-be-uniquely-identifiable-by-the-authorization-server">
<span id="oauth-reg-1-3-1"></span><h4><a class="toc-backref" href="#id6">1.3.1. The client needs to be uniquely identifiable by the authorization server</a><a class="headerlink" href="#the-client-needs-to-be-uniquely-identifiable-by-the-authorization-server" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Unique identifier for each Client</li>
<li>issued by Authorization Server</li>
</ul>
</div>
<p>In order for an authorization server
to do proper user-delegated authorization and
prevent unauthorized access
it must be able to identify clients uniquely.</p>
<p>As is done today in OAuth,
the client identifier (and optional secret) should thus be issued
by the authorization server and
not simply accepted as proposed by the client.</p>
<p>(draft 01)</p>
</div>
<div class="section" id="the-authorization-server-must-collect-metadata-about-a-client-for-later-user-interaction">
<span id="oauth-reg-1-3-2"></span><h4><a class="toc-backref" href="#id7">1.3.2. The authorization server must collect metadata about a client for later user interaction</a><a class="headerlink" href="#the-authorization-server-must-collect-metadata-about-a-client-for-later-user-interaction" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Client Metadata</li>
</ul>
</div>
<p>In order for the authorization server
to describe a client to an end-user
in an authorization step it needs information about the client.</p>
<p>This can be the client name at a minimum,
but today servers usually request at least a description,
a homepage URL, and an icon when doing manual registration.</p>
<p>(draft 01)</p>
</div>
<div class="section" id="the-authorization-server-should-have-the-option-of-strongly-authenticating-the-client-and-its-metadata">
<span id="oauth-reg-1-3-3"></span><h4><a class="toc-backref" href="#id8">1.3.3. The authorization server should have the option of strongly authenticating the client and its metadata</a><a class="headerlink" href="#the-authorization-server-should-have-the-option-of-strongly-authenticating-the-client-and-its-metadata" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Optinally, Authentiatio for a registartion process</li>
<li>Same as <a class="reference internal" href="reg.html"><em>OpenID Connect Dynamic Client Registration 1.0</em></a></li>
</ul>
</div>
<p>In order to prevent spoofing of clients and
enable dynamic building of strong trust relationships,
the authorization server should have the option
to verify the provided information.</p>
<p>This might be solved using message signature verification.</p>
<p>(draft 01)</p>
</div>
</div>
<div class="section" id="dynamic-client-registration-must-be-possible-from-both-web-server-applications-and-applications-with-other-capabilities-and-limitations-such-as-native-applications">
<span id="oauth-reg-1-3-4"></span><h3><a class="toc-backref" href="#id9">1.3.4. Dynamic client registration must be possible from both web-server applications and applications with other capabilities and limitations, such as native applications</a><a class="headerlink" href="#dynamic-client-registration-must-be-possible-from-both-web-server-applications-and-applications-with-other-capabilities-and-limitations-such-as-native-applications" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>for smart client registration</li>
</ul>
</div>
<p>Each instance of a native application
(that is, the specific instance running on each device)
that is installed and run by the same user may need the option of getting a unique client identifier.</p>
<p>In this case,
there are implications around gathering and displaying enough information
to ensure that the end-user is delegating authorization to the intended application.</p>
<p>The registration protocol should be simple and flexible
enough to allow for multiple types of applications.</p>
<p>(draft 01)</p>
<div class="section" id="transaction-integrity-must-be-ensured">
<span id="oauth-reg-1-3-5"></span><h4><a class="toc-backref" href="#id10">1.3.5. Transaction integrity must be ensured</a><a class="headerlink" href="#transaction-integrity-must-be-ensured" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Synchronization in big server system</li>
</ul>
</div>
<p>When a client sends information to a server endpoint,
it might take time for this data to propagate through big server installations
that spread across various data centers.</p>
<p>Care needs to be taken that subsequent interactions
with the user after the registration process,
such as an authorization request, show the correct data.</p>
<p>(draft 01)</p>
</div>
</div>
</div>
<div class="section" id="client-registration-endpoint">
<span id="oauth-reg-2"></span><h2><a class="toc-backref" href="#id11">2. Client Registration Endpoint</a><a class="headerlink" href="#client-registration-endpoint" title="Permalink to this headline">¶</a></h2>
<p>The Client Registration Endpoint is an OAuth 2.0 Endpoint defined in
this document that is designed to allow a Client to register itself
with the Authorization Server.  The Client Registration Endpoint MUST
accept HTTP POST messages with request parameters encoded in the
entity body using the &#8220;application/x-www-form-urlencoded&#8221; format.
The Client Registration Endpoint MUST be protected by a transport-
layer security mechanism when sending requests to the Registration
Endpoint.  The server MUST support TLS 1.2 RFC 5246 [RFC5246] and/or
TLS 1.0 [RFC2246] and MAY support additional transport-layer
mechanisms meeting its security requirements.  When using TLS, the
Client MUST perform a TLS/SSL server certificate check, per RFC 6125
[RFC6125].</p>
<p>The Endpoint defines three operations that a client can take on it,
switched by the &#8220;operation&#8221; parameter:</p>
<dl class="glossary docutils">
<dt id="term-client-associate">client_associate</dt>
<dd>generate a new Client Identifier
(and optionally a Client Secret)
and associate it with the set of presented metadata (<a class="reference internal" href="#oauth-reg-3"><em>Section 3</em></a>)</dd>
<dt id="term-client-update">client_update</dt>
<dd>update the metadata (Section 3) associated with a Client Identifier</dd>
<dt id="term-rotate-secret">rotate_secret</dt>
<dd>issue a new Registration Access Token and,
if applicable,
a Client Secret for a Client</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Same with <a class="reference internal" href="reg.html#reg-2-1"><em>2.1.  Metadata Languages and Scripts</em></a></li>
</ul>
</div>
<p>In order to facilitate registered clients updating their information,
the Client Registration Endpoint issues a request_access_token for
clients to securely identify themselves in future connections.  As
such, the Endpoint MUST accept requests with OAuth 2.0 Bearer Tokens
[OAuth.Bearer] for these operations.</p>
<p>In order to support open registration and facilitate wider
interoperability, the Client Registration Endpoint SHOULD allow
client_associate requests with no further authentication.  These
requests MAY be rate-limited to prevent a denial-of-service attack on
the Client Registration Endpoint.</p>
<p>In addition, the Client Registration Endpoint MAY accept an initial
authorization credential in the form of an OAuth 2.0 [OAuth2.0]
access token in order to limit registration to only previously
authorized parties.  The method by which this access token is
obtained by the registrant is generally out-of-band and is out of
scope of this specification.</p>
<p>These two aspects, operation selection and client authentication, are
represented by two parameters common to all operations:</p>
<dl class="glossary docutils">
<dt id="term-operation">operation</dt>
<dd><p class="first">REQUIRED.</p>
<p class="last">Values are &#8220;client_associate&#8221;
(for new registrations),
&#8220;rotate_secret&#8221; to request rotation of the &#8220;client_secret&#8221;,
and &#8220;client_update&#8221; (for updating parameters of an existing &#8220;client_id&#8221;).</p>
</dd>
<dt id="term-access-token">access_token</dt>
<dd><p class="first">OPTIONAL.</p>
<p class="last">An OAuth2 Bearer token used to access the
Client Registration Endpoint, as defined in OAuth2 Bearer.  This
parameter MUST NOT be sent if the Access Token is sent in the HTTP
Authorization header as described in Section 7.1 of OAuth 2.0
[OAuth2.0].  Access Tokens sent in the authorization header must
be OAuth 2.0 Bearer Tokens [OAuth.Bearer].</p>
</dd>
</dl>
<p>Each operation takes a different parameter set, and all operations
are described below.</p>
<p>The Client Registration Endpoint MUST ignore all parameters it does
not understand.</p>
<p>(draft 01)</p>
<div class="section" id="client-association-request">
<span id="oauth-reg-2-1"></span><h3><a class="toc-backref" href="#id12">2.1. Client Association Request</a><a class="headerlink" href="#client-association-request" title="Permalink to this headline">¶</a></h3>
<p>This operation registers a new client to the Authorization Server.
The Authorization Server assigns this client a unique Client
Identifier, optionally assigns a Client Secret, and associates the
metadata given in the request with the issued Client Identifier.  The
request includes the two parameters described above as well as any
parameters described in Client Metadata (Section 3).</p>
<dl class="glossary docutils">
<dt id="term-7">operation</dt>
<dd>REQUIRED, MUST have the value &#8220;client_associate&#8221;</dd>
<dt id="term-8">access_token</dt>
<dd>OPTIONAL, used to restrict new client registration</dd>
<dt id="term-redirect-uris">redirect_uris</dt>
<dd>REQUIRED</dd>
<dt id="term-client-name">client_name</dt>
<dd>RECOMMENDED</dd>
<dt id="term-client-url">client_url</dt>
<dd>RECOMMENDED</dd>
<dt id="term-logo-url">logo_url</dt>
<dd>OPTIONAL</dd>
<dt id="term-contacts">contacts</dt>
<dd>OPTIONAL</dd>
<dt id="term-tos-url">tos_url</dt>
<dd>OPTIONAL</dd>
<dt id="term-token-endpoint-auth-method">token_endpoint_auth_method</dt>
<dd>OPTIONAL</dd>
<dt id="term-policy-url">policy_url</dt>
<dd>OPTIONAL</dd>
<dt id="term-jwk-url">jwk_url</dt>
<dd>OPTIONAL</dd>
<dt id="term-jwk-encryption-url">jwk_encryption_url</dt>
<dd>OPTIONAL</dd>
<dt id="term-x509-url">x509_url</dt>
<dd>OPTIONAL</dd>
<dt id="term-x509-encryption-url">x509_encryption_url</dt>
<dd>OPTIONAL</dd>
<dt id="term-require-signed-request-object">require_signed_request_object</dt>
<dd>OPTIONAL</dd>
<dt id="term-default-max-age">default_max_age</dt>
<dd>OPTIONAL</dd>
<dt id="term-default-acr">default_acr</dt>
<dd>OPTIONAL</dd>
</dl>
<p>For example,
a client could send the following registration request
to the Client Registration Endpoint:</p>
<p>Following is a non-normative example request (with line wraps for display purposes only):</p>
<div class="highlight-python"><pre>POST /register HTTP/1.1
Accept: application/x-www-form-urlencoded
Host: server.example.com
Authorization: Bearer eyJhbGciOiJSUzI1NiJ9.eyJ ... fQ.8Gj_-sj ... _X

operation=client_associate
&amp;redirect_uris=https://client.example.org/callback
    %20https://client.example.org/callback2
&amp;client_name=My%20Example%20
&amp;logo_url=https://client.example.org/logo.png
&amp;token_endpoint_auth_type=client_secret_basic
&amp;jwk_url=https://client.example.org/my_rsa_public_key.jwk</pre>
</div>
<p>(draft 01)</p>
</div>
<div class="section" id="client-association-response">
<span id="oauth-reg-2-2"></span><h3><a class="toc-backref" href="#id13">2.2. Client Association Response</a><a class="headerlink" href="#client-association-response" title="Permalink to this headline">¶</a></h3>
<p>Upon successful association, the Client Registration Endpoint returns
the newly-created Client Identifier and, optionally, a Client Secret.
The response also contains a Registration Access Token that is to be
used by the client to perform subsequent operations at this endpoint.
These items are returned as a JSON document with the following fields
as top-level members of the root JSON object.</p>
<blockquote>
<div><dl class="docutils">
<dt>client_id  REQUIRED.  The unique Client identifier, MUST NOT be</dt>
<dd>currently valid for any other registered Client.</dd>
<dt>client_secret  OPTIONAL.  The Client secret.  This MUST be unique for</dt>
<dd>each &#8220;client_id&#8221;.  This value us used by confidential clients.  It
is not required for clients selecting a token_endpoint_auth_type
of &#8220;private_key_jwt&#8221;</dd>
<dt>registration_access_token  REQUIRED The Access token to be used by</dt>
<dd>the client to perform &#8220;client_update&#8221; and &#8220;rotate_secret&#8221;
requests.</dd>
<dt>issued_at</dt>
<dd>OPTIONAL.  Specifies the timestamp when the identifier was issued.
The timestamp value MUST be a positive integer.  The value is
expressed in the number of seconds since January 1, 1970 00:00:00
GMT.</dd>
<dt>expires_at  OPTIONAL.  The number of seconds from 1970-01-01T0:0:0Z</dt>
<dd>as measured in UTC that the &#8220;client_secret&#8221; will expire or &#8220;0&#8221; if
they do not expire.  See RFC 3339 [RFC3339] for details regarding
date/times in general and UTC in particular.</dd>
</dl>
</div></blockquote>
<p>Following is a non-normative example response:</p>
<div class="highlight-python"><pre>HTTP/1.1 200 OK
Content-Type: application/json
Cache-Control: no-store

{
 "client_id":"s6BhdRkqt3",
 "client_secret":
  "cf136dc3c1fd9153029bb9c6cc9ecead918bad9887fce6c93f31185e5885805d",
  "registration_access_token": "this.is.a.access.token.value.ffx83",
 "expires_at":2893276800
}</pre>
</div>
<p>(draft 01)</p>
</div>
<div class="section" id="client-update-request">
<span id="oauth-reg-2-3"></span><h3><a class="toc-backref" href="#id14">2.3. Client Update Request</a><a class="headerlink" href="#client-update-request" title="Permalink to this headline">¶</a></h3>
<p>This operation updates a previously-registered client with new
metadata at the Authorization Server.  This request MUST be protected
by the Registration Authorization Token associated with the Client
Identifier.  This request MAY include any fields described in Client
Metadata (Section 3).  The values of Client Metadata fields in this
request MUST replace (not augment) the values previously associated
with this client_identifier.  Empty values in Client Metadata SHOULD
be taken as a request to clear any existing value of that field.</p>
<p>operation  REQUIRED, MUST have the value &#8220;client_update&#8221;</p>
<blockquote>
<div><dl class="docutils">
<dt>access_token  REQUIRED, unless presented in the Authorization Header</dt>
<dd>as in OAuth2 Bearer [OAuth.Bearer].  The Registration Access Token
that was issued during the client_associate step, or previous
client_update or rotate_secret calls.</dd>
<dt>redirect_uris</dt>
<dd>REQUIRED</dd>
</dl>
<p>client_name  RECOMMENDED</p>
<dl class="docutils">
<dt>client_url</dt>
<dd>RECOMMENDED</dd>
</dl>
<p>logo_url  OPTIONAL</p>
<p>contacts  OPTIONAL</p>
<p>tos_url  OPTIONAL</p>
<p>token_endpoint_auth_method  OPTIONAL</p>
<p>policy_url  OPTIONAL</p>
<p>jwk_url  OPTIONAL</p>
<p>jwk_encryption_url  OPTIONAL</p>
<p>x509_url  OPTIONAL</p>
<p>x509_encryption_url  OPTIONAL</p>
<p>require_signed_request_object  OPTIONAL</p>
<p>default_max_age  OPTIONAL</p>
<p>default_acr  OPTIONAL</p>
</div></blockquote>
<p>For example, a client could send the following registration request
to the Client Registration Endpoint:</p>
<p>Following is a non-normative example request (with line wraps for display purposes only):</p>
<div class="highlight-python"><pre>POST /register HTTP/1.1
Accept: application/x-www-form-urlencoded
Host: server.example.com
Authorization: Bearer eyJhbGciOiJSUzI1NiJ9.eyJ ... fQ.8Gj_-sj ... _X

operation=client_update
&amp;redirect_uris=https://client.example.org/callback
    %20https://client.example.org/callback2
&amp;client_name=My%20Example%20
&amp;logo_url=https://client.example.org/logo.png
&amp;token_endpoint_auth_type=client_secret_basic
&amp;jwk_url=https://client.example.org/my_rsa_public_key.jwk</pre>
</div>
<p>(draft 01)</p>
</div>
<div class="section" id="client-update-response">
<span id="oauth-reg-2-4"></span><h3><a class="toc-backref" href="#id15">2.4. Client Update Response</a><a class="headerlink" href="#client-update-response" title="Permalink to this headline">¶</a></h3>
<p>Upon successful update, the Client Registration Endpoint returns a
JSON document with the following fields as top-level members of the
root JSON object.</p>
<blockquote>
<div><dl class="docutils">
<dt>client_id  REQUIRED.  The unique Client identifier, MUST NOT be</dt>
<dd>currently valid for any other registered Client.</dd>
</dl>
</div></blockquote>
<p>Following is a non-normative example response:</p>
<div class="highlight-python"><pre>HTTP/1.1 200 OK
Content-Type: application/json
Cache-Control: no-store

{
 "client_id":"s6BhdRkqt3",
}</pre>
</div>
<p>[[ Editor&#8217;s note: should this return the entire client data object,
for confirmation and review, including any fields that may have been
asserted by the AS? ]]</p>
<p>(draft 01)</p>
</div>
<div class="section" id="rotate-secret-request">
<span id="oauth-reg-2-5"></span><h3><a class="toc-backref" href="#id16">2.5. Rotate Secret Request</a><a class="headerlink" href="#rotate-secret-request" title="Permalink to this headline">¶</a></h3>
<p>This operation allows the client to rotate its current Client Secret,
if it has one.  If the client has not been issued a Client Secret,
this operation is an error. [[ Editor&#8217;s note: could this request be
used to rotate the Registration Access Token, even when there&#8217;s not a
client_secret?  Should something else be used to rotate the token
independently?  This is an open issue. ]]</p>
<blockquote>
<div><p>operation  REQUIRED.  MUST have the value rotate_secret</p>
<dl class="docutils">
<dt>access_token  REQUIRED.  The Registration Access Token that was</dt>
<dd>issued during the client_associate step, or previous client_update
or rotate_secret calls.</dd>
</dl>
</div></blockquote>
<p>Following is a non-normative example request (with line wraps for
display purposes only):</p>
<div class="highlight-python"><pre>POST /register HTTP/1.1
Accept: application/x-www-form-urlencoded
Host: server.example.com
Authorization: Bearer eyJhbGciOiJSUzI1NiJ9.eyJ ... fQ.8Gj_-sj ... _X

operation=rotate_secret</pre>
</div>
<p>(draft 01)</p>
</div>
<div class="section" id="rotate-secret-response">
<span id="oauth-reg-2-6"></span><h3><a class="toc-backref" href="#id17">2.6. Rotate Secret Response</a><a class="headerlink" href="#rotate-secret-response" title="Permalink to this headline">¶</a></h3>
<p>Upon successful rotation of the client secret, the Client
Registration Endpoint returns a JSON document with the following
fields as top-level members of the root JSON object.</p>
<blockquote>
<div><dl class="docutils">
<dt>client_id  REQUIRED.  The unique Client identifier, MUST NOT be</dt>
<dd>currently valid for any other registered Client.</dd>
<dt>client_secret  REQUIRED.  The Client secret.  This MUST be unique for</dt>
<dd>each &#8220;client_id&#8221;.</dd>
<dt>registration_access_token  REQUIRED The Access token to be used by</dt>
<dd>the client to perform subsequent &#8220;client_update&#8221; and
&#8220;rotate_secret&#8221; requests.</dd>
<dt>issued_at</dt>
<dd>OPTIONAL.  Specifies the timestamp when the identifier was issued.
The timestamp value MUST be a positive integer.  The value is
expressed in the number of seconds since January 1, 1970 00:00:00
GMT.</dd>
<dt>expires_at  OPTIONAL.  The number of seconds from 1970-01-01T0:0:0Z</dt>
<dd>as measured in UTC that the &#8220;client_secret&#8221; will expire or &#8220;0&#8221; if
they do not expire.  See RFC 3339 [RFC3339] for details regarding
date/times in general and UTC in particular.</dd>
</dl>
</div></blockquote>
<p>Following is a non-normative example response:</p>
<div class="highlight-python"><pre>HTTP/1.1 200 OK
Content-Type: application/json
Cache-Control: no-store

{
 "client_id":"s6BhdRkqt3",
 "client_secret":
  "cf136dc3c1fd9153029bb9c6cc9ecead918bad9887fce6c93f31185e5885805d",
  "registration_access_token": "this.is.a.access.token.value.ffx83",
 "expires_at":2893276800
}</pre>
</div>
<p>(draft 01)</p>
</div>
<div class="section" id="client-registration-error-response">
<span id="oauth-reg-2-7"></span><h3><a class="toc-backref" href="#id18">2.7. Client Registration Error Response</a><a class="headerlink" href="#client-registration-error-response" title="Permalink to this headline">¶</a></h3>
<p>When an OAuth error condition occurs, the Client Registration
Endpoint returns an Error Response as defined in Section 5.2 of the
OAuth 2.0 specification.</p>
<p>When a registration error condition occurs, the Client Registration
Endpoint returns a HTTP 400 status code including a JSON object
describing the error in the response body.</p>
<p>The JSON object contains two members:</p>
<blockquote>
<div><p>error  The error code, a single ASCII string.</p>
<dl class="docutils">
<dt>error_description  The additional text description of the error for</dt>
<dd>debugging.</dd>
</dl>
<p>This specification defines the following error codes:</p>
<dl class="docutils">
<dt>invalid_operation  The value of &#8220;operation&#8221; is invalid or not</dt>
<dd>supported.</dd>
<dt>invalid_redirect_uri  The value of one or more &#8220;redirect_uris&#8221; is</dt>
<dd>invalid.</dd>
<dt>invalid_client_metadata  The value of one of the client metadata</dt>
<dd>(Section 3) fields is invalid.</dd>
</dl>
</div></blockquote>
<p>Following is a non-normative example of an error response:</p>
<div class="highlight-python"><pre>HTTP/1.1 400 Bad Request
Content-Type: application/json
Cache-Control: no-store

{
 "error":"invalid_operation",
 "error_description":"The value of the operation parameter must be one of client_associate, rotate_secret or client_update."
}</pre>
</div>
<p>(draft 01)</p>
</div>
<div class="section" id="client-metadata">
<span id="oauth-reg-3"></span><h3><a class="toc-backref" href="#id19">3. Client Metadata</a><a class="headerlink" href="#client-metadata" title="Permalink to this headline">¶</a></h3>
<p>Clients generally have an array of metadata associated with their
unique Client Identifier at the Authorization Server.  These can
range from human-facing display strings, such as a client name, to
items that impact the security of the protocol,</p>
<p>Extensions and profiles of this specification MAY expand this list,
but MUST at least accept all parameters on this list.  The
Authorization Server MUST ignore any additional parameters sent by
the Client that it does not understand.</p>
<dl class="glossary docutils">
<dt id="term-24">redirect_uris</dt>
<dd>REQUIRED A space-delimited list of redirect URIs.</dd>
<dt id="term-client-name-recommended-human-readable-name-of-the-client-to-be">client_name  RECOMMENDED.  Human-readable name of the Client to be</dt>
<dd>presented to the user.</dd>
<dt id="term-26">client_url</dt>
<dd>RECOMMENDED.  This field contains the URL of the homepage of the
client.</dd>
<dt id="term-27">logo_url</dt>
<dd>OPTIONAL.  A URL that references a logo for the Client
application.  If present, the server SHOULD display this image to
the end user during approval.</dd>
<dt id="term-28">contacts</dt>
<dd>OPTIONAL.  Space delimited list of email addresses for
people allowed to administer the information for this Client.
This is used by some providers to enable a web UI to modify the
Client information.</dd>
<dt id="term-29">tos_url</dt>
<dd>OPTIONAL.  URL that points to a human-readable Terms of
Service for the Client.  The Authorization Server SHOULD display
this URL to the End-User if it is given.</dd>
<dt id="term-30">token_endpoint_auth_method</dt>
<dd>OPTIONAL.  The requested authentication
type for the Token Endpoint.  The options are
&#8220;client_secret_post&#8221;, &#8220;client_secret_basic&#8221;, &#8220;client_secret_jwt&#8221;,
and &#8220;private_key_jwt&#8221;.  Other Authentication methods may be
defined by extension.  If unspecified or omitted, the default is
&#8220;client_secret_basic&#8221; HTTP Basic Authentication Scheme as
specified in Section 2.3.1 of OAuth 2.0 [OAuth2.0]. [[ this list
of terms needs to be expanded and fully defined, especially in
reference to signed-jwt client authentication ]]</dd>
<dt id="term-31">policy_url</dt>
<dd>OPTIONAL.  A URL location that the Client provides to the
End-User to read about the how the profile data will be used.  The
Authorization Server SHOULD display this URL to the End-User if it
is given.</dd>
<dt id="term-32">jwk_url</dt>
<dd>OPTIONAL.  URL for the Client&#8217;s JSON Web Key [JWK] document
that is used for signing Token Endpoint Requests.  If
jwk_encryption_url is not provided, the key at jwk_url is also
used as the key to encrypt responses to the Client.  If the Client
registers both &#8220;x509_url&#8221; and &#8220;jwk_url&#8221;, the keys contained in
both formats MUST be the same.</dd>
<dt id="term-33">jwk_encryption_url</dt>
<dd>OPTIONAL.  URL for the Client&#8217;s JSON Web Key
[JWK] that is used to encrypt any responses to the Client.  If the
Client registers both &#8220;jwk_encryption_url&#8221; and
&#8220;x509_encryption_url&#8221;, the keys contained in both formats MUST be
the same.</dd>
<dt id="term-34">x509_url</dt>
<dd>OPTIONAL.  URL for the Client&#8217;s PEM encoded X.509
Certificate or Certificate chain that is used for signing Token
Endpoint Requests.  If &#8220;x509_encryption_url&#8221; is not provided,
&#8220;x509_url&#8221; it is also used to encrypt responses to the Client.  If
the Client registers both &#8220;x509_url&#8221; and &#8220;jwk_url&#8221;, the keys
contained in both formats MUST be the same.</dd>
<dt id="term-35">x509_encryption_url</dt>
<dd>OPTIONAL.  URL for the Client&#8217;s PEM encoded
X.509 Certificate or Certificate chain that is used to encrypt the
ID Token and User Info Endpoint Responses to the Client.  If the
Client registers both &#8220;jwk_encryption_url&#8221; and
&#8220;x509_encryption_url&#8221;, the keys contained in both formats SHOULD
be the same.</dd>
<dt id="term-36">require_signed_request_object</dt>
<dd>OPTIONAL.  The JWS [JWS] &#8220;alg&#8221;
algorithm [JWA] that MUST be required by the Authorization Server.
The valid values are listed in Section 3.1 of JWA [JWA].  Servers
SHOULD support &#8220;RS256&#8221;.</dd>
<dt id="term-37">default_max_age</dt>
<dd>OPTIONAL. (default max authentication age): Type:
Integer - Specifies that the End-User must be actively
authenticated if any present authentication is older than the
specified number of seconds.  (The &#8220;max_age&#8221; request parameter
corresponds to the OpenID 2.0 PAPE &#8220;max_auth_age&#8221; request
parameter.)  The &#8220;max_age&#8221; claim in the request object overrides
this default value.</dd>
<dt id="term-38">default_acr</dt>
<dd>OPTIONAL. (default authentication context class
reference): Type: String - Specifies the default value that the
Authorization server must use for processing requests from this
client.  The &#8220;acrs_supported&#8221; element of discovery contains a list
of the supported &#8220;acr&#8221; values for this server.  The &#8220;acr&#8221; claim in
the request object overrides this default value.</dd>
</dl>
<p>(draft 01)</p>
</div>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="oauth_mac.html">HTTP Authentication: MAC Access Authentication</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="oauth_introspect.html">OAuth Token Introspection</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2011, HDKNR.COM.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>