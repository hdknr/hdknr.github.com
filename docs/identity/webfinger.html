

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>WebFinger &mdash; identity 1.0 documentation</title>
    
    <link rel="stylesheet" href="static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    <link rel="stylesheet" href="static/openid.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
    <link rel="top" title="identity 1.0 documentation" href="index.html" />
    <link rel="next" title="Simple Web Discovery (SWD)" href="swd.html" />
    <link rel="prev" title="Use Cases and Requirements for JSON Object Signing and Encryption (JOSE)" href="jose_usecase.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="index.html">
          <span>identity 1.0 documentation</span></a></h1>
        <h2 class="heading"><span>WebFinger</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="jose_usecase.html">Use Cases and Requirements for JSON Object Signing and Encryption (JOSE)</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="swd.html">Simple Web Discovery (SWD)</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="webfinger">
<h1>WebFinger<a class="headerlink" href="#webfinger" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="webfinger-internet-draft">
<p class="topic-title first">WebFinger Internet Draft</p>
<ul class="simple">
<li><a class="reference internal" href="#abstract" id="id2">Abstract</a></li>
<li><a class="reference internal" href="#introduction" id="id3">1. Introduction</a></li>
<li><a class="reference internal" href="#terminology" id="id4">2. Terminology</a></li>
<li><a class="reference internal" href="#example-uses-of-webfinger" id="id5">3. Example Uses of WebFinger</a><ul>
<li><a class="reference internal" href="#locating-a-user-s-blog" id="id6">3.1. Locating a User&#8217;s Blog</a></li>
<li><a class="reference internal" href="#webfinger-3-2" id="id7">3.2. Identity Provider Discovery for OpenID Connect</a></li>
<li><a class="reference internal" href="#auto-configuration-of-email-clients" id="id8">3.3. Auto-Configuration of Email Clients</a></li>
<li><a class="reference internal" href="#retrieving-device-information" id="id9">3.4. Retrieving Device Information</a></li>
</ul>
</li>
<li><a class="reference internal" href="#webfinger-protocol" id="id10">4. WebFinger Protocol</a><ul>
<li><a class="reference internal" href="#constructing-a-webfinger-request-uri" id="id11">4.1. Constructing a WebFinger Request URI</a></li>
<li><a class="reference internal" href="#performing-a-webfinger-query" id="id12">4.2. Performing a WebFinger Query</a></li>
<li><a class="reference internal" href="#the-rel-parameter" id="id13">4.3. The &#8220;rel&#8221; Parameter</a></li>
<li><a class="reference internal" href="#the-json-resource-descriptor-jrd" id="id14">4.4. The JSON Resource Descriptor (JRD)</a><ul>
<li><a class="reference internal" href="#subject" id="id15">4.4.1. subject</a></li>
<li><a class="reference internal" href="#aliases" id="id16">4.4.2. aliases</a></li>
<li><a class="reference internal" href="#properties" id="id17">4.4.3. properties</a></li>
<li><a class="reference internal" href="#links" id="id18">4.4.4. links</a><ul>
<li><a class="reference internal" href="#rel" id="id19">4.4.4.1. rel</a></li>
<li><a class="reference internal" href="#type" id="id20">4.4.4.2. type</a></li>
<li><a class="reference internal" href="#href" id="id21">4.4.4.3. href</a></li>
<li><a class="reference internal" href="#titles" id="id22">4.4.4.4. titles</a></li>
<li><a class="reference internal" href="#webfinger-4-4-4-5" id="id23">4.4.4.5. properties</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#webfinger-and-uris" id="id24">4.5. WebFinger and URIs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cross-origin-resource-sharing-cors" id="id25">5. Cross-Origin Resource Sharing (CORS)</a></li>
<li><a class="reference internal" href="#access-control" id="id26">6. Access Control</a></li>
<li><a class="reference internal" href="#hosted-webfinger-services" id="id27">7. Hosted WebFinger Services</a></li>
<li><a class="reference internal" href="#security-considerations" id="id28">8. Security Considerations</a></li>
<li><a class="reference internal" href="#controlling-access-to-information" id="id29">9. Controlling Access to Information</a></li>
<li><a class="reference internal" href="#references" id="id30">11. References</a><ul>
<li><a class="reference internal" href="#normative-references" id="id31">11.1. Normative References</a></li>
<li><a class="reference internal" href="#informative-references" id="id32">11.2. Informative References</a></li>
</ul>
</li>
</ul>
</div>
<ul class="simple">
<li>Internet Draft 08</li>
<li><a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12</a></li>
</ul>
<div class="section" id="abstract">
<span id="webfinger-abstract"></span><h2><a class="toc-backref" href="#id2">Abstract</a><a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h2>
<p>This specification defines the WebFinger protocol,
which can be used to discover information about people
or other entities on the Internet using standard HTTP methods.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ol class="last arabic simple">
<li>About People</li>
<li>About Objects</li>
</ol>
</div>
<p>(Internet Draft 08)</p>
</div>
<div class="section" id="introduction">
<span id="webfinger-1"></span><h2><a class="toc-backref" href="#id3">1. Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>WebFinger is used to discover information about <strong>people</strong> or
<strong>other entities</strong> on the Internet
that are identified by a URI <a class="reference internal" href="#term-5"><em class="xref std std-term">[6]</em></a> or IRI <a class="reference internal" href="#term-6"><em class="xref std std-term">[7]</em></a>
using standard Hypertext Transfer Protocol (HTTP) <a class="reference internal" href="#term-1"><em class="xref std std-term">[2]</em></a> methods
over a secure transport <a class="reference internal" href="#term-13"><em class="xref std std-term">[14]</em></a>.</p>
<p>A WebFinger server returns a JavaScript Object Notation (JSON) <a class="reference internal" href="#term-4"><em class="xref std std-term">[5]</em></a> object
that describes a resource that is queried.
The JSON object is referred to as the JSON Resource Descriptor (JRD).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>JWD というJSONを返します</li>
</ul>
</div>
<p>For a person,
the kinds of information that might be discoverable via WebFinger
include a
personal profile address,
identity service,
telephone number, or preferred avatar.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>人に大しては個人属性を返します</li>
</ul>
</div>
<p>For other entities on the Internet,
a WebFinger server might return JRDs
containing <em class="xref std std-term">link relations</em> that allow a client to discover,
for example,
the amount of toner in a printer
or the physical location of a server.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>物に関しては、リンクリレーションを返します。
(サーバーの場所とか)</li>
</ul>
</div>
<p>Information returned via WebFinger might be for direct human consumption
(e.g., looking up someone&#8217;s phone number),
or it might be used by systems to help carry out some operation
(e.g., facilitate logging into a web site by determining a user&#8217;s identity service).</p>
<p>Use of WebFinger is illustrated in the examples in <a class="reference internal" href="#webfinger-3"><em>Section 3</em></a> and
described more formally in <a class="reference internal" href="#webfinger-4"><em>Section 4</em></a>.</p>
<p>(Draft 08)</p>
</div>
<div class="section" id="terminology">
<span id="webfinger-2"></span><h2><a class="toc-backref" href="#id4">2. Terminology</a><a class="headerlink" href="#terminology" title="Permalink to this headline">¶</a></h2>
<p>The key words &#8220;MUST&#8221;, &#8220;MUST NOT&#8221;, &#8220;REQUIRED&#8221;, &#8220;SHALL&#8221;, &#8220;SHALL NOT&#8221;,
&#8220;SHOULD&#8221;, &#8220;SHOULD NOT&#8221;, &#8220;RECOMMENDED&#8221;, &#8220;MAY&#8221;, and &#8220;OPTIONAL&#8221; in this
document are to be interpreted as described in RFC 2119 [1].</p>
<p>WebFinger makes heavy use of &#8220;<em class="xref std std-term">Link Relations</em>&#8221;.</p>
<p>Briefly, a <em class="xref std std-term">Link Relation</em> is an <strong>attribute</strong> and <strong>value</strong> pair
used on the Internet wherein
the <strong>attribute</strong> identifies the <strong>type of link</strong> to which the associated value refers.</p>
<p>In HTTP and Web Linking <a class="reference internal" href="#term-3"><em class="xref std std-term">[4]</em></a>,
the attribute is a &#8220;<strong>rel</strong>&#8221; and the value is an &#8220;<strong>href</strong>&#8221;.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<div class="last highlight-html"><div class="highlight"><pre><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;default.css&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</div>
<p>WebFinger also uses the &#8220;<strong>rel</strong>&#8221; attribute,
where the &#8220;rel&#8221; value is either a single IANA-registered link relation type <a class="reference internal" href="#term-9"><em class="xref std std-term">[10]</em></a> or a URI <a class="reference internal" href="#term-5"><em class="xref std std-term">[6]</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>JSON(JRD)の中でも <strong>rel</strong> を使うと言う事</li>
</ul>
</div>
<p>(Internet Draft 08)</p>
</div>
<div class="section" id="example-uses-of-webfinger">
<span id="webfinger-3"></span><h2><a class="toc-backref" href="#id5">3. Example Uses of WebFinger</a><a class="headerlink" href="#example-uses-of-webfinger" title="Permalink to this headline">¶</a></h2>
<p>This non-normative section shows a few sample uses of WebFinger.</p>
<p>( draft 12 , <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-2">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-2</a> )</p>
<div class="section" id="locating-a-user-s-blog">
<span id="webfinger-3-1"></span><h3><a class="toc-backref" href="#id6">3.1. Locating a User&#8217;s Blog</a><a class="headerlink" href="#locating-a-user-s-blog" title="Permalink to this headline">¶</a></h3>
<p>Assume you receive an email from Bob and
he refers to something he posted on his blog,
but you do not know where Bob&#8217;s blog is located.</p>
<p>It would be simple to discover the address of Bob&#8217;s blog
if he made that information available via WebFinger.</p>
<p>Assume your email client can discover the blog for you.
After receiving the message from Bob (<a class="reference external" href="mailto:bob&#37;&#52;&#48;example&#46;com">bob<span>&#64;</span>example<span>&#46;</span>com</a>),
your email client performs a WebFinger query
either automatically or at your command.</p>
<p>It does so by issuing the following HTTPS <a class="reference internal" href="#term-13"><em class="xref std std-term">[14]</em></a> query to example.com:</p>
<dl class="docutils">
<dt>::</dt>
<dd><dl class="first docutils">
<dt>GET /.well-known/webfinger?</dt>
<dd>resource=acct%3Abob%40example.com HTTP/1.1</dd>
</dl>
<p class="last">Host: example.com</p>
</dd>
</dl>
<p>The server might then respond with a message like this:</p>
<div class="highlight-python"><pre>HTTP/1.1 200 OK
Access-Control-Allow-Origin: *
Content-Type: application/jrd+json

{
  "subject" : "acct:bob@example.com",
  "aliases" :
  [
    "http://www.example.com/~bob/"
  ],
  "properties" :
  {
      "http://example.com/ns/role/" : "employee"
  },
  "links" :
  [
    {
      "rel" : "http://webfinger.example/rel/avatar",
      "type" : "image/jpeg",
      "href" : "http://www.example.com/~bob/bob.jpg"
    },
    {
      "rel" : "http://webfinger.example/rel/profile-page",
      "href" : "http://www.example.com/~bob/"
    },
    {
      "rel" : "http://webfinger.example/rel/blog",
      "type" : "text/html",
      "href" : "http://blogs.example.com/bob/",
      "titles" :
      {
          "en-us" : "The Magical World of Bob",
          "fr" : "Le Monde Magique de Bob"
      }
    },
    {
      "rel" : "http://webfinger.example/rel/businesscard",
      "href" : "https://www.example.com/~bob/bob.vcf"
    }
  ]
}</pre>
</div>
<p>Note the assumption made in the above example is that
there is an &#8220;<em class="xref std std-term">acct</em>&#8221; URI for the given &#8220;<em class="xref std std-term">mailto</em>&#8221; URI.</p>
<p>This may not always be the case.</p>
<p>The email client would take note of the link relation
in the above <em class="xref std std-term">JRD</em> that refers to Bob&#8217;s blog.
The blog&#8217;s URI would then be presented to you
so that you could then visit his blog.
The email client might also note that
Bob has published an <strong>avatar link relation</strong>
and use that picture to represent Bob inside the email client.</p>
<p>Lastly,
the client might automatically retrieve the data located at
the URI specified by the &#8220;<strong>businesscard</strong>&#8221; link relation
(which might be a <a class="reference internal" href="glossary.html#term-vcard"><em class="xref std std-term">vcard</em></a> <a class="reference internal" href="#term-15"><em class="xref std std-term">[16]</em></a>)
to update the information about Bob in its internal address book.</p>
<p>In the above example,
an &#8220;acct&#8221; URI <a class="reference internal" href="#term-7"><em class="xref std std-term">[8]</em></a> is used in the query,
though any valid alias for the user might also be used.
See <a class="reference internal" href="#webfinger-4-5"><em>Section 4.5</em></a> for more information on WebFinger and URIs.</p>
<p>An <strong>alias</strong> is a URI that is different from the &#8220;subject&#8221; URI,
yet identifies the same entity.
In the above example,
there is one &#8220;http&#8221; alias returned,
though there might have been more than one.
Had the &#8220;http:&#8221; URI shown as an alias been used to query for
information about Bob,
the query would have appeared as:</p>
<div class="highlight-python"><pre>GET /.well-known/webfinger?
         resource=http%3A%2F%2Fwww.example.com%2F~bob%2F HTTP/1.1
Host: www.example.com</pre>
</div>
<p>Note that the host queried in this example is different than for the acct URI example,
since the URI refers to a different host.
Either this host would provide a response,
or it would redirect the client to another host
(e.g., redirect back to example.com).
Either way,
the response would have been substantially the same,
with the subject and alias information changed as necessary.</p>
<p>( draft 12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-3.1">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-3.1</a> )</p>
</div>
<div class="section" id="webfinger-3-2">
<span id="identity-provider-discovery-for-openid-connect"></span><h3><a class="toc-backref" href="#id7">3.2. Identity Provider Discovery for OpenID Connect</a><a class="headerlink" href="#webfinger-3-2" title="Permalink to this headline">¶</a></h3>
<p>Suppose Carol wishes to authenticate with a web site she visits
using OpenID Connect <a class="reference internal" href="#term-17"><em class="xref std std-term">[18]</em></a>.
She would provide the web site with her OpenID Connect identifier,
say <a class="reference external" href="mailto:carol&#37;&#52;&#48;example&#46;com">carol<span>&#64;</span>example<span>&#46;</span>com</a>.
The visited web site would perform a WebFinger query
looking for the <em class="xref std std-term">OpenID Connect Provider</em>.</p>
<p>Since the site is interested in only one particular link relation,
the WebFinger resource might utilize the &#8220;rel&#8221; parameter
as described in <a class="reference internal" href="#webfinger-4-3"><em>Section 4.3</em></a>:</p>
<div class="highlight-python"><pre>GET /.well-known/webfinger?
       resource=acct%3Acarol%40example.com&amp;
       rel=http%3A%2F%2Fopenid.net%2Fspecs%2Fconnect%2F1.0%2Fissuer
       HTTP/1.1
Host: example.com</pre>
</div>
<p>The server might respond like this:</p>
<div class="highlight-python"><pre>HTTP/1.1 200 OK
Access-Control-Allow-Origin: *
Content-Type: application/jrd+json

{
  "subject" : "acct:carol@example.com",
  "links" :
  [
    {
      "rel" : "http://openid.net/specs/connect/1.0/issuer",
      "href" : "https://openid.example.com"
    }
  ]
}</pre>
</div>
<p>Since the &#8220;rel&#8221; parameter only serves to filter the link relations
returned by the resource,
other name/value pairs in the response,
including any aliases or properties, would be returned.
Also,
since support for the &#8220;rel&#8221; parameter is not guaranteed,
the client must not assume the &#8220;links&#8221; array will contain only the requested link relation.</p>
<p>(draft 12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-3.2">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-3.2</a> )</p>
</div>
<div class="section" id="auto-configuration-of-email-clients">
<span id="webfinger-3-3"></span><h3><a class="toc-backref" href="#id8">3.3. Auto-Configuration of Email Clients</a><a class="headerlink" href="#auto-configuration-of-email-clients" title="Permalink to this headline">¶</a></h3>
<p>WebFinger could be used to auto-provision an email client
with basic configuration data.</p>
<p>Suppose that <a class="reference external" href="mailto:sue&#37;&#52;&#48;example&#46;com">sue<span>&#64;</span>example<span>&#46;</span>com</a> wants to configure her email client.
Her email client might issue the following query:</p>
<div class="highlight-python"><pre>GET /.well-known/webfinger?
         resource=mailto%3Asue%40example.com HTTP/1.1
Host: example.com</pre>
</div>
<p>The returned resource representation would contain entries
for the various protocols, transport options, and security options.
If there are multiple options,
the resource representation might include a link relation
for each of the valid options,
and the client or Sue might select which option to choose.
Since JRDs list link relations in a specific order,
then the most-preferred choices could be presented first.</p>
<p>Consider this response:</p>
<div class="highlight-python"><pre>HTTP/1.1 200 OK
Access-Control-Allow-Origin: *
Content-Type: application/jrd+json

{
  "subject" : "mailto:sue@example.com",
  "links" :
  [
    {
      "rel" : "http://webfinger.example/rel/smtp-server",
      "properties" :
      {
        "http://webfinger.example/email/host" : "smtp.example.com",
        "http://webfinger.example/email/port" : "587",
        "http://webfinger.example/email/login-required" : "yes",
        "http://webfinger.example/email/transport" : "starttls"
      }
    },
    {
      "rel" : "http://webfinger.example/rel/imap-server",
      "properties" :
      {
        "http://webfinger.example/email/host" : "imap.example.com",
        "http://webfinger.example/email/port" : "993",
        "http://webfinger.example/email/transport" : "ssl"
      }
    }
  ]
}</pre>
</div>
<p>In this example,
you can see that the WebFinger resource representation advertises
an SMTP service and an IMAP service.</p>
<p>In this example,
the &#8220;href&#8221; entries associated with the link relation are absent.
This is valid when there is no additional reference that needs to be made.</p>
<p>( draft 12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-3.3">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-3.3</a> )</p>
</div>
<div class="section" id="retrieving-device-information">
<span id="webfinger-3-4"></span><h3><a class="toc-backref" href="#id9">3.4. Retrieving Device Information</a><a class="headerlink" href="#retrieving-device-information" title="Permalink to this headline">¶</a></h3>
<p>As another example,
suppose there are printers on the network and
you would like to check the current toner level
for a particular printer identified via the URI device:p1.example.com.</p>
<p>While the &#8220;device&#8221; URI scheme is not presently specified,
we use it here for illustrative purposes.</p>
<p>Following the procedures similar to those above,
a query may be issued to get link relations
specific to this URI like this:</p>
<div class="highlight-python"><pre>GET /.well-known/webfinger?
                  resource=device%3Ap1.example.com HTTP/1.1
Host: p1.example.com</pre>
</div>
<p>The link relations that are returned for a device
may be quite different than those for user accounts.</p>
<p>Perhaps we may see a response like this:</p>
<div class="highlight-python"><pre>HTTP/1.1 200 OK
Access-Control-Allow-Origin: *
Content-Type: application/jrd+json

{
  "subject" : "device:p1.example.com",
  "links" :
  [
    {
      "rel" : "http://webfinger.example/rel/tipsi",
      "href" : "http://192.168.1.5/npap/"
    }
  ]
}</pre>
</div>
<p>While this example is fictitious,
you can imagine that perhaps the Transport Independent,
Printer/System Interface <a class="reference internal" href="#term-16"><em class="xref std std-term">[17]</em></a> may be enhanced with a web interface enabling a device
that understands the TIP/SI web interface specification
to query the printer for toner levels.</p>
<p>(draft 12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-3.4">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-3.4</a> )</p>
</div>
</div>
<div class="section" id="webfinger-protocol">
<span id="webfinger-4"></span><h2><a class="toc-backref" href="#id10">4. WebFinger Protocol</a><a class="headerlink" href="#webfinger-protocol" title="Permalink to this headline">¶</a></h2>
<p>A WebFinger resource is a well-known URI <a class="reference internal" href="#term-2"><em class="xref std std-term">[3]</em></a>
using the HTTPS scheme.
WebFinger resources MUST NOT be served with any other URI scheme (such as HTTP).</p>
<p>A WebFinger resource is always given a query target,
which is another URI that identifies the entity whose information is sought.
GET requests to a WebFinger resource convey the query target
in the &#8220;resource&#8221; parameter in the WebFinger URI&#8217;s query string;
see <a class="reference internal" href="#webfinger-4-1"><em>Section 4.1</em></a> for details.</p>
<p>The WebFinger resource returns a JSON Resource Descriptor (JRD)
as the resource representation to convey information
about an entity on the Internet.
Also, the Cross-Origin Resource Sharing (CORS) <a class="reference internal" href="#term-8"><em class="xref std std-term">[9]</em></a>
specification is utilized to facilitate queries made via a web browser.</p>
<p>(draft 12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4</a> )</p>
<div class="section" id="constructing-a-webfinger-request-uri">
<span id="webfinger-4-1"></span><h3><a class="toc-backref" href="#id11">4.1. Constructing a WebFinger Request URI</a><a class="headerlink" href="#constructing-a-webfinger-request-uri" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>This specification defines parameters that can be passed from the
client to the WebFinger resource when issuing a request.  These
parameters, &#8220;resource&#8221; and &#8220;rel&#8221;, and the parameter values are
included in the query component of the URI (see Section 3.4 of RFC
3986).  To construct the query component, the client performs the
following steps.  First, each parameter value is percent-encoded, as
per Section 2.1 of RFC 3986.  The encoding is done to conform to the
query production in Section 3.4 of that specification, with the
addition that any instances of the &#8220;=&#8221; and &#8220;&amp;&#8221; characters within the
parameter values are also percent-encoded.  Next, the client
constructs a string to be placed in the query component by
concatenating the name of the first parameter together with an equal
sign (&#8220;=&#8221;) and the percent-encoded parameter value.  For any
subsequent parameters, the client appends an ampersand (&#8220;&amp;&#8221;) to the
string, the name of the next parameter, an equal sign, and the
parameter value.  The client MUST NOT insert any spaces while
constructing the string.  The order in which the client places each
attribute-and-value pair within the query component does not matter
in the interpretation of the query component.</div></blockquote>
<p>(draft 12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.1">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.1</a> )</p>
</div>
<div class="section" id="performing-a-webfinger-query">
<span id="webfinger-4-2"></span><h3><a class="toc-backref" href="#id12">4.2. Performing a WebFinger Query</a><a class="headerlink" href="#performing-a-webfinger-query" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>A WebFinger client issues a query to the well-known [3] resource
identified by the URI whose path component begins with &#8220;/.well-
known/webfinger&#8221; and whose query component MUST include the
&#8220;resource&#8221; parameter exactly once and set to the value of the URI for
which information is being sought.  If the &#8220;resource&#8221; parameter is
absent or malformed, the WebFinger resource MUST indicate that the
request is bad as per Section 10.4.1 of RFC 2616 [2].</p>
<p>A client MUST query the WebFinger resource using HTTPS only.  If the
client determines that the resource has an invalid certificate, the
resource returns a 4xx or 5xx status code, or the HTTPS connection
cannot be established for any reason, then the client MUST accept
that the WebFinger query has failed and MUST NOT attempt to reissue
the WebFinger request using HTTP over a non-secure connection.</p>
<p>A WebFinger resource MUST return a JRD as the representation for the
resource if the client requests no other supported format explicitly
via the HTTP &#8220;Accept&#8221; header.  The client MAY include the &#8220;Accept&#8221;
header to indicate a desired representation; representations other
than JRD might be defined in future specifications.  The WebFinger
resource MUST silently ignore any requested representations that it
does not understand and support.  The media type used for the JSON
Resource Descriptor (JRD) is &#8220;application/jrd+json&#8221; (see Section
9.2).</p>
</div></blockquote>
<p>Jones, et al.         Expires September 28, 2013                [Page 9]</p>
<p>Internet-Draft                WebFinger                       March 2013</p>
<blockquote>
<div><p>A WebFinger resource MAY redirect the client; if it does, the
redirection MUST only be to an &#8220;https&#8221; URI.</p>
<p>A WebFinger resource can include cache validators in a response to
enable conditional requests by the client and/or expiration times as
per Section 13 of RFC 2616.</p>
</div></blockquote>
<p>(draft 12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.2">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.2</a> )</p>
</div>
<div class="section" id="the-rel-parameter">
<span id="webfinger-4-3"></span><h3><a class="toc-backref" href="#id13">4.3. The &#8220;rel&#8221; Parameter</a><a class="headerlink" href="#the-rel-parameter" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>When issuing a request to a WebFinger resource, the client MAY
utilize the &#8220;rel&#8221; parameter to request only a subset of the
information that would otherwise be returned without the &#8220;rel&#8221;
parameter.  When the &#8220;rel&#8221; parameter is used and accepted, only the
link relation types that match the link relation types provided via
the &#8220;rel&#8221; parameter are included in the array of links returned in
the JRD.  If there are no matching link relation types defined for
the resource, the &#8220;links&#8221; array in the JRD will either be absent or
empty.  All other information present in a resource descriptor
remains present, even when &#8220;rel&#8221; is employed.</p>
<p>The &#8220;rel&#8221; parameter MAY be included multiple times in order to
request multiple link relation types.</p>
<p>The purpose of the &#8220;rel&#8221; parameter is to return a subset of &#8220;link
relation objects&#8221; (see Section 4.4.4) that would otherwise be
returned in the resource descriptor.  Use of the parameter might
reduce processing requirements on either the client or server, and it
might also reduce the bandwidth required to convey the partial
resource descriptor, especially if there are numerous link relation
values to convey for a given &#8220;resource&#8221; value.</p>
<p>WebFinger resources SHOULD support the &#8220;rel&#8221; parameter.  If the
resource does not support the &#8220;rel&#8221; parameter, it MUST ignore the
parameter and process the request as if no &#8220;rel&#8221; parameter values
were present.</p>
<p>The following example presents the same example as found in Section
3.1, but uses the &#8220;rel&#8221; parameter to select two link relations:</p>
<blockquote>
<div><dl class="docutils">
<dt>GET /.well-known/webfinger?</dt>
<dd>resource=acct%3Abob%40example.com&amp;
rel=http%3A%2F%2Fwebfinger.example%2Frel%2Fprofile-page&amp;
rel=http://webfinger.example/rel/businesscard HTTP/1.1</dd>
</dl>
<p>Host: example.com</p>
</div></blockquote>
<p>In this example, the client requests the link relations of type
&#8220;<a class="reference external" href="http://webfinger.example/rel/profile-page">http://webfinger.example/rel/profile-page</a>&#8221; and
&#8220;<a class="reference external" href="http://webfinger.example/rel/businesscard">http://webfinger.example/rel/businesscard</a>&#8221;.  The server then
responds with a message like this:</p>
</div></blockquote>
<p>Jones, et al.         Expires September 28, 2013               [Page 10]</p>
<p>Internet-Draft                WebFinger                       March 2013</p>
<blockquote>
<div><blockquote>
<div><p>HTTP/1.1 200 OK
Access-Control-Allow-Origin: *
Content-Type: application/jrd+json</p>
<dl class="docutils">
<dt>{</dt>
<dd><p class="first">&#8220;subject&#8221; : &#8220;acct:bob&#64;example.com&#8221;,
&#8220;aliases&#8221; :
[</p>
<blockquote>
<div>&#8220;<a class="reference external" href="http://www.example.com/~bob/">http://www.example.com/~bob/</a>&#8220;</div></blockquote>
<p>],
&#8220;properties&#8221; :
{</p>
<blockquote>
<div>&#8220;<a class="reference external" href="http://example.com/ns/role/">http://example.com/ns/role/</a>&#8221; : &#8220;employee&#8221;</div></blockquote>
<p>},
&#8220;links&#8221; :
[</p>
<blockquote>
<div><dl class="docutils">
<dt>{</dt>
<dd>&#8220;rel&#8221; : &#8220;<a class="reference external" href="http://webfinger.example/rel/profile-page">http://webfinger.example/rel/profile-page</a>&#8221;,
&#8220;href&#8221; : &#8220;<a class="reference external" href="http://www.example.com/~bob/">http://www.example.com/~bob/</a>&#8220;</dd>
</dl>
<p>},
{</p>
<blockquote>
<div>&#8220;rel&#8221; : &#8220;<a class="reference external" href="http://webfinger.example/rel/businesscard">http://webfinger.example/rel/businesscard</a>&#8221;,
&#8220;href&#8221; : &#8220;<a class="reference external" href="http://www.example.com/~bob/bob.vcf">http://www.example.com/~bob/bob.vcf</a>&#8220;</div></blockquote>
<p>}</p>
</div></blockquote>
<p class="last">]</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>As you can see in the response, the resource representation contains
only the link relations requested by the client, but the other parts
of the JRD are still present.</p>
</div></blockquote>
<p>(draft 12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.3">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.3</a> )</p>
</div>
<div class="section" id="the-json-resource-descriptor-jrd">
<span id="webfinger-4-4"></span><h3><a class="toc-backref" href="#id14">4.4. The JSON Resource Descriptor (JRD)</a><a class="headerlink" href="#the-json-resource-descriptor-jrd" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>The JSON Resource Descriptor (JRD), originally introduced in RFC 6415
[19] and based on the Extensible Resource Descriptor (XRD) format
[20], is a JSON object that comprises the following name/value pairs:</p>
<blockquote>
<div>o subject
o aliases
o properties
o links</div></blockquote>
<p>The member &#8220;subject&#8221; is a name/value pair whose value is a string,
&#8220;aliases&#8221; is an array of strings, &#8220;properties&#8221; is an object
comprising name/value pairs whose values are strings, and &#8220;links&#8221; is
an array of objects that contain link relation information.</p>
<p>When processing a JRD, the client MUST ignore any unknown member and
not treat the presence of an unknown member as an error.</p>
</div></blockquote>
<p>Jones, et al.         Expires September 28, 2013               [Page 11]</p>
<p>Internet-Draft                WebFinger                       March 2013</p>
<blockquote>
<div>Below, each of these members of the JRD is described in more detail.</div></blockquote>
<p>(draft 12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.4">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.4</a> )</p>
<div class="section" id="subject">
<span id="webfinger-4-4-1"></span><h4><a class="toc-backref" href="#id15">4.4.1. subject</a><a class="headerlink" href="#subject" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>The value of the &#8220;subject&#8221; member is a URI that identifies the entity
that the JRD describes.</p>
<p>The &#8220;subject&#8221; value returned by a WebFinger resource MAY differ from
the value of the &#8220;resource&#8221; parameter used in the client&#8217;s request.
This might happen, for example, when the subject&#8217;s identity changes
(e.g., a user moves his or her account to another service) or when
the resource prefers to express URIs in canonical form.</p>
<p>The &#8220;subject&#8221; member MUST be present in the JRD.</p>
</div></blockquote>
<p>(draft12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.4.1">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.4.1</a> )</p>
</div>
<div class="section" id="aliases">
<span id="webfinger-4-4-2"></span><h4><a class="toc-backref" href="#id16">4.4.2. aliases</a><a class="headerlink" href="#aliases" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>The &#8220;aliases&#8221; array is an array of zero or more URI strings that
identify the same entity as the &#8220;subject&#8221; URI. Each URI must be an
absolute URI.</p>
<p>The &#8220;aliases&#8221; array is OPTIONAL in the JRD.</p>
</div></blockquote>
<p>(draft 12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.4.2">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.4.2</a> )</p>
</div>
<div class="section" id="properties">
<span id="webfinger-4-4-3"></span><h4><a class="toc-backref" href="#id17">4.4.3. properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>The &#8220;properties&#8221; object comprises zero or more name/value pairs whose
names are absolute URIs and whose values are strings or null.
Properties are used to convey additional information about the
subject of the JRD.  As an example, consider this use of
&#8220;properties&#8221;:</p>
<blockquote>
<div>&#8220;properties&#8221; : { &#8220;<a class="reference external" href="http://webfinger.example/ns/name">http://webfinger.example/ns/name</a>&#8221; : &#8220;Bob Smith&#8221; }</div></blockquote>
<p>The &#8220;properties&#8221; member is OPTIONAL in the JRD.</p>
</div></blockquote>
<p>(draft 12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.4.3">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.4.3</a> )</p>
</div>
<div class="section" id="links">
<span id="webfinger-4-4-4"></span><h4><a class="toc-backref" href="#id18">4.4.4. links</a><a class="headerlink" href="#links" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>The &#8220;links&#8221; array has any number of member objects, each of which
represents a link [4]. Each of these link objects can have the
following members:</p>
<blockquote>
<div>o rel
o type
o href
o titles
o properties</div></blockquote>
</div></blockquote>
<p>Jones, et al.         Expires September 28, 2013               [Page 12]</p>
<p>Internet-Draft                WebFinger                       March 2013</p>
<blockquote>
<div><p>The &#8220;rel&#8221; and &#8220;href&#8221; members are strings representing the link&#8217;s
relation type and the target IRI, respectively. The context of the
link is the &#8220;subject&#8221; (see Section 4.4.1).</p>
<p>The &#8220;type&#8221; member is a string indicating what the media type of the
result of dereferencing the link ought to be.</p>
<p>The order of elements in the &#8220;links&#8221; array indicates an order of
preference.  Thus, if there are two or more link relations having the
same &#8220;rel&#8221; value, the first link relation would indicate the user&#8217;s
preferred link.</p>
<p>The &#8220;links&#8221; array is OPTIONAL in the JRD.</p>
<p>Below, each of the members of the objects found in the &#8220;links&#8221; array
is described in more detail.  Each object in the &#8220;links&#8221; array,
referred to as a &#8220;link relation object&#8221;, is completely independent
from any other object in the array; any requirement to include a
given member in the link relation object refers only to that
particular object.</p>
</div></blockquote>
<p>(draft 12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.4.4">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.4.4</a> )</p>
<div class="section" id="rel">
<span id="webfinger-4-4-4-1"></span><h5><a class="toc-backref" href="#id19">4.4.4.1. rel</a><a class="headerlink" href="#rel" title="Permalink to this headline">¶</a></h5>
<blockquote>
<div><p>The value of the &#8220;rel&#8221; member is a string that is either an absolute
URI or a registered relation type [10] (see RFC 5988 [4]).  The value
of the &#8220;rel&#8221; member MUST contain exactly one URI or registered
relation type.  The URI or registered relation type identifies the
type of the link relation.</p>
<p>The other members of the object have meaning only once the type of
link relation is understood.  In some instances, the link relation
will have associated semantics enabling the client to query for other
resources on the Internet.  In other instances, the link relation
will have associated semantics enabling the client to utilize the
other members of the link relation object without fetching additional
external resources.</p>
<p>URI link relation type values are compared using the &#8220;Simple String
Comparison&#8221; algorithm of section 6.2.1 of RFC 3986 [6].</p>
<p>The &#8220;rel&#8221; member MUST be present in the link relation object.</p>
</div></blockquote>
<p>(draft 12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.4.4.1">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.4.4.1</a> )</p>
</div>
<div class="section" id="type">
<span id="webfinger-4-4-4-2"></span><h5><a class="toc-backref" href="#id20">4.4.4.2. type</a><a class="headerlink" href="#type" title="Permalink to this headline">¶</a></h5>
<blockquote>
<div><p>The value of the &#8220;type&#8221; member is a string that indicates the media
type [11] of the target resource (see RFC 6838 [12]).</p>
<p>The &#8220;type&#8221; member is OPTIONAL in the link relation object.</p>
</div></blockquote>
<p>(draft 12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.4.4.2">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.4.4.2</a> )</p>
</div>
<div class="section" id="href">
<span id="webfinger-4-4-4-3"></span><h5><a class="toc-backref" href="#id21">4.4.4.3. href</a><a class="headerlink" href="#href" title="Permalink to this headline">¶</a></h5>
<blockquote>
<div><p>The value of the &#8220;href&#8221; member is a string that contains a URI
pointing to the target resource.</p>
<p>The &#8220;href&#8221; member is OPTIONAL in the link relation object.</p>
</div></blockquote>
<p>(draft 12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.4.4.3">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.4.4.3</a> )</p>
</div>
<div class="section" id="titles">
<span id="webfinger-4-4-4-4"></span><h5><a class="toc-backref" href="#id22">4.4.4.4. titles</a><a class="headerlink" href="#titles" title="Permalink to this headline">¶</a></h5>
<blockquote>
<div><p>The &#8220;titles&#8221; object comprises zero or more name/value pairs whose
name is a language tag [13] or the string &#8220;default&#8221;.  The string is
human-readable and describes the link relation.  More than one title
for the link relation MAY be provided for the benefit of users who
utilize the link relation and, if used, a language identifier SHOULD
be duly used as the name.  If the language is unknown or unspecified,
then the name is &#8220;default&#8221;.</p>
<p>A JRD SHOULD NOT include more than one title identified with the same
language tag (or &#8220;default&#8221;) within the link relation object.  Meaning
is undefined if a link relation object includes more than one title
named with the same language tag (or &#8220;default&#8221;), though this MUST NOT
be treated as an error.  A client MAY select whichever title or
titles it wishes to utilize.</p>
<p>Here is an example of the titles object:</p>
<blockquote>
<div><p>&#8220;titles&#8221; :
{</p>
<blockquote>
<div>&#8220;en-us&#8221; : &#8220;The Magical World of Bob&#8221;,
&#8220;fr&#8221; : &#8220;Le Monde Magique de Bob&#8221;</div></blockquote>
<p>}</p>
</div></blockquote>
<p>The &#8220;titles&#8221; member is OPTIONAL in the link relation object.</p>
</div></blockquote>
<p>(draft 12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.4.4.4">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.4.4.4</a> )</p>
</div>
<div class="section" id="webfinger-4-4-4-5">
<span id="id1"></span><h5><a class="toc-backref" href="#id23">4.4.4.5. properties</a><a class="headerlink" href="#webfinger-4-4-4-5" title="Permalink to this headline">¶</a></h5>
<blockquote>
<div><p>The &#8220;properties&#8221; object within the link relation object comprises
zero or more name/value pairs whose names are absolute URIs and whose
values are strings or null.  Properties are used to convey additional
information about the link relation.  As an example, consider this
use of &#8220;properties&#8221;:</p>
<blockquote>
<div>&#8220;properties&#8221; : { &#8220;<a class="reference external" href="http://webfinger.example/mail/port">http://webfinger.example/mail/port</a>&#8221; : &#8220;993&#8221; }</div></blockquote>
<p>The &#8220;properties&#8221; member is OPTIONAL in the link relation object.</p>
</div></blockquote>
<p>(draft 12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.4.4.5">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.4.4.5</a> )</p>
</div>
</div>
</div>
<div class="section" id="webfinger-and-uris">
<span id="webfinger-4-5"></span><h3><a class="toc-backref" href="#id24">4.5. WebFinger and URIs</a><a class="headerlink" href="#webfinger-and-uris" title="Permalink to this headline">¶</a></h3>
<p>WebFinger requests include a &#8220;resource&#8221; parameter (see <a class="reference internal" href="#webfinger-4-1"><em>Section 4.1</em></a>)
specifying the URI of an account, device, or other entity.
WebFinger is neutral regarding the scheme of such a URI:
it could be an &#8220;acct&#8221; URI <a class="reference internal" href="#term-6"><em class="xref std std-term">[7]</em></a>, an &#8220;http&#8221; or &#8220;https&#8221; URI, a
&#8220;mailto&#8221; URI <a class="reference internal" href="#term-20"><em class="xref std std-term">[21]</em></a>, or some other scheme.</p>
<p>To perform a WebFinger lookup on an account specific to the host
being queried,
use of the &#8220;<em class="xref std std-term">acct</em>&#8221; URI scheme is recommended,
since it explicitly identifies an account accessible via WebFinger.
Further,
the &#8220;acct&#8221; URI scheme is not associated with other protocols as,
by way of example,
the &#8220;mailto&#8221; URI scheme is associated with email.</p>
<p>Since not every host offers email service,
using the &#8220;mailto&#8221; URI scheme is not ideal
for identifying user accounts on all hosts.
That said,
use of the &#8220;mailto&#8221; URI scheme would be ideal for use with WebFinger
to discover mail server configuration information for a user.</p>
<p>(draft 12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.5">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-4.5</a> )</p>
</div>
</div>
<div class="section" id="cross-origin-resource-sharing-cors">
<span id="webfinger-5"></span><h2><a class="toc-backref" href="#id25">5. Cross-Origin Resource Sharing (CORS)</a><a class="headerlink" href="#cross-origin-resource-sharing-cors" title="Permalink to this headline">¶</a></h2>
<p>WebFinger resources might not be accessible from a web browser
due to &#8220;Same-Origin&#8221; policies.
The current best practice is to make resources available to browsers
through Cross-Origin Resource Sharing (<a class="reference internal" href="backplane.html#term-cors"><em class="xref std std-term">CORS</em></a>) <a class="reference internal" href="#term-8"><em class="xref std std-term">[9]</em></a>,
and servers MUST include the <em class="xref std std-term">Access-Control-Allow-Origin</em>
HTTP header in responses.
Servers SHOULD support the least restrictive setting
by allowing any domain access to the WebFinger resource:</p>
<div class="highlight-python"><pre>Access-Control-Allow-Origin: *</pre>
</div>
<p>There are cases where defaulting to the least restrictive setting is
not appropriate,
for example a server on an intranet that
provides sensitive company information SHOULD NOT allow CORS requests from any domain,
as that could allow leaking of that sensitive information.
A server that wishes to restrict access to information from external entities
SHOULD use a more restrictive <strong>Access-Control-Allow-Origin</strong> header.</p>
<p>(draft12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-5">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-5</a> )</p>
</div>
<div class="section" id="access-control">
<span id="webfinger-6"></span><h2><a class="toc-backref" href="#id26">6. Access Control</a><a class="headerlink" href="#access-control" title="Permalink to this headline">¶</a></h2>
<p>As with all web resources,
access to the WebFinger resource could require authentication.
Further,
failure to provide required credentials might result in the server
forbidding access or providing a different response
than had the client authenticated with the server.</p>
<p>Likewise,
a WebFinger resource MAY provide different responses to
different clients based on other factors,
such as whether the client is inside or outside a corporate network.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>リクエスタごとに別のディスクリプターを返してもいいよ</li>
</ul>
</div>
<p>As a concrete example,
a query performed on the internal corporate network might return
link relations to employee pictures,
whereas link relations for employee pictures might not be provided
to external entities.</p>
<p>Further,
link relations provided in a WebFinger resource representation
might point to web resources that impose access restrictions.
For example,
the aforementioned corporate server may provide
both internal and external entities with URIs to employee pictures,
but further authentication might be required in order
for the client to access the picture resources
if the request comes from outside the corporate network.</p>
<p>The decisions made with respect to what set of link relations
a WebFinger resource provides to one client versus another and
what resources require further authentication,
as well as the specific authentication mechanisms employed,
are outside the scope of this document.</p>
<p>(draft12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-6">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-6</a> )</p>
</div>
<div class="section" id="hosted-webfinger-services">
<span id="webfinger-7"></span><h2><a class="toc-backref" href="#id27">7. Hosted WebFinger Services</a><a class="headerlink" href="#hosted-webfinger-services" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>As with most services provided on the Internet, it is possible for a
domain owner to utilize &#8220;hosted&#8221; WebFinger services.  By way of
example, a domain owner might control most aspects of their domain,
but use a third-party hosting service for email.  In the case of
email, MX records identify mail servers for a domain.  An MX record
points to the mail server to which mail for the domain should be
delivered.  It does not matter to the sending mail server whether
those MX records point to a server in the destination domain or a
different domain.</p>
<p>Likewise, a domain owner might utilize the services of a third party
to provide WebFinger services on behalf of its users.  Just as a
domain owner was required to insert MX records into DNS to allow for
hosted email serves, the domain owner is required to redirect HTTP
queries to its domain to allow for hosted WebFinger services.</p>
<p>When a query is issued to the WebFinger resource, the web server MUST
return a response with a redirection status code that includes a
Location header pointing to the location of the hosted WebFinger
service URI.  This WebFinger service URI does not need to point to
the well-known WebFinger location on the hosting service provider
server.</p>
<p>As an example, assume that example.com&#8217;s WebFinger services are
hosted by wf.example.net.  Suppose a client issues a query for
acct:alice&#64;example.com like this:</p>
</div></blockquote>
<p>Jones, et al.         Expires September 28, 2013               [Page 16]</p>
<p>Internet-Draft                WebFinger                       March 2013</p>
<blockquote>
<div><blockquote>
<div><dl class="docutils">
<dt>GET /.well-known/webfinger?</dt>
<dd>resource=acct%3Aalice%40example.com HTTP/1.1</dd>
</dl>
<p>Host: example.com</p>
</div></blockquote>
<p>The server might respond with this:</p>
<blockquote>
<div><p>HTTP/1.1 307 Temporary Redirect
Access-Control-Allow-Origin: *
Location: <a class="reference external" href="https://wf.example.net/example.com/webfinger">https://wf.example.net/example.com/webfinger</a>?</p>
<blockquote>
<div>resource=acct%3Aalice%40example.com</div></blockquote>
</div></blockquote>
<p>The client can then follow the redirection, re-issuing the request to
the URI provided in the Location header.  Note that the server will
include any required URI parameters in the Location header value,
which could be different than the URI parameters the client
originally used.</p>
</div></blockquote>
<p>(draft 12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-7">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-7</a> )</p>
</div>
<div class="section" id="security-considerations">
<span id="webfinger-8"></span><h2><a class="toc-backref" href="#id28">8. Security Considerations</a><a class="headerlink" href="#security-considerations" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="controlling-access-to-information">
<span id="webfinger-9"></span><h2><a class="toc-backref" href="#id29">9. Controlling Access to Information</a><a class="headerlink" href="#controlling-access-to-information" title="Permalink to this headline">¶</a></h2>
<p>As with all web resources, access to the Host Metadata resource and
the LRDD resource MAY require authentication.  Further, failure to
provide required credentials MAY result in the server forbidding
access or providing a different response than had the client
authenticated with the server.</p>
<p>Likewise, a server MAY provide different responses to different
clients based on other factors, such as whether the client is inside
or outside a corporate network.  As a concrete example, a query
performed on the internal corporate network might return link
relations to employee pictures whereas link relations for employee
pictures might not be provided to external entities.</p>
<p>Further, link relations provided in a WebFinger server response MAY
point to web resources that impose access restrictions.  For example,
it is possible that the aforementioned corporate server may provide
both internal and external entities with URIs to employee pictures,
but further authentication MAY be required in order for the WebFinger
client to access those resources if the request comes from outside
the corporate network.</p>
<p>The decisions made with respect to what set of link relations a
WebFinger server provides to one client versus another and what
resources require further authentication, as well as the specific
authentication mechanisms employed, are outside the scope of this
document.</p>
<p>(Internet Draft 06)</p>
<ol class="arabic simple" id="webfinger-10" start="10">
<li>Implementation Notes (Non-Normative)</li>
</ol>
<p>A user should not be required to enter the &#8220;acct&#8221; URI scheme name
along with his account identifier into any WebFinger client.  Rather,
the WebFinger client should accept identifiers that are void of the
&#8220;acct:&#8221; portion of the identifier.  Composing a properly formatted
&#8220;acct&#8221; URI is the responsibility of the WebFinger client.</p>
<p>(Internet Draft 06)</p>
</div>
<div class="section" id="references">
<span id="webfinger-11"></span><h2><a class="toc-backref" href="#id30">11. References</a><a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<p>(Draft 08)</p>
<div class="section" id="normative-references">
<span id="webfinger-11-1"></span><h3><a class="toc-backref" href="#id31">11.1. Normative References</a><a class="headerlink" href="#normative-references" title="Permalink to this headline">¶</a></h3>
<dl class="glossary docutils">
<dt id="term-">[1]</dt>
<dd>Bradner, S., &#8220;Key words for use in RFCs to Indicate Requirement
Levels&#8221;, BCP 14, RFC 2119, March 1997.</dd>
<dt id="term-1">[2]</dt>
<dd>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L.,
Leach, P., and T. Berners-Lee, &#8220;Hypertext Transfer Protocol &#8211;
HTTP/1.1&#8221;, RFC 2616, June 1999.</dd>
<dt id="term-2">[3]</dt>
<dd>Nottingham, M., Hammer-Lahav, E., &#8220;Defining Well-Known Uniform
Resource Identifiers (URIs)&#8221;, RFC 5785, April 2010.</dd>
<dt id="term-3">[4]</dt>
<dd>Nottingham, M., &#8220;Web Linking&#8221;, RFC 5988, October 2010.</dd>
<dt id="term-4">[5]</dt>
<dd>Crockford, D., &#8220;The application/json Media Type for JavaScript
Object Notation (JSON)&#8221;, RFC 4627, July 2006.</dd>
<dt id="term-5">[6]</dt>
<dd>Berners-Lee, T., Fielding, R., and Masinter, L., &#8220;Uniform
Resource Identifier (URI): Generic Syntax&#8221;, STD 66, RFC 3986,
January 2005.</dd>
<dt id="term-6">[7]</dt>
<dd>Duerst, M., &#8220;Internationalized Resource Identifiers (IRIs)&#8221;,
RFC 3987, January 2005.</dd>
<dt id="term-7">[8]</dt>
<dd>Saint-Andre, P., &#8220;The &#8216;acct&#8217; URI Scheme&#8221;, draft-ietf-appsawg-
acct-uri-03, February 2013.</dd>
<dt id="term-8">[9]</dt>
<dd>Van Kesteren, A., &#8220;Cross-Origin Resource Sharing&#8221;, W3C CORS
<a class="reference external" href="http://www.w3.org/TR/cors/">http://www.w3.org/TR/cors/</a>, July 2010.</dd>
<dt id="term-9">[10]</dt>
<dd>IANA, &#8220;Link Relations&#8221;, <a class="reference external" href="http://www.iana.org/assignments/link">http://www.iana.org/assignments/link</a>-
relations/.</dd>
<dt id="term-10">[11]</dt>
<dd>IANA, &#8220;MIME Media Types&#8221;,
<a class="reference external" href="http://www.iana.org/assignments/media-types/index.html">http://www.iana.org/assignments/media-types/index.html</a>.</dd>
<dt id="term-11">[12]</dt>
<dd>Freed, N., Klensin, J., Hansen, T., &#8220;Media Type Specifications
and Registration Procedures&#8221;, RFC 6838, January 2013.</dd>
<dt id="term-12">[13]</dt>
<dd>Phillips, A., Davis, M., &#8220;Tags for Identifying Languages&#8221;, RFC
5646, January 2009.</dd>
<dt id="term-13">[14]</dt>
<dd>Rescorla, E., &#8220;HTTP Over TLS&#8221;, RFC 2818, May 2000.</dd>
<dt id="term-14">[15]</dt>
<dd>Klyne, G., Newman, C., &#8220;Date and Time on the Internet:
Timestamps&#8221;, RFC 3339, July 2002.</dd>
</dl>
<p>(draft 12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-11.1">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-11.1</a> )</p>
<table class="docutils field-list" frame="void" id="webfinger-11-2" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">orphan:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="informative-references">
<h3><a class="toc-backref" href="#id32">11.2. Informative References</a><a class="headerlink" href="#informative-references" title="Permalink to this headline">¶</a></h3>
<dl class="glossary docutils">
<dt id="term-15">[16]</dt>
<dd>1Perreault, S., &#8220;vCard Format Specification&#8221;, RFC 6350, August
2011.</dd>
<dt id="term-16">[17]</dt>
<dd>&#8220;Transport Independent, Printer/System Interface&#8221;, IEEE Std
1284.1-1997, 1997.</dd>
<dt id="term-17">[18]</dt>
<dd>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B.,
Mortimore, C., and E. Jay, &#8220;OpenID Connect Messages 1.0&#8221;,
January 2013, <a class="reference external" href="http://openid.net/specs/openid-connect-messages-1_0.html">http://openid.net/specs/openid-connect-messages-1_0.html</a>.</dd>
<dt id="term-18">[19]</dt>
<dd>Hammer-Lahav, E. and Cook, B., &#8220;Web Host Metadata&#8221;, RFC 6415,
October 2011.</dd>
<dt id="term-19">[20]</dt>
<dd>Hammer-Lahav, E. and W. Norris, &#8220;Extensible Resource Descriptor
(XRD) Version 1.0&#8221;, <a class="reference external" href="http://docs.oasis">http://docs.oasis</a>-
open.org/xri/xrd/v1.0/xrd-1.0.html.</dd>
<dt id="term-20">[21]</dt>
<dd>Duerst, M., Masinter, L., and J. Zawinski, &#8220;The &#8216;mailto&#8217; URI
Scheme&#8221;, RFC 6068, October 2010.</dd>
</dl>
<p>(draft 12, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-11.2">http://tools.ietf.org/html/draft-ietf-appsawg-webfinger-12#section-11.2</a> )</p>
</div>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="jose_usecase.html">Use Cases and Requirements for JSON Object Signing and Encryption (JOSE)</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="swd.html">Simple Web Discovery (SWD)</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2011, HDKNR.COM.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>