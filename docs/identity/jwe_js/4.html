

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>4. Example JWE-JS &mdash; identity 1.0 documentation</title>
    
    <link rel="stylesheet" href="../static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/print.css" type="text/css" />
    <link rel="stylesheet" href="../static/openid.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/underscore.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <script type="text/javascript" src="../_static/theme_extras.js"></script>
    <link rel="top" title="identity 1.0 documentation" href="../index.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="../index.html">
          <span>identity 1.0 documentation</span></a></h1>
        <h2 class="heading"><span>4. Example JWE-JS</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        <a class="uplink" href="../index.html">Contents</a>
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="example-jwe-js">
<h1>4.  Example JWE-JS<a class="headerlink" href="#example-jwe-js" title="Permalink to this headline">Â¶</a></h1>
<p>This section contains an example using the JWE JSON Serialization.
This example demonstrates the capability for encrypting the same plaintext to multiple recipients.</p>
<p>Two recipients are present in this example:
the first using the <strong>RSA-PKCS1_1.5</strong> algorithm to produce the JWE Encrypted Key
and the second using the <strong>ECDH-ES</strong> algorithm to produce the JWE Encrypted Key.</p>
<p>The Plaintext is encrypted using the <strong>AES-256-CBC</strong> algorithm to produce the JWE Ciphertext.</p>
<p>The two Decoded JWE Header Segments used are:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span><span class="s2">&quot;alg&quot;</span><span class="o">:</span><span class="s2">&quot;RSA1_5&quot;</span><span class="p">,</span>
 <span class="s2">&quot;enc&quot;</span><span class="o">:</span><span class="s2">&quot;A256CBC&quot;</span><span class="p">,</span>
 <span class="s2">&quot;int&quot;</span><span class="o">:</span><span class="s2">&quot;HS256&quot;</span><span class="p">,</span>
 <span class="s2">&quot;iv&quot;</span><span class="o">:</span><span class="s2">&quot;Mz-mW_4JHfg&quot;</span><span class="p">,</span>
 <span class="s2">&quot;x5t&quot;</span><span class="o">:</span><span class="s2">&quot;7noOPq-hJ1_hCnvWh6IeYI2w9Q0&quot;</span><span class="p">}</span>
<span class="nx">and</span><span class="o">:</span>

<span class="p">{</span><span class="s2">&quot;alg&quot;</span><span class="o">:</span><span class="s2">&quot;ECDH-ES&quot;</span><span class="p">,</span>
 <span class="s2">&quot;enc&quot;</span><span class="o">:</span><span class="s2">&quot;A256CBC&quot;</span><span class="p">,</span>
 <span class="s2">&quot;epk&quot;</span><span class="o">:</span><span class="p">{</span>
  <span class="s2">&quot;alg&quot;</span><span class="o">:</span><span class="s2">&quot;EC&quot;</span><span class="p">,</span>
  <span class="s2">&quot;crv&quot;</span><span class="o">:</span><span class="s2">&quot;P-256&quot;</span><span class="p">,</span>
  <span class="s2">&quot;x&quot;</span><span class="o">:</span><span class="s2">&quot;235RT7iKTI3KWvS4_mIwUhX6OC_X2I-bsOpS5w7MGA4&quot;</span><span class="p">,</span>
  <span class="s2">&quot;y&quot;</span><span class="o">:</span><span class="s2">&quot;ZSv0dtvXs4o2XsIVhFzgiMTSg9uSsytaOvC-XRtfoIM&quot;</span><span class="p">},</span>
 <span class="s2">&quot;jku&quot;</span><span class="o">:</span><span class="s2">&quot;https://example.com/public_key.jwk&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>The complete JSON Web Encryption JSON Serialization (JWE-JS) for these values is as follows (with line breaks for display purposes only):</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span><span class="s2">&quot;headers&quot;</span><span class="o">:</span><span class="p">[</span>
  <span class="s2">&quot;eyJhbGciOiJSU0ExXzUiLA0KICJlbmMiOiJBMjU2Q0JDIiwNCiAiaW50IjoiS</span>
<span class="s2">FMyNTYiLA0KICJpdiI6Ik16LW1XXzRKSGZnIiwNCiAieDV0IjoiN25vT1BxLWhKM</span>
<span class="s2">V9oQ252V2g2SWVZSTJ3OVEwIn0&quot;</span><span class="p">,</span>
  <span class="s2">&quot;eyJhbGciOiJFQ0RILUVTIiwNCiAiZW5jIjoiQTI1NkNCQyIsDQogImVwayI6e</span>
<span class="s2">w0KICAiYWxnIjoiRUMiLA0KICAiY3J2IjoiUC0yNTYiLA0KICAieCI6IjIzNVJUN</span>
<span class="s2">2lLVEkzS1d2UzRfbUl3VWhYNk9DX1gySS1ic09wUzV3N01HQTQiLA0KICAieSI6I</span>
<span class="s2">lpTdjBkdHZYczRvMlhzSVZoRnpnaU1UU2c5dVNzeXRhT3ZDLVhSdGZvSU0ifSwNC</span>
<span class="s2">iAiamt1IjoiaHR0cHM6Ly9leGFtcGxlLmNvbS9wdWJsaWNfa2V5Lmp3ayJ9&quot;</span><span class="p">],</span>

 <span class="s2">&quot;encrypted_keys&quot;</span><span class="o">:</span><span class="p">[</span>
  <span class="s2">&quot;TBD_encrypted_key_1_value_TBD&quot;</span><span class="p">,</span>
  <span class="s2">&quot;TBD_encrypted_key_2_value_TBD&quot;</span><span class="p">],</span>

 <span class="s2">&quot;ciphertext&quot;</span><span class="o">:</span><span class="s2">&quot;TBD_ciphertext_value_TBD&quot;</span><span class="p">,</span>
 <span class="s2">&quot;integrity_values&quot;</span><span class="o">:</span><span class="p">[</span>
  <span class="s2">&quot;TBD_integrity_1_value_TBD&quot;</span><span class="p">,</span>
  <span class="s2">&quot;TBD_integrity_2_value_TBD&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>TBD: Finish this example.</p>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        <a class="uplink" href="../index.html">Contents</a>
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2011, HDKNR.COM.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2pre/660be19d7963.
    </div>
  </body>
</html>