

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>LRDD: Link-based Resource Descriptor Discovery &mdash; identity 1.0 documentation</title>
    
    <link rel="stylesheet" href="static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    <link rel="stylesheet" href="static/openid.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
    <link rel="top" title="identity 1.0 documentation" href="index.html" />
    <link rel="next" title="Token Revocation" href="revoke.html" />
    <link rel="prev" title="Simple Web Discovery (SWD)" href="swd.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="index.html">
          <span>identity 1.0 documentation</span></a></h1>
        <h2 class="heading"><span>LRDD: Link-based Resource Descriptor Discovery</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="swd.html">Simple Web Discovery (SWD)</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="revoke.html">Token Revocation</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="lrdd-link-based-resource-descriptor-discovery">
<h1><a class="toc-backref" href="#id1">LRDD: Link-based Resource Descriptor Discovery</a><a class="headerlink" href="#lrdd-link-based-resource-descriptor-discovery" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="lrdd-expired">
<p class="topic-title first">LRDD(Expired)</p>
<ul class="simple">
<li><a class="reference internal" href="#lrdd-link-based-resource-descriptor-discovery" id="id1">LRDD: Link-based Resource Descriptor Discovery</a><ul>
<li><a class="reference internal" href="#abstract" id="id2">Abstract</a></li>
<li><a class="reference internal" href="#editorial-note-to-be-removed-by-rfc-editor" id="id3">Editorial Note (to be removed by RFC Editor)</a></li>
<li><a class="reference internal" href="#status-of-this-memo" id="id4">Status of this Memo</a></li>
<li><a class="reference internal" href="#copyright-notice" id="id5">Copyright Notice</a></li>
<li><a class="reference internal" href="#specification-status" id="id6">1.  Specification Status</a></li>
<li><a class="reference internal" href="#introduction" id="id7">2.  Introduction</a><ul>
<li><a class="reference internal" href="#example" id="id8">2.1.  Example</a></li>
<li><a class="reference internal" href="#notational-conventions" id="id9">2.2.  Notational Conventions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#link-source-priority-order" id="id10">3.  Link Source Priority Order</a></li>
<li><a class="reference internal" href="#resource-descriptor-construction" id="id11">4.  Resource Descriptor Construction</a></li>
<li><a class="reference internal" href="#link-sources" id="id12">5.  Link Sources</a><ul>
<li><a class="reference internal" href="#host-meta-document" id="id13">5.1.  host-meta Document</a></li>
<li><a class="reference internal" href="#http-response-headers" id="id14">5.2.  HTTP Response Headers</a></li>
<li><a class="reference internal" href="#document-markup" id="id15">5.3.  Document Markup</a></li>
</ul>
</li>
<li><a class="reference internal" href="#security-considerations" id="id16">6.  Security Considerations</a></li>
<li><a class="reference internal" href="#iana-considerations" id="id17">7.  IANA Considerations</a><ul>
<li><a class="reference internal" href="#the-lrdd-relation-type" id="id18">7.1.  The &#8216;lrdd&#8217; Relation Type</a></li>
</ul>
</li>
<li><a class="reference internal" href="#appendix-a-acknowledgments" id="id19">Appendix A.  Acknowledgments</a></li>
<li><a class="reference internal" href="#appendix-b-document-history" id="id20">Appendix B.  Document History</a></li>
<li><a class="reference internal" href="#references" id="id21">8.  References</a><ul>
<li><a class="reference internal" href="#normative-references" id="id22">8.1.  Normative References</a></li>
<li><a class="reference internal" href="#informative-references" id="id23">8.2.  Informative References</a></li>
</ul>
</li>
<li><a class="reference internal" href="#glossary" id="id24">Glossary</a></li>
</ul>
</li>
</ul>
</div>
<ul class="simple">
<li><a class="reference external" href="http://tools.ietf.org/id/draft-hammer-discovery-06.txt">http://tools.ietf.org/id/draft-hammer-discovery-06.txt</a></li>
<li>draft-hammer-discovery-06</li>
</ul>
<div class="section" id="abstract">
<h2><a class="toc-backref" href="#id2">Abstract</a><a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h2>
<p>LRDD (pronounced &#8216;lard&#8217;) provides a process for obtaining information
about a resource identified by a Uniform Resource Identifier (URI).</p>
<p>The &#8216;information about a resource&#8217; - a <a class="reference internal" href="#term-resource-descriptor"><em class="xref std std-term">resource descriptor</em></a> -
provides <strong>machine-readable</strong> information
that aims to increase interoperability and enhance interactions with the resource.</p>
<p>LRDD provides a narrow and well-defined set of rules for obtaining and processing
<strong>link-based descriptors</strong>
(found in multiple sources such as HTTP headers, document markup, and resource descriptors)
which are often required for security and consistent client behavior.</p>
</div>
<div class="section" id="editorial-note-to-be-removed-by-rfc-editor">
<h2><a class="toc-backref" href="#id3">Editorial Note (to be removed by RFC Editor)</a><a class="headerlink" href="#editorial-note-to-be-removed-by-rfc-editor" title="Permalink to this headline">¶</a></h2>
<p>Please discuss this draft on the <a class="reference external" href="mailto:apps-discuss&#37;&#52;&#48;ietf&#46;org">apps-discuss<span>&#64;</span>ietf<span>&#46;</span>org</a> [1] mailing list.</p>
</div>
<div class="section" id="status-of-this-memo">
<h2><a class="toc-backref" href="#id4">Status of this Memo</a><a class="headerlink" href="#status-of-this-memo" title="Permalink to this headline">¶</a></h2>
<p>This Internet-Draft is submitted in full conformance with the
provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current Internet-
Drafts is at <a class="reference external" href="http://datatracker.ietf.org/drafts/current/">http://datatracker.ietf.org/drafts/current/</a>.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any
time.  It is inappropriate to use Internet-Drafts as reference
material or to cite them other than as &#8220;work in progress.&#8221;</p>
<p>This Internet-Draft will expire on November 29, 2010.</p>
</div>
<div class="section" id="copyright-notice">
<h2><a class="toc-backref" href="#id5">Copyright Notice</a><a class="headerlink" href="#copyright-notice" title="Permalink to this headline">¶</a></h2>
<p>Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust&#8217;s Legal
Provisions Relating to IETF Documents
(<a class="reference external" href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document.  Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
</div>
<div class="section" id="specification-status">
<h2><a class="toc-backref" href="#id6">1.  Specification Status</a><a class="headerlink" href="#specification-status" title="Permalink to this headline">¶</a></h2>
<p>This specification was retired in favor of a single, simpler document.
Some of the functionality was retained merged into
[I-D.hammer-hostmeta] where future work is done.</p>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id7">2.  Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>LRDD defines a simple process for locating resource descriptors
for URI-identified resources.
<a class="reference internal" href="#term-resource-descriptors"><em class="xref std std-term">Resource descriptors</em></a> are machine-readable documents
that provide information about resources (resource metadata)
for the purposes of promoting interoperability
and assisting in interacting with unknown resources that support known interfaces.</p>
<p>For example,
a web page about an upcoming meeting can provide
in its descriptor the location of the meeting organizer&#8217;s free/busy information
to potentially negotiate a different time.
A social network profile page descriptor can identify the location of the
user&#8217;s address book as well as accounts on other sites.
A web service implementing an API with optional components can advertise
which of these are supported.</p>
<p>Given the wide range of metadata needs, no single descriptor format
or retrieval method can adequately accommodate every use case.  While
there are many methods for obtaining resource descriptors (e.g.,
links, HTTP headers, WebDAV&#8217;s PROPFIND [RFC4918], HTTP OPTIONS,
URIQA&#8217;s MGET [URIQA]), LRDD utilizes the Web Linking framework
defined in [I-D.nottingham-http-link-header].  LRDD defines a narrow
profile of Web Linking for obtaining and processing link-based
descriptors to accommodate the common discovery needs of many Web
protocols.</p>
<p>In LRDD, the resource descriptor is <strong>not a single document</strong> but the
<strong>aggregation of links</strong> obtained from three link sources
(when applicable and available).
The resource descriptor is constructed by determining the order
in which to process the three link sources and
aggregating the links and metadata contained in each source:</p>
<blockquote>
<div><ul class="simple">
<li><em class="xref std std-term">host-meta document</em> - links generated by applying the resource URI
to the link templates provided by the host&#8217;s host-meta document as
defined in [I-D.hammer-hostmeta].</li>
<li><em class="xref std std-term">HTTP response header</em> - links included in the HTTP response header
to an HTTP [RFC2616] &#8220;HEAD&#8221; or &#8220;GET&#8221; resource representation
request using the &#8220;Link&#8221; header field defined in
[I-D.nottingham-http-link-header].</li>
<li>Document markup - links included in the resource representation
markup using the &lt;LINK&gt; element.</li>
</ul>
</div></blockquote>
<p>The resource descriptor also includes additional links and metadata
obtained from LRDD documents - XRD [OASIS.XRD-1.0] documents linked
to from one of the same three sources using the &#8220;lrdd&#8221; relation type.</p>
<p>The client usually looks for a link with a specific relation type or
other metadata.  In such cases, the client does not need to construct
the entire resource descriptor, but instead, process the various
sources in their prescribed order until the desired information is
found.  While the process described in Section 4 is meant to
construct the entire resource descriptor, the client MAY stop
processing as soon as it finds the desired information.</p>
<div class="section" id="example">
<h3><a class="toc-backref" href="#id8">2.1.  Example</a><a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>In this example, an article published by a website allows readers to
post comments and provide the web address of their own blog.  The
article page includes an avatar (a photo of the reader) when
displaying comments.  The photo is obtained by performing discovery
on the web address provided by the reader, if supported by the
reader&#8217;s blog.</p>
<p>After receiving a comment from Jane which has her own blog at
&#8220;<a class="reference external" href="http://jane.example.com/blog">http://jane.example.com/blog</a>&#8221;, the website performs LRDD discovery
to try and obtain Jane&#8217;s photo.</p>
<p>First, the website determines the source priority order - the order
in which it looks for links in the various sources - for Jane&#8217;s blog
by fetching its host-meta document from
&#8220;<a class="reference external" href="https://jane.example.com/.well-known/host-meta">https://jane.example.com/.well-known/host-meta</a>&#8221;:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;</span>
<span class="nt">&lt;XRD</span> <span class="na">xmlns=</span><span class="s">&#39;http://docs.oasis-open.org/ns/xri/xrd-1.0&#39;</span>
     <span class="na">xmlns:hm=</span><span class="s">&#39;http://host-meta.net/ns/1.0&#39;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;hm:Host&gt;</span>jane.example.com<span class="nt">&lt;/hm:Host&gt;</span>
    <span class="nt">&lt;Property</span> <span class="na">type=</span><span class="s">&#39;http://lrdd.net/priority/resource&#39;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;Link</span> <span class="na">rel=</span><span class="s">&#39;lrdd&#39;</span> <span class="na">template=</span><span class="s">&#39;http://jane.example.com?lrdd={uri}&#39;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;Link</span> <span class="na">rel=</span><span class="s">&#39;contents&#39;</span> <span class="na">template=</span><span class="s">&#39;http://example.com?c={uri}&#39;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/XRD&gt;</span>
</pre></div>
</div>
<p>which indicates the blog is using Resource-priority (giving higher
priority to links provided by the resource itself over those defined
by the global host policy).  Since Jane&#8217;s blog uses Resource-
priority, the website looks for &#8220;avatar&#8221; type links in this order:
&lt;LINK&gt; elements in the blog document&#8217;s markup, HTTP Link headers in
the blog document HTTP response, and last in the host-meta document
using link templates.  Note that the &#8220;avatar&#8221; relation type is used
for illustration purposes only and at this time is not a registered
relation type.</p>
<blockquote>
<div>Figure 1</div></blockquote>
<p>To obtain a markup representation of Jane&#8217;s blog, the website makes
an HTTP &#8220;GET&#8221; request to &#8220;<a class="reference external" href="http://jane.example.com/blog">http://jane.example.com/blog</a>&#8221;:</p>
<div class="highlight-python"><pre>GET /blog HTTP/1.1
Host: jane.example.com
Accept: text/html</pre>
</div>
<p>And receives back (HTML schema simplified for display purposes):</p>
<div class="highlight-python"><pre>HTTP/1.1 200 OK
Content-Type: text/html; charset=UTF-8
Link: &lt;http://jane.example.com/author&gt;; rel='author'

&lt;HTML&gt;
  &lt;HEAD&gt;
    &lt;LINK href='http://jane.example.com/image' rel='avatar' /&gt;
  &lt;/HEAD&gt;
  &lt;BODY&gt;
    &lt;H1&gt;Jane's Blog&lt;/H1&gt;
  &lt;/BODY&gt;
&lt;/HTML&gt;</pre>
</div>
<p>The document&#8217;s HTML markup includes the desired link.
The website can fetch Jane&#8217;s photo from &#8220;<a class="reference external" href="http://jane.example.com/image">http://jane.example.com/image</a>&#8221;.</p>
<p>After obtaining Jane&#8217;s photo, the website looks for a short
description of Jane to include with her comment.  It performs another
LRDD discovery, this time looking for an &#8220;author&#8221; link.</p>
<p>Repeating the same process, the website looks for qualified &lt;LINK&gt;
elements in Jane&#8217;s blog HTML markup and finds none.  It then looks
for a LRDD document - a descriptor document containing additional
information about the resource - which uses the &#8220;lrdd&#8221; link relation.
It finds none in the HTML document.</p>
<p>In Resource-priority, the next source is the HTTP header included in
the resource representation response.  The HTTP header (shown above
with the HTML response) includes a qualified link to Jane&#8217;s author
page.</p>
<div class="highlight-python"><pre>HTTP/1.1 200 OK
Content-Type: text/html; charset=UTF-8
Link: &lt;http://jane.example.com/author&gt;; rel='author'</pre>
</div>
<p>Before the website can display Jane&#8217;s photo and description, it needs
to find the copyright license used by Jane&#8217;s blog.  It performs
another LRDD discovery looking for a link with a &#8220;copyright&#8221; relation
type.  It fails to find such link in the HTML markup as well as a
markup link to a LRDD document.  It tries and fails to find a
&#8220;copyright&#8221; link in the HTTP response header or a link to a LRDD
document.</p>
<p>After exhausting the first two sources, the website proceeds to the
host-meta source (Figure 1), and looks for link templates.  It fails
to find a link to a copyright statement, but it does find a link to a
LRDD document:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;Link</span> <span class="na">rel=</span><span class="s">&#39;lrdd&#39;</span> <span class="na">template=</span><span class="s">&#39;http://jane.example.com?lrdd={uri}&#39;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>The website obtains the LRDD document for Jane&#8217;s blog by applying the
blog&#8217;s URI to the template:</p>
<div class="highlight-python"><pre>   http://jane.example.com?lrdd=http%3A%2F%2Fjane.example.com%2Fblog


and obtains the LRDD document for Jane's blog:</pre>
</div>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;</span>
<span class="nt">&lt;XRD</span> <span class="na">xmlns=</span><span class="s">&#39;http://docs.oasis-open.org/ns/xri/xrd-1.0&#39;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;Subject&gt;</span>http://jane.example.com/blog<span class="nt">&lt;/Subject&gt;</span>
    <span class="nt">&lt;Property</span> <span class="na">type=</span><span class="s">&#39;http://example.com/version&#39;</span><span class="nt">&gt;</span>2.0<span class="nt">&lt;/Property&gt;</span>

    <span class="nt">&lt;Link</span> <span class="na">rel=</span><span class="s">&#39;copyright&#39;</span> <span class="na">href=</span><span class="s">&#39;http://jane.example.com/copyright&#39;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/XRD&gt;</span>
</pre></div>
</div>
<p>The LRDD document provided by the host-meta link template includes a
link to the copyright statement.  The website now has all the
information it needs to display Jane&#8217;s comment along with her photo
and description on the article page.</p>
</div>
<div class="section" id="notational-conventions">
<h3><a class="toc-backref" href="#id9">2.2.  Notational Conventions</a><a class="headerlink" href="#notational-conventions" title="Permalink to this headline">¶</a></h3>
<p>The key words &#8216;MUST&#8217;, &#8216;MUST NOT&#8217;, &#8216;REQUIRED&#8217;, &#8216;SHALL&#8217;, &#8216;SHALL NOT&#8217;,
&#8216;SHOULD&#8217;, &#8216;SHOULD NOT&#8217;, &#8216;RECOMMENDED&#8217;, &#8216;MAY&#8217;, and &#8216;OPTIONAL&#8217; in this
document are to be interpreted as described in [RFC2119].</p>
</div>
</div>
<div class="section" id="link-source-priority-order">
<h2><a class="toc-backref" href="#id10">3.  Link Source Priority Order</a><a class="headerlink" href="#link-source-priority-order" title="Permalink to this headline">¶</a></h2>
<p>The client MUST first determine the host source priority order.  To
ensure consistent client behavior and to enable hosts to set their
own security policy with regard to metadata authority, LRDD provides
two processing profiles:</p>
<blockquote>
<div><ul class="simple">
<li>Host priority - priority is given to links set by the host policy
(via host-meta and HTTP response headers) over those set by each
individual resources (via the document markup).  The client MUST
process the three sources in the following order: host-meta
document, HTTP response header, and document markup.</li>
<li>Resource priority - priority is given to the individual resource
over the policies of the host.  The client MUST process the three
sources in the following order: document markup, HTTP response
header, and host-meta document.</li>
</ul>
</div></blockquote>
<p>Host priority is the default source priority order.  Hosts that wish
to use resource priority MUST declare it by setting the LRDD priority
property in their host-meta document:
&#8220;<a class="reference external" href="http://lrdd.net/priority/resource">http://lrdd.net/priority/resource</a>&#8221;.  The priority property element
does not have a value.</p>
<p>For example:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;</span>
<span class="nt">&lt;XRD</span> <span class="na">xmlns=</span><span class="s">&#39;http://docs.oasis-open.org/ns/xri/xrd-1.0&#39;</span>
      <span class="na">xmlns:hm=</span><span class="s">&#39;http://host-meta.net/ns/1.0&#39;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;hm:Host&gt;</span>example.com<span class="nt">&lt;/hm:Host&gt;</span>
    <span class="nt">&lt;Property</span> <span class="na">type=</span><span class="s">&#39;http://lrdd.net/priority/resource&#39;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/XRD&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="resource-descriptor-construction">
<h2><a class="toc-backref" href="#id11">4.  Resource Descriptor Construction</a><a class="headerlink" href="#resource-descriptor-construction" title="Permalink to this headline">¶</a></h2>
<p>To construct the resource descriptor, the client determines the
source priority order as described in Section 3, and processes each
of the three sources (Section 5) as follows:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Obtain and processes the source to produce an ordered list of
links as described for each source in Section 5.</li>
<li>Add any link found to the resource descriptor links list in
order, except for any link using the &#8220;lrdd&#8221; relation type.</li>
<li>For each link using the &#8220;lrdd&#8221; relation type and
&#8220;application/xrd+xml&#8221; media type (if present):<ol class="upperalpha">
<li>Obtain the LRDD document by following the scheme-specific
rules for the LRDD document URI.  If the document URI scheme
is &#8220;http&#8221; or &#8220;https&#8221;, the document is obtained via an HTTP
&#8220;GET&#8221; request to the identified URI.  If the HTTP response
status code is 301, 302, or 307, the client MUST follow the
redirection response and repeat the request with the provided
location.  If a redirection response results in another 301,
302, or 307 response, the client SHOULD repeat the request
with the provided location as many times as reasonable,
making sure not to enter into a loop if a location URI
repeats itself.  The client MUST only process the document if
it was received with an HTTP 200 (OK) status code and is a
valid XRD document per [OASIS.XRD-1.0].</li>
<li>Add any link found in the LRDD document to the resource
descriptor links list in order, except for any link using the
&#8220;lrdd&#8221; relation type.  When adding links, the client SHOULD
retain any extension attributes and child elements if present
(e.g. &lt;Property&gt; or &lt;Title&gt; elements).</li>
<li>Add any resource properties found in the LRDD document to the
resource descriptor metadata list in order (e.g. &lt;Alias&lt; or
&lt;Property&gt; child elements of the &lt;XRD&gt; root element).</li>
</ol>
</li>
</ol>
</div></blockquote>
<p>For example, the resource descriptor of Jane&#8217;s blog as described in
Section 2.1 and expressed as an XRD document (for illustration
purposes only) is:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;</span>
<span class="nt">&lt;XRD</span> <span class="na">xmlns=</span><span class="s">&#39;http://docs.oasis-open.org/ns/xri/xrd-1.0&#39;</span><span class="nt">&gt;</span>

  <span class="nt">&lt;Subject&gt;</span>http://jane.example.com/blog<span class="nt">&lt;/Subject&gt;</span>
  <span class="nt">&lt;Property</span> <span class="na">type=</span><span class="s">&#39;http://example.com/version&#39;</span><span class="nt">&gt;</span>2.0<span class="nt">&lt;/Property&gt;</span>

  <span class="nt">&lt;Link</span> <span class="na">rel=</span><span class="s">&#39;avatar&#39;</span> <span class="na">href=</span><span class="s">&#39;http://jane.example.com/image&#39;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;Link</span> <span class="na">rel=</span><span class="s">&#39;author&#39;</span> <span class="na">href=</span><span class="s">&#39;http://jane.example.com/author&#39;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;Link</span> <span class="na">rel=</span><span class="s">&#39;contents&#39;</span>
   <span class="na">href=</span><span class="s">&#39;http://example.com?c=http%3A%2F%2Fjane.example.com%2Fblog&#39;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;Link</span> <span class="na">rel=</span><span class="s">&#39;copyright&#39;</span> <span class="na">href=</span><span class="s">&#39;http://jane.example.com/copyright&#39;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/XRD&gt;</span>
</pre></div>
</div>
<p>Using the same example, if Jane&#8217;s host-meta used host priority
instead of resource priority,
the resource descriptor of Jane&#8217;s blog would be:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;</span>
<span class="nt">&lt;XRD</span> <span class="na">xmlns=</span><span class="s">&#39;http://docs.oasis-open.org/ns/xri/xrd-1.0&#39;</span><span class="nt">&gt;</span>

  <span class="nt">&lt;Subject&gt;</span>http://jane.example.com/blog<span class="nt">&lt;/Subject&gt;</span>
  <span class="nt">&lt;Property</span> <span class="na">type=</span><span class="s">&#39;http://example.com/version&#39;</span><span class="nt">&gt;</span>2.0<span class="nt">&lt;/Property&gt;</span>

  <span class="nt">&lt;Link</span> <span class="na">rel=</span><span class="s">&#39;contents&#39;</span>
   <span class="na">href=</span><span class="s">&#39;http://example.com?c=http%3A%2F%2Fjane.example.com%2Fblog&#39;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;Link</span> <span class="na">rel=</span><span class="s">&#39;copyright&#39;</span> <span class="na">href=</span><span class="s">&#39;http://jane.example.com/copyright&#39;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;Link</span> <span class="na">rel=</span><span class="s">&#39;author&#39;</span> <span class="na">href=</span><span class="s">&#39;http://jane.example.com/author&#39;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;Link</span> <span class="na">rel=</span><span class="s">&#39;avatar&#39;</span> <span class="na">href=</span><span class="s">&#39;http://jane.example.com/image&#39;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/XRD&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="link-sources">
<h2><a class="toc-backref" href="#id12">5.  Link Sources</a><a class="headerlink" href="#link-sources" title="Permalink to this headline">¶</a></h2>
<p>Each of the link sources supported by LRDD presents a different set of requirements and benefits.
The criteria used to determine which sources a server supports are based on a combination of factors:</p>
<blockquote>
<div><ul class="simple">
<li>The ability to offer and obtain a representation of the resource
by dereferencing its URI.</li>
<li>The availability of a markup document representation supporting
&lt;LINK&gt; elements compatible with [I-D.nottingham-http-link-header].</li>
<li>The availability of an HTTP representation of the resource and the
ability to provide and access link information in its response
header.</li>
</ul>
<p>o  The ability to offer and process a host-meta document.</p>
</div></blockquote>
<div class="section" id="host-meta-document">
<h3><a class="toc-backref" href="#id13">5.1.  host-meta Document</a><a class="headerlink" href="#host-meta-document" title="Permalink to this headline">¶</a></h3>
<p>The host-meta document source is available for any resource
identified by a URI with an authority that supports the host-meta
document as defined in [I-D.hammer-hostmeta].  This method does not
require obtaining any representation of the resource, and operates
solely using the resource URI.</p>
<p>Links between the resource URI and other resources are expressed
using link templates as defined by [I-D.hammer-hostmeta] section 3.2.
By applying the host-wide templates to an individual resource URI, a
resource-specific link is generated which can be used to express
links without the need to access or provide a representation for the
resource.</p>
<p>The client processes the host-meta document, searches for link
templates and applies the resource URI to produce a set of links.
The client MUST retain the order of links as present in the host-meta
document.  Any links contained in the host-meta document not using
the &#8220;template&#8221; attribute MUST be ignored and excluded from the
resource descriptor (they are still valid for other purposes).</p>
<p>For example, the resource URI &#8220;<a class="reference external" href="http://example.com/x">http://example.com/x</a>&#8221; and the
following host-meta link template:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;Link</span> <span class="na">rel=</span><span class="s">&#39;author&#39;</span> <span class="na">template=</span><span class="s">&#39;http://example.com?author={uri}&#39;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>generate an &#8220;author&#8221; link between &#8220;<a class="reference external" href="http://example.com/x">http://example.com/x</a>&#8221; and
&#8220;<a class="reference external" href="http://example.com?author=http%3A%2F%2Fexample.com%2Fx">http://example.com?author=http%3A%2F%2Fexample.com%2Fx</a>&#8221;.</p>
</div>
<div class="section" id="http-response-headers">
<h3><a class="toc-backref" href="#id14">5.2.  HTTP Response Headers</a><a class="headerlink" href="#http-response-headers" title="Permalink to this headline">¶</a></h3>
<p>The HTTP response header source is limited to resources for which an
HTTP &#8220;GET&#8221; or &#8220;HEAD&#8221; request returns a valid representation of the
resource.  This source uses the &#8220;Link&#8221; header field defined in
[I-D.nottingham-http-link-header] and requires the retrieval of a
resource representation header.</p>
<p>For example:</p>
<div class="highlight-python"><pre>Link: &lt;http://example.com?author=http%3A%2F%2Fexample.com%2Fx&gt;;
          rel='author'</pre>
</div>
<p>The client obtains the HTTP response header links by making an HTTP
(or HTTPS) &#8220;GET&#8221; or &#8220;HEAD&#8221; request to the resource URI.</p>
<p>If the HTTP response status code is 301, 302, or 307, the client MUST
follow the redirection response and repeat the request with the
provided location.  If a redirection response results in another 301,
302, or 307 response, the client SHOULD repeat the request with the
provided location as many times as reasonable, making sure not to
enter into a loop if a location URI repeats itself.</p>
<p>The client MUST only process the header if the HTTP response includes
a 200, 204, 206, or 304 status code.  The client processes the
response header and searches for &#8220;Link&#8221; header fields.  The client
MUST retain the order of links as present in the response header.</p>
<p>Link headers can include multiple relation types in a single &#8220;rel&#8221;
attribute (for example &#8220;rel=&#8221;license copyright&#8221;&#8221;).  The client MUST
properly process such multiple relation types &#8220;rel&#8221; attributes as
defined by [I-D.nottingham-http-link-header].</p>
</div>
<div class="section" id="document-markup">
<h3><a class="toc-backref" href="#id15">5.3.  Document Markup</a><a class="headerlink" href="#document-markup" title="Permalink to this headline">¶</a></h3>
<p>The document markup source is limited to resources with an available
markup representation that supports typed relations using the &lt;LINK&gt;
element, such as HTML [W3C.REC-html401-19991224], XHTML
[W3C.REC-xhtml1-20020801], and Atom [RFC4287].  Other markup formats
are permitted as long as the semantics of their &lt;LINK&gt; elements are
fully compatible with the link framework defined in
[I-D.nottingham-http-link-header].</p>
<p>For example:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;LINK</span> <span class="na">href=</span><span class="s">&#39;http://example.com?author=http%3A%2F%2Fexample.com%2Fx&#39;</span>
        <span class="na">rel=</span><span class="s">&#39;author&#39;</span><span class="nt">&gt;</span>
</pre></div>
</div>
<p>The client obtains the document markup by retrieving a representation
of the resource using the applicable transport for that resource URI.
When using HTTP (or HTTPS), the client obtains the document markup by
making a &#8220;GET&#8221; request to the resource URI.</p>
<p>If the HTTP response status code is 301, 302, or 307, the client MUST
follow the redirection response and repeat the request with the
provided location.  If a redirection response results in another 301,
302, or 307 response, the client SHOULD repeat the request with the
provided location as many times as reasonable, making sure not to
enter into a loop if a location URI repeats itself.</p>
<p>The client MUST only process the document markup if the HTTP response
includes a 200 (OK) status code.  The client processes the document
markup and searches for &#8220;LINK&#8221; elements.  The client MUST retain the
order of links as present in the document markup.</p>
<p>The client MUST obey the document markup schema and ignore any
invalid elements (such as &lt;LINK&gt; elements outside the &lt;HEAD&gt; section
of an HTML document).  This is done to avoid unintentional markup
from other parts of the document to be used for discovery purposes,
which can have vast impact on usability and security.</p>
<p>Some &lt;LINK&gt; elements allow multiple relation types in a single &#8220;rel&#8221;
attribute (for example &#8220;rel=&#8217;license copyright&#8217;&#8221;).  The client MUST
properly process such multiple relation &#8220;rel&#8221; attributes as defined
by the format specification.</p>
</div>
</div>
<div class="section" id="security-considerations">
<h2><a class="toc-backref" href="#id16">6.  Security Considerations</a><a class="headerlink" href="#security-considerations" title="Permalink to this headline">¶</a></h2>
<p>The methods used to perform discovery are not secure, private or
integrity-guaranteed, and due caution should be exercised when using
them.  Applications that perform LRDD SHOULD consider the attack
vectors opened by automatically following, trusting, or otherwise
using links gathered from document markups, HTTP response headers, or
host-meta documents.</p>
</div>
<div class="section" id="iana-considerations">
<h2><a class="toc-backref" href="#id17">7.  IANA Considerations</a><a class="headerlink" href="#iana-considerations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-lrdd-relation-type">
<h3><a class="toc-backref" href="#id18">7.1.  The &#8216;lrdd&#8217; Relation Type</a><a class="headerlink" href="#the-lrdd-relation-type" title="Permalink to this headline">¶</a></h3>
<p>This specification registers the &#8220;lrdd&#8221; relation type in the Link
Relation Type Registry defined by [I-D.nottingham-http-link-header]:</p>
<div class="highlight-python"><pre>Relation Name:  lrdd

Description:  Identifies a resource descriptor for the link's context
   used by the LRDD protocol.

Reference:  [[ This specification ]]</pre>
</div>
</div>
</div>
<div class="section" id="appendix-a-acknowledgments">
<h2><a class="toc-backref" href="#id19">Appendix A.  Acknowledgments</a><a class="headerlink" href="#appendix-a-acknowledgments" title="Permalink to this headline">¶</a></h2>
<p>Inspiration for this memo derived from previous work on a descriptor
format called XRDS-Simple, which in turn derived from another
descriptor format, XRDS.  Previous discovery workflows include Yadis
which is currently used by the OpenID community.  While suffering
from significant shortcomings, Yadis was a breakthrough approach to
performing discovery using extremely restricted hosting environments,
and this memo has strived to preserve as much of that spirit as
possible.</p>
<p>The author wishes to thanks the OASIS XRI TC and WebFinger
communities for their support, encouragement, and enthusiasm for this
work.  Special thanks go to Phil Archer, Lisa Dusseault, Joseph
Holsten, Mark Nottingham, John Panzer, Drummond Reed, and Jonathan
Rees for their invaluable feedback.</p>
</div>
<div class="section" id="appendix-b-document-history">
<h2><a class="toc-backref" href="#id20">Appendix B.  Document History</a><a class="headerlink" href="#appendix-b-document-history" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>[[ to be removed by the RFC editor before publication as an RFC ]]</p>
<p>-06</p>
<p>o  Marked as deprecated with some functionality moved to host-meta.</p>
<p>-05</p>
<p>o  Many editorial changes, cleanup.</p>
<dl class="docutils">
<dt>o  Changed the processing flow to focus on a aggregation.  Clients</dt>
<dd>can always stop when they find what they need.</dd>
<dt>o  Clarified redirections and HTTP status codes for valid document</dt>
<dd>markups and response headers.</dd>
</dl>
<p>o  Removed restrictions on multiple LRDD documents.</p>
<p>-04</p>
<p>o  Changed focus to a narrow and well-defined discovery process.</p>
<dl class="docutils">
<dt>o  Removed analysis appendix and discussion of discovery types and</dt>
<dd>removed informative references.</dd>
<dt>o  Expanded the descriptor definition to include links as well as</dt>
<dd>LRDD documents, moving away from the single-document approach.</dd>
<dt>o  Moved the Link-Pattern field and template syntax to new host-meta</dt>
<dd>draft.</dd>
</dl>
<p>o  Updated references.</p>
<p>o  Added example.</p>
<p>-03</p>
<p>o  Added protocol name LRDD (pronounced &#8216;lard&#8217;).</p>
<p>o  Fixed Link-Pattern examples to include missing semicolons.</p>
<p>-02</p>
<p>o  Changed focus from an HTTP-based process to Link-based process.</p>
<p>o  Completely revised and restructured document for better clarity.</p>
<dl class="docutils">
<dt>o  Realigned the methods to produce consistent results and changed</dt>
<dd>the way redirections and client-errors are handled.</dd>
<dt>o  Updated to use newer version of site-meta, now called host-meta,</dt>
<dd>including a new plaintext-based format to replace the previous XML
format.</dd>
<dt>o  Renamed Link-Template to Link-Pattern to avoid future conflict</dt>
<dd>with a previously proposed Link-Template HTTP header.</dd>
</dl>
<p>o  Removed support for the &#8216;scheme&#8217; Link-Template parameter.</p>
<p>o  Replaced restrictions with interoperability recommendations.</p>
<p>o  Added IANA considerations per new host-meta registry requirements.</p>
<p>-01</p>
<p>o  Rename &#8216;resource discovery&#8217; to &#8216;descriptor discovery&#8217;.</p>
<p>o  Added informative reference to Metalink.</p>
<dl class="docutils">
<dt>o  Clarified that the resource descriptor URI can use any URI scheme,</dt>
<dd>not just &#8216;http&#8217; or &#8216;https&#8217;.</dd>
</dl>
<p>o  Removed comment regarding redirects when using &lt;LINK&gt; Elements.</p>
<dl class="docutils">
<dt>o  Clarified that HTTPS must be used with &#8216;https&#8217; URIs for both Link</dt>
<dd>headers and host-meta retrieval.</dd>
<dt>o  Removed DNS verification step for host-meta with schemes other</dt>
<dd>then &#8216;http&#8217; and &#8216;https&#8217;.  Replaced with a general discussion of
authority and a security consideration comment.</dd>
</dl>
<p>o  Organized host-meta section into another sub-section level.</p>
<dl class="docutils">
<dt>o  Enlarged the template vocabulary from a single &#8216;uri&#8217; variable to</dt>
<dd>include smaller URI components.</dd>
</dl>
<p>o  Added informative reference to RFC 2295 in analysis appendix.</p>
<p>-00</p>
<p>o  Initial draft.</p>
</div></blockquote>
</div>
<div class="section" id="references">
<h2><a class="toc-backref" href="#id21">8.  References</a><a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<div class="section" id="normative-references">
<h3><a class="toc-backref" href="#id22">8.1.  Normative References</a><a class="headerlink" href="#normative-references" title="Permalink to this headline">¶</a></h3>
<dl class="glossary docutils">
<dt id="term-i-d-hammer-hostmeta">[I-D.hammer-hostmeta]</dt>
<dd>Hammer-Lahav, E., &#8220;host-meta: Web Host Metadata&#8221;,
draft-hammer-hostmeta-08 (work in progress), May 2010.</dd>
<dt id="term-i-d-nottingham-http-link-header">[I-D.nottingham-http-link-header]</dt>
<dd>Nottingham, M., &#8220;Web Linking&#8221;,
draft-nottingham-http-link-header-10 (work in progress),
May 2010.</dd>
<dt id="term-rfc2119-bradner-s-key-words-for-use-in-rfcs-to-indicate">[RFC2119]  Bradner, S., &#8220;Key words for use in RFCs to Indicate</dt>
<dd>Requirement Levels&#8221;, BCP 14, RFC 2119, March 1997.</dd>
<dt id="term-rfc2616-fielding-r-gettys-j-mogul-j-frystyk-h">[RFC2616]  Fielding, R., Gettys, J., Mogul, J., Frystyk, H.,</dt>
<dd>Masinter, L., Leach, P., and T. Berners-Lee, &#8220;Hypertext
Transfer Protocol &#8211; HTTP/1.1&#8221;, RFC 2616, June 1999.</dd>
<dt id="term-rfc4287-nottingham-m-ed-and-r-sayre-ed-the-atom">[RFC4287]  Nottingham, M., Ed. and R. Sayre, Ed., &#8220;The Atom</dt>
<dd>Syndication Format&#8221;, RFC 4287, December 2005.</dd>
<dt id="term-w3c-rec-html401-19991224">[W3C.REC-html401-19991224]</dt>
<dd>Hors, A., Raggett, D., and I. Jacobs, &#8220;HTML 4.01
Specification&#8221;, World Wide Web Consortium
Recommendation REC-html401-19991224, December 1999,
&lt;<a class="reference external" href="http://www.w3.org/TR/1999/REC-html401-19991224">http://www.w3.org/TR/1999/REC-html401-19991224</a>&gt;.</dd>
<dt id="term-w3c-rec-xhtml1-20020801">[W3C.REC-xhtml1-20020801]</dt>
<dd>Pemberton, S., &#8220;XHTML[TM] 1.0 The Extensible HyperText
Markup Language (Second Edition)&#8221;, World Wide Web
Consortium Recommendation REC-xhtml1-20020801,
August 2002,
&lt;<a class="reference external" href="http://www.w3.org/TR/2002/REC-xhtml1-20020801">http://www.w3.org/TR/2002/REC-xhtml1-20020801</a>&gt;.</dd>
</dl>
</div>
<div class="section" id="informative-references">
<h3><a class="toc-backref" href="#id23">8.2.  Informative References</a><a class="headerlink" href="#informative-references" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="docutils">
<dt>[OASIS.XRD-1.0]</dt>
<dd>Hammer-Lahav, E. and W. Norris, &#8220;Extensible Resource
Descriptor (XRD) Version 1.0 (work in progress)&#8221;, &lt;<a class="reference external" href="http://">http://</a>
www.oasis-open.org/committees/download.php/36542/
xrd-1.0-wd15.html&gt;.</dd>
<dt>[RFC4918]  Dusseault, L., &#8220;HTTP Extensions for Web Distributed</dt>
<dd>Authoring and Versioning (WebDAV)&#8221;, RFC 4918, June 2007.</dd>
<dt>[URIQA]    Nokia, &#8220;The URI Query Agent Model&#8221;,</dt>
<dd>&lt;<a class="reference external" href="http://sw.nokia.com/uriqa/URIQA.html">http://sw.nokia.com/uriqa/URIQA.html</a>&gt;.</dd>
</dl>
</div></blockquote>
<p>URIs</p>
<blockquote>
<div>[1]  &lt;<a class="reference external" href="https://www.ietf.org/mailman/listinfo/apps-discuss">https://www.ietf.org/mailman/listinfo/apps-discuss</a>&gt;</div></blockquote>
<p>Author&#8217;s Address</p>
<blockquote>
<div><p>Eran Hammer-Lahav
Yahoo!</p>
<p>Email: <a class="reference external" href="mailto:eran&#37;&#52;&#48;hueniverse&#46;com">eran<span>&#64;</span>hueniverse<span>&#46;</span>com</a>
URI:   <a class="reference external" href="http://hueniverse.com">http://hueniverse.com</a></p>
</div></blockquote>
</div>
</div>
<div class="section" id="glossary">
<h2><a class="toc-backref" href="#id24">Glossary</a><a class="headerlink" href="#glossary" title="Permalink to this headline">¶</a></h2>
<dl class="glossary docutils">
<dt id="term-resource-descriptor"><span id="term-resource-descriptors"></span>Resource Descriptor<br />Resource Descriptors</dt>
<dd>Information abount resource.</dd>
</dl>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="swd.html">Simple Web Discovery (SWD)</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="revoke.html">Token Revocation</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2011, HDKNR.COM.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2pre/3c28de26aac2.
    </div>
  </body>
</html>