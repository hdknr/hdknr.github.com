
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>SAML 2.0 Bearer Assertion Profiles for OAuth 2.0 &mdash; identity 1.0 documentation</title>
    
    <link rel="stylesheet" href="static/basic.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="static/bootstrap-3.0.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="static/bootstrap-3.0.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="static/openid.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <script type="text/javascript" src="static/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="static/bootstrap-sphinx.js"></script>
    <link rel="top" title="identity 1.0 documentation" href="index.html" />
    <link rel="next" title="Assertion Framework for OAuth 2.0" href="oauth_assertion.html" />
    <link rel="prev" title="JSON Web Token (JWT) Bearer Token Profiles for OAuth 2.0" href="oauth_jwt_bearer.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">identity</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a href="index.html"
     class="dropdown-toggle"
     data-toggle="dropdown">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
    ><ul>
<li class="toctree-l1"><a class="reference internal" href="oauth.html">RFC6759:The OAuth 2.0 Authorization Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_bearer.html">The OAuth 2.0 Authorization Framework: Bearer Token Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_threat.html">Auth 2.0 Threat Model and Security Considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_revocation.html">RFC7009:Token Revocation</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="oauth_jwt_bearer.html">JSON Web Token (JWT) Bearer Token Profiles for OAuth 2.0</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">SAML 2.0 Bearer Assertion Profiles for OAuth 2.0</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="oauth_assertion.html">Assertion Framework for OAuth 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_mac.html">HTTP Authentication: MAC Access Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_reg.html">OAuth Dynamic Client Registration Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_introspect.html">OAuth Token Introspection</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_meta.html">JSON Metadata for OAuth Responses</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_res_reg.html">OAuth 2.0 Resource Set Registration</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth-lrdd.html">Link relation Type Registrations for OAuth 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_auth.html">OAuth 2.0 User Authentication and Consent For Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_responses.html">OAuth 2.0 Multiple Response Type Encoding Practices - draft 11</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_post.html">OAuth 2.0 Form Post Response Mode - draft 01</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="oauth_res.html">OAuth Resoure</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="openid_connect.html">OpenID Connect</a></li>
<li class="toctree-l1"><a class="reference internal" href="core.html">OpenID Connect Core 1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="reg.html">OpenID Connect Dynamic Client Registration 1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="discovery.html">OpenID Connect Discovery 1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="session.html">OpenID Connect Session Management 1.0</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="basic.html">OpenID Connect Basic Client Profile 1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="implicit.html">OpenID Connect Implicit Client Implementer&#8217;s Guide 1.0 - draft 14</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="standard.html">OpenID Connect Standard 1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="messages.html">OpenID Connect Messages 1.0</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="uma_core.html">User-Managed Access (UMA) Profile of OAuth 2.0 : draft09</a></li>
<li class="toctree-l1"><a class="reference internal" href="uma_trust.html">Binding Obligations on User-Managed Access (UMA) Participants</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="jose.html">Terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="jwa.html">JSON Web Algorithms (JWA) : draft21</a></li>
<li class="toctree-l1"><a class="reference internal" href="jwt.html">JSON Web Token (JWT) : draft19</a></li>
<li class="toctree-l1"><a class="reference internal" href="jws.html">JSON Web Signature (JWS) : draft25</a></li>
<li class="toctree-l1"><a class="reference internal" href="jws_hok.html">Holder-of-Key JSON Web Signature (JWS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="jwe.html">JSON Web Encryption (JWE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="jwk.html">JSON Web Key (JWK) : draft24</a></li>
<li class="toctree-l1"><a class="reference internal" href="jws_js.html">JSON Web Signature JSON Serialization (JWS-JS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="jwe_js.html">JSON Web Encryption JSON Serialization (JWE-JS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="jose_usecase.html">Use Cases and Requirements for JSON Object Signing and Encryption (JOSE)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="hostmeta.html">Web Host Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="webfinger.html">WebFinger</a></li>
<li class="toctree-l1"><a class="reference internal" href="swd.html">Simple Web Discovery (SWD)</a></li>
<li class="toctree-l1"><a class="reference internal" href="acct.html">The &#8216;acct&#8217; URI Scheme</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="rfc3394.html">RFC3394:Advanced Encryption Standard (AES) Key Wrap Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="nist-sp-800-59a.html">NIST SP 800-56A:Recommendation for Pair-Wise Key Establishment Schemes Using Discrete Logarithm Cryptography</a></li>
<li class="toctree-l1"><a class="reference internal" href="nist-sp-800-63.html">Electronic Authentication Guideline</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="backplane.html">Backplane</a></li>
<li class="toctree-l1"><a class="reference internal" href="backplane.html#backplane-2-0">Backplane 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="lrdd.html">LRDD: Link-based Resource Descriptor Discovery</a></li>
<li class="toctree-l1"><a class="reference internal" href="revoke.html">Token Revocation</a></li>
<li class="toctree-l1"><a class="reference internal" href="poco.html">Portable Contacts 1.0 Draft C</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Terms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="saml.html">SAML</a></li>
<li class="toctree-l1"><a class="reference internal" href="xacml.html">XACML</a></li>
<li class="toctree-l1"><a class="reference internal" href="shibboleth.html">Shibboleth</a></li>
<li class="toctree-l1"><a class="reference internal" href="SamlHokProfile.html">SAML V2.0 Holder-of-Key Assertion Profile Version 1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="SamlHokWebSsoProfile.html">SAML V2.0 Holder-of-Key Web Browser SSO Profile Version 1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="wss_saml_token_profile.html">Web Services Security SAML Token Profile Version 1.1.1</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="scim_rest.html">Simple Cloud Identity Management: Protocol 1.0 (REST API 1.0)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="active_directory.html">Active Directory &amp; Connect</a></li>
<li class="toctree-l1"><a class="reference internal" href="todo.html">TODO/TBD</a></li>
<li class="toctree-l1"><a class="reference internal" href="resource.html">Resource</a></li>
<li class="toctree-l1"><a class="reference internal" href="discussion.html">Discussion</a></li>
<li class="toctree-l1"><a class="reference internal" href="signed_nonce.html">Decoupling Identity and Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="adtech.html">AdTech</a></li>
<li class="toctree-l1"><a class="reference internal" href="technight_9.html">Technight #9</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="well-known.html">RFC5783: Defining Well-Known Uniform Resource Identifiers (URIs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="rfc5988.html">RFC5988:Web Linking</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="impl_id_token.html">ID Token:Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="impl_jws.html">JOSE JWS:Implementation</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">SAML 2.0 Bearer Assertion Profiles for OAuth 2.0</a><ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#introduction">1. Introduction</a></li>
<li><a class="reference internal" href="#http-parameter-bindings-for-transporting-assertions">2.  HTTP Parameter Bindings for Transporting Assertions</a><ul>
<li><a class="reference internal" href="#using-saml-assertions-as-authorization-grants">2.1.  Using SAML Assertions as Authorization Grants</a></li>
<li><a class="reference internal" href="#using-saml-assertions-for-client-authentication">2.2.  Using SAML Assertions for Client Authentication</a></li>
</ul>
</li>
<li><a class="reference internal" href="#assertion-format-and-processing-requirements">3.  Assertion Format and Processing Requirements</a><ul>
<li><a class="reference internal" href="#authorization-grant-processing">3.1.  Authorization Grant Processing</a></li>
<li><a class="reference internal" href="#client-authentication-processing">3.2.  Client Authentication Processing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#references">7. References</a><ul>
<li><a class="reference internal" href="#normative-references">7.1. Normative References</a></li>
<li><a class="reference internal" href="#informative-references">7.2. Informative References</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li><a href="oauth_jwt_bearer.html"
         title="Previous Chapter: JSON Web Token (JWT) Bearer Token Profiles for OAuth 2.0">&laquo; JSON Web Token (...</a></li>
  <li><a href="oauth_assertion.html"
         title="Next Chapter: Assertion Framework for OAuth 2.0">Assertion Framew... &raquo;</a></li>
              
            
            
            
            
              <li>
<div id="sourcelink">
  <a href="sources/oauth_saml2_bearer.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="saml-2-0-bearer-assertion-profiles-for-oauth-2-0">
<h1><a class="toc-backref" href="#id1">SAML 2.0 Bearer Assertion Profiles for OAuth 2.0</a><a class="headerlink" href="#saml-2-0-bearer-assertion-profiles-for-oauth-2-0" title="Permalink to this headline">¶</a></h1>
<p>based on <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-oauth-saml2-bearer-10">http://tools.ietf.org/html/draft-ietf-oauth-saml2-bearer-10</a></p>
<div class="section" id="abstract">
<span id="oauth-saml2-bearer-abstract"></span><h2><a class="toc-backref" href="#id2">Abstract</a><a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h2>
<p>This specification defines the use of a <em class="xref std std-term">SAML 2.0 Bearer Assertion</em>
as a means for requesting an OAuth 2.0 <a class="reference internal" href="glossary.html#term-access-token"><em class="xref std std-term">access token</em></a>
as well as for use as a means of <a class="reference internal" href="glossary.html#term-client-authentication"><em class="xref std std-term">client authentication</em></a>.</p>
<p>(draft 15, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-oauth-saml2-bearer-15">http://tools.ietf.org/html/draft-ietf-oauth-saml2-bearer-15</a> )</p>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#saml-2-0-bearer-assertion-profiles-for-oauth-2-0" id="id1">SAML 2.0 Bearer Assertion Profiles for OAuth 2.0</a><ul>
<li><a class="reference internal" href="#abstract" id="id2">Abstract</a></li>
<li><a class="reference internal" href="#introduction" id="id3">1. Introduction</a></li>
<li><a class="reference internal" href="#http-parameter-bindings-for-transporting-assertions" id="id4">2.  HTTP Parameter Bindings for Transporting Assertions</a><ul>
<li><a class="reference internal" href="#using-saml-assertions-as-authorization-grants" id="id5">2.1.  Using SAML Assertions as Authorization Grants</a></li>
<li><a class="reference internal" href="#using-saml-assertions-for-client-authentication" id="id6">2.2.  Using SAML Assertions for Client Authentication</a></li>
</ul>
</li>
<li><a class="reference internal" href="#assertion-format-and-processing-requirements" id="id7">3.  Assertion Format and Processing Requirements</a><ul>
<li><a class="reference internal" href="#authorization-grant-processing" id="id8">3.1.  Authorization Grant Processing</a></li>
<li><a class="reference internal" href="#client-authentication-processing" id="id9">3.2.  Client Authentication Processing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#references" id="id10">7. References</a><ul>
<li><a class="reference internal" href="#normative-references" id="id11">7.1. Normative References</a></li>
<li><a class="reference internal" href="#informative-references" id="id12">7.2. Informative References</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="introduction">
<span id="oauth-saml2-bearer-1"></span><h2><a class="toc-backref" href="#id3">1. Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The Security Assertion Markup Language (SAML) 2.0
<a class="reference internal" href="#term-oasis-saml-core-2-0-os"><em class="xref std std-term">[OASIS.saml-core-2.0-os]</em></a> is an XML-based framework
that allows identity and security information to be shared across security domains.
The SAML specification,
while primarily targeted at providing cross domain Web browser single sign-on,
was also designed to be modular and extensible to facilitate use in other contexts.</p>
<p>The <a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">Assertion</em></a>, an XML <em class="xref std std-term">security token</em>,
is a fundamental construct of SAML that is often adopted for use
in other protocols and specifications.
An Assertion is generally issued by an identity provider
and consumed by a service provider
who relies on its content to identify the Assertion&#8217;s subject
for security related purposes.</p>
<p>The OAuth 2.0 Authorization Protocol <a class="reference internal" href="#term-rfc6749"><em class="xref std std-term">[RFC6749]</em></a> provides
a method for making authenticated HTTP requests to a resource
using an access token.
Access tokens are issued to third-party clients by an
authorization server (AS) with the
(sometimes implicit) approval of the resource owner.</p>
<p>In OAuth,
an <em class="xref std std-term">authorization grant</em> is an abstract term used to describe <strong>intermediate credentials</strong>
that represent the resource owner authorization.
An authorization grant is used by the <a class="reference internal" href="uma_core.html#term-client"><em class="xref std std-term">client</em></a>
to obtain an access token.</p>
<p>Several authorization grant types are defined
to support a wide range of client types and user experiences.
OAuth also allows for the definition of new extension
grant types to support additional clients or to provide a bridge
between OAuth and other trust frameworks.</p>
<p>Finally,
OAuth allows the definition of additional authentication mechanisms to be used by
clients when interacting with the authorization server.</p>
<p>The OAuth 2.0 Assertion Profile <a class="reference internal" href="#term-i-d-ietf-oauth-assertions"><em class="xref std std-term">[I-D.ietf-oauth-assertions]</em></a> is an
abstract extension to OAuth 2.0 that provides a general framework for
the use of Assertions as client credentials and/or authorization grants with OAuth 2.0.
This specification profiles the OAuth 2.0 Assertion Profile [I-D.ietf-oauth-assertions]
to define an extension grant type that uses a SAML 2.0 Bearer Assertion
to request an OAuth 2.0 access token as well as for use as client credentials.</p>
<p>The format and processing rules for the SAML Assertion defined in this
specification are intentionally similar, though not identical,
to those in the Web Browser SSO Profile defined in SAML Profiles
<a class="reference internal" href="#term-oasis-saml-profiles-2-0-os"><em class="xref std std-term">[OASIS.saml-profiles-2.0-os]</em></a>.
This specification is reusing, to the extent reasonable,
concepts and patterns from that well-established Profile.</p>
<p>This document defines how a SAML Assertion can be used to request an
access token when a client wishes to utilize an existing trust
relationship, expressed through the semantics of (and digital
signature calculated over) the SAML Assertion, without a direct user
approval step at the authorization server.</p>
<p>It also defines how a SAML Assertion can be used as a <strong>client authentication mechanism</strong>.
The use of an Assertion for client authentication is orthogonal to and
separable from using an Assertion as an authorization grant.
They can be used either in combination or separately.
Client assertion authentication is nothing more than an alternative way
for a client to authenticate to the token endpoint
and must be used in conjunction with some grant type to form a complete
and meaningful protocol request.
Assertion authorization grants may be used with or without client authentication or identification.
Whether or not client authentication is needed in conjunction
with an assertion authorization grant,
as well as the supported types of client authentication,
are policy decisions at the discretion of the authorization server.</p>
<p>The process by which the client obtains the SAML Assertion,
prior to exchanging it with the authorization server or using it
for client authentication, is out of scope.</p>
<p>( draft 15, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-oauth-saml2-bearer-15#section-1">http://tools.ietf.org/html/draft-ietf-oauth-saml2-bearer-15#section-1</a> )</p>
</div>
<div class="section" id="http-parameter-bindings-for-transporting-assertions">
<span id="oauth-saml2-bearer-2"></span><h2><a class="toc-backref" href="#id4">2.  HTTP Parameter Bindings for Transporting Assertions</a><a class="headerlink" href="#http-parameter-bindings-for-transporting-assertions" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="oauth_assertion.html"><em>OAuth 2.0 Assertion Profile</em></a> [<a class="reference internal" href="oauth_jwt_bearer.html#term-i-d-ietf-oauth-assertions"><em class="xref std std-term">I-D.ietf.oauth-assertions</em></a>]
defines generic HTTP parameters for transporting <em class="xref std std-term">assertions</em>
during interactions with a <em class="xref std std-term">token endpoint</em>.</p>
<p>This section defines the values
of those parameters for use with SAML 2.0 Bearer Assertions.</p>
<p>(Draft 10, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-oauth-saml2-bearer-10#section-2">http://tools.ietf.org/html/draft-ietf-oauth-saml2-bearer-10#section-2</a> )</p>
<div class="section" id="using-saml-assertions-as-authorization-grants">
<span id="oauth-saml2-bearer-2-1"></span><h3><a class="toc-backref" href="#id5">2.1.  Using SAML Assertions as Authorization Grants</a><a class="headerlink" href="#using-saml-assertions-as-authorization-grants" title="Permalink to this headline">¶</a></h3>
<p>To use a <em class="xref std std-term">SAML Bearer Assertion</em> as an <em class="xref std std-term">authorization grant</em>,
use the following parameter values and encodings.</p>
<p>The value of &#8220;<a class="reference internal" href="oauth_assertion.html#term-grant-type"><em class="xref std std-term">grant_type</em></a>&#8221; parameter MUST be
&#8220;<strong>urn:ietf:params:oauth:grant-type:saml2-bearer</strong>&#8220;</p>
<p>The value of the &#8220;<a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">assertion</em></a>&#8221; parameter MUST contain
a single <em class="xref std std-term">SAML 2.0 Assertion</em>.
The <em class="xref std std-term">SAML Assertion XML data</em> MUST be encoded
using <a class="reference internal" href="session.html#term-base64url"><em class="xref std std-term">base64url</em></a>,
where the encoding adheres to the definition in Section 5 of RFC4648 [RFC4648]
and where the padding bits are set to zero.</p>
<p>To avoid the need for subsequent encoding steps
(by &#8220;application/x-www-form-urlencoded&#8221; [W3C.REC-html401-19991224], for example),
the base64url encoded data SHOULD NOT be line wrapped and pad characters
(&#8220;=&#8221;) SHOULD NOT be included.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">No padding for base64url</p>
</div>
<p>(draft 10 , <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-oauth-saml2-bearer-10#section-2.1">http://tools.ietf.org/html/draft-ietf-oauth-saml2-bearer-10#section-2.1</a>  )</p>
</div>
<div class="section" id="using-saml-assertions-for-client-authentication">
<span id="oauth-saml2-bearer-2-2"></span><h3><a class="toc-backref" href="#id6">2.2.  Using SAML Assertions for Client Authentication</a><a class="headerlink" href="#using-saml-assertions-for-client-authentication" title="Permalink to this headline">¶</a></h3>
<p>To use a <em class="xref std std-term">SAML Bearer Assertion</em> for <em class="xref std std-term">client authentication grant</em>,
use the following parameter values and encodings.</p>
<p>The value of &#8220;<a class="reference internal" href="oauth_assertion.html#term-client-assertion-type"><em class="xref std std-term">client_assertion_type</em></a>&#8221; parameter MUST be
&#8220;<strong>urn:ietf:params:oauth:client-assertion-type:saml2-bearer</strong>&#8220;</p>
<blockquote>
<div>The value of the &#8220;<a class="reference internal" href="oauth_assertion.html#term-client-assertion"><em class="xref std std-term">client_assertion</em></a>&#8221; parameter MUST contain</div></blockquote>
<p>a single <em class="xref std std-term">SAML 2.0 Assertion</em>.
The <em class="xref std std-term">SAML Assertion XML data</em> MUST be encoded
using <a class="reference internal" href="session.html#term-base64url"><em class="xref std std-term">base64url</em></a>,
where the encoding adheres to the definition in Section 5 of RFC4648 [RFC4648]
and where the padding bits are set to zero.</p>
<p>To avoid the need for subsequent encoding steps
(by &#8220;application/x-www-form-urlencoded&#8221; [W3C.REC-html401-19991224], for example),
the base64url encoded data SHOULD NOT be line wrapped and
pad characters (&#8220;=&#8221;) SHOULD NOT be included.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>no padding for Base64url</li>
</ul>
</div>
<p>( Draft 10, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-oauth-saml2-bearer-10#section-2.2">http://tools.ietf.org/html/draft-ietf-oauth-saml2-bearer-10#section-2.2</a> )</p>
</div>
</div>
<div class="section" id="assertion-format-and-processing-requirements">
<span id="oauth-saml2-bearer-3"></span><h2><a class="toc-backref" href="#id7">3.  Assertion Format and Processing Requirements</a><a class="headerlink" href="#assertion-format-and-processing-requirements" title="Permalink to this headline">¶</a></h2>
<p>In order to issue an <a class="reference internal" href="glossary.html#term-access-token"><em class="xref std std-term">access token</em></a> response
as described in The OAuth 2.0 Authorization Protocol
[I-D.ietf.oauth-v2]
or to rely on an <a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">assertion</em></a> for <a class="reference internal" href="glossary.html#term-client-authentication"><em class="xref std std-term">client authentication</em></a>,
the authorization server MUST validate the <a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">Assertion</em></a> according
to the criteria below.
Application of additional restrictions and policy are
at the discretion of the <a class="reference internal" href="oauth.html#term-authorization-server"><em class="xref std std-term">authorization server</em></a>.</p>
<blockquote>
<div><ul>
<li><p class="first">The <a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">Assertion</em></a>&#8216;s <strong>&lt;Issuer&gt;</strong> element MUST contain
a unique identifier for the entity that issued the <a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">Assertion</em></a>.</p>
</li>
<li><p class="first">The <a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">Assertion</em></a> MUST contain <strong>&lt;Conditions&gt;</strong> element
with an <strong>&lt;AudienceRestriction&gt;</strong> element with an <strong>&lt;Audience&gt;</strong> element
containing a URI reference that identifies the <a class="reference internal" href="oauth.html#term-authorization-server"><em class="xref std std-term">authorization server</em></a>,
or the service provider SAML entity of its controlling domain,
as an intended audience.
The <em class="xref std std-term">token endpoint</em> URL of the <a class="reference internal" href="oauth.html#term-authorization-server"><em class="xref std std-term">authorization server</em></a>
MAY be used as an acceptable value for an <strong>&lt;Audience&gt;</strong> element.
The <a class="reference internal" href="oauth.html#term-authorization-server"><em class="xref std std-term">authorization server</em></a> MUST verify that
it is an intended audience for the <a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">Assertion</em></a>.</p>
</li>
<li><p class="first">The <a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">Assertion</em></a> MUST contain a <strong>&lt;Subject&gt;</strong> element.
The subject MAY identify the <a class="reference internal" href="uma_core.html#term-resource-owner"><em class="xref std std-term">resource owner</em></a>
for whom the access token is being requested.
For <a class="reference internal" href="glossary.html#term-client-authentication"><em class="xref std std-term">client authentication</em></a>,
the <strong>Subject</strong> MUST be the <a class="reference internal" href="standard.html#term-client-id"><em class="xref std std-term">client_id</em></a> of the OAuth client.
When using <em class="xref std std-term">assertions</em> as an <em class="xref std std-term">authorization grant</em>,
the Subject SHOULD identify an authorized accessor
for whom the access token is being requested
(typically the resource owner, or an authorized delegate).
Additional information identifying the subject/principal of the transaction
MAY be included in an <strong>&lt;AttributeStatement&gt;</strong>.</p>
</li>
<li><p class="first">The <a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">Assertion</em></a> MUST have an expiry that limits the time window
during which it can be used.
The expiry can be expressed either as the NotOnOrAfter attribute of
the <strong>&lt;Conditions&gt;</strong> element or as the <strong>NotOnOrAfter</strong> attribute of a suitable
<strong>&lt;SubjectConfirmationData&gt;</strong> element.</p>
</li>
<li><p class="first">The <strong>&lt;Subject&gt;</strong> element MUST contain at least one <strong>&lt;SubjectConfirmation&gt;</strong> element
that allows the <a class="reference internal" href="oauth.html#term-authorization-server"><em class="xref std std-term">authorization server</em></a> to confirm it as a <em class="xref std std-term">Bearer Assertion</em>.
Such a <strong>&lt;SubjectConfirmation&gt;</strong> element MUST have a <strong>Method</strong> attribute
with a value of &#8220;<strong>urn:oasis:names:tc:SAML:2.0:cm:bearer</strong>&#8221;.
The <strong>&lt;SubjectConfirmation&gt;</strong> element MUST contain
a <strong>&lt;SubjectConfirmationData&gt;</strong> element,
unless the <a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">Assertion</em></a> has a suitable <strong>NotOnOrAfter</strong> attribute
on the <strong>&lt;Conditions&gt;</strong> element,
in which case the <strong>&lt;SubjectConfirmationData&gt;</strong> element MAY be omitted.
When present, the <strong>&lt;SubjectConfirmationData&gt;</strong> element MUST have a
<strong>Recipient</strong> attribute with a value indicating the <em class="xref std std-term">token endpoint</em> URL
of the <a class="reference internal" href="oauth.html#term-authorization-server"><em class="xref std std-term">authorization server</em></a>.</p>
<p>The <a class="reference internal" href="oauth.html#term-authorization-server"><em class="xref std std-term">authorization server</em></a> MUST verify
that the value of the <strong>Recipient</strong> attribute matches
the <em class="xref std std-term">token endpoint</em> URL (or an acceptable alias)
to which the <a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">Assertion</em></a> was delivered.</p>
<p>The <strong>&lt;SubjectConfirmationData&gt;</strong> element MUST have a
<strong>NotOnOrAfter</strong> attribute that limits the window during which the
<a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">Assertion</em></a> can be confirmed.</p>
<p>The <strong>&lt;SubjectConfirmationData&gt;</strong> element
MAY also contain an <strong>Address</strong> attribute limiting the <a class="reference internal" href="uma_core.html#term-client"><em class="xref std std-term">client</em></a> address
from which the <a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">Assertion</em></a> can be delivered.
Verification of the <strong>Address</strong> is at the discretion of the <a class="reference internal" href="oauth.html#term-authorization-server"><em class="xref std std-term">authorization server</em></a>.</p>
</li>
<li><p class="first">The <a class="reference internal" href="oauth.html#term-authorization-server"><em class="xref std std-term">authorization server</em></a> MUST verify that occurrences of the
<strong>NotOnOrAfter</strong> instant has not passed,
subject to allowable clock skew between systems.
An invalid <strong>NotOnOrAfter</strong> instant on the <strong>&lt;Conditions&gt;</strong> element
invalidates the entire <a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">assertion</em></a>.</p>
<p>An invalid <strong>NotOnOrAfter</strong> instant on a <strong>&lt;SubjectConfirmationData&gt;</strong> element only
invalidates the individual <strong>&lt;SubjectConfirmation&gt;</strong>.
The <strong>authorization server</strong> MAY reject <em class="xref std std-term">assertions</em> with a <strong>NotOnOrAfter</strong>
instant that is unreasonably far in the future.
The <a class="reference internal" href="oauth.html#term-authorization-server"><em class="xref std std-term">authorization server</em></a> MAY ensure that <em class="xref std std-term">Bearer Assertions</em> are not replayed,
by maintaining the set of <strong>used ID</strong> values for the length of time for
which the <a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">Assertion</em></a> would be considered valid
based on the applicable <strong>NotOnOrAfter</strong> instant.</p>
</li>
<li><p class="first">If the <a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">Assertion</em></a> issuer authenticated the subject,
the Assertion SHOULD contain a single <strong>&lt;AuthnStatement&gt;</strong>
representing that authentication event.</p>
</li>
<li><p class="first">If the <a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">Assertion</em></a> was issued with the intention that
the presenter act autonomously on behalf of the subject,
an <strong>&lt;AuthnStatement&gt;</strong> SHOULD NOT be included.</p>
<p>The presenter SHOULD be identified in the <strong>&lt;NameID&gt;</strong> or similar element,
the <strong>&lt;SubjectConfirmation&gt;</strong> element, or
by other available means like [OASIS.saml-deleg-cs].</p>
</li>
<li><p class="first">Other statements, in particular <strong>&lt;AttributeStatement&gt;</strong> elements, MAY
be included in the <em class="xref std std-ref">Assertion</em>.</p>
</li>
<li><p class="first">The <a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">Assertion</em></a> MUST be digitally signed by the <a class="reference internal" href="uma_core.html#term-27"><em class="xref std std-term">issuer</em></a> and the
<a class="reference internal" href="oauth.html#term-authorization-server"><em class="xref std std-term">authorization server</em></a> MUST verify the signature.</p>
</li>
<li><p class="first">Encrypted elements MAY appear in place of their plain text
counterparts as defined in [OASIS.saml-core-2.0-os].</p>
</li>
<li><p class="first">The <a class="reference internal" href="oauth.html#term-authorization-server"><em class="xref std std-term">authorization server</em></a> MUST verify that the <a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">Assertion</em></a> is valid
in all other respects per [OASIS.saml-core-2.0-os],
such as (but not limited to) evaluating all content within the <strong>Conditions</strong>
element including the <strong>NotOnOrAfter</strong> and <strong>NotBefore</strong> attributes,
rejecting unknown condition types, etc.</p>
</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<table border="1" class="last docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>SAML</td>
<td>OAuth/Connect</td>
</tr>
<tr class="row-even"><td>&lt;Issser&gt;</td>
<td>iss</td>
</tr>
<tr class="row-odd"><td>&lt;AudienceRestriction&gt;</td>
<td>aud</td>
</tr>
<tr class="row-even"><td>&lt;Subject&gt;</td>
<td>user_id (grant) / client_id(client authentication)</td>
</tr>
<tr class="row-odd"><td>&lt;SubjectConfirmationData NotOnOrAfter /&gt;</td>
<td>expires_in</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="authorization-grant-processing">
<span id="oauth-saml2-bearer-3-1"></span><h3><a class="toc-backref" href="#id8">3.1.  Authorization Grant Processing</a><a class="headerlink" href="#authorization-grant-processing" title="Permalink to this headline">¶</a></h3>
<p>If present, the <a class="reference internal" href="oauth.html#term-authorization-server"><em class="xref std std-term">authorization server</em></a> MUST also validate
the <a class="reference internal" href="glossary.html#term-client-credentials"><em class="xref std std-term">client credentials</em></a>.</p>
<p><a class="reference internal" href="oauth.html#term-authorization-servers"><em class="xref std std-term">Authorization servers</em></a> SHOULD issue <a class="reference internal" href="glossary.html#term-access-tokens"><em class="xref std std-term">access tokens</em></a> with a limited
lifetime and require clients to refresh them by requesting a new <a class="reference internal" href="glossary.html#term-access-token"><em class="xref std std-term">access token</em></a>
using the same <a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">assertion</em></a>,
if it is still valid, or with a new <a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">assertion</em></a>.
The <a class="reference internal" href="oauth.html#term-authorization-server"><em class="xref std std-term">authorization server</em></a> SHOULD NOT issue a <a class="reference internal" href="glossary.html#term-refresh-token"><em class="xref std std-term">refresh token</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">No refresh token!</p>
</div>
<p>If the <a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">Assertion</em></a> is not valid, or its subject confirmation
requirements cannot be met,
the <a class="reference internal" href="oauth.html#term-authorization-server"><em class="xref std std-term">authorization server</em></a> MUST construct an error response
as defined in [I-D.ietf.oauth-v2].</p>
<p>The value of the error parameter MUST be the &#8220;invalid_grant&#8221; error code.
The <a class="reference internal" href="oauth.html#term-authorization-server"><em class="xref std std-term">authorization server</em></a> MAY include additional information
regarding the reasons the <a class="reference internal" href="oauth_assertion.html#term-assertion"><em class="xref std std-term">Assertion</em></a> was considered invalid
using the <a class="reference internal" href="standard.html#term-error-description"><em class="xref std std-term">error_description</em></a> or <a class="reference internal" href="standard.html#term-error-uri"><em class="xref std std-term">error_uri</em></a> parameters.</p>
<p>For example:</p>
<div class="highlight-python"><pre>HTTP/1.1 400 Bad Request
Content-Type: application/json
Cache-Control: no-store

{
  "error":"invalid_grant",
  "error_description":"Audience validation failed"
}</pre>
</div>
<p>(Draft 10, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-oauth-saml2-bearer-10#section-3.1">http://tools.ietf.org/html/draft-ietf-oauth-saml2-bearer-10#section-3.1</a> )</p>
</div>
<div class="section" id="client-authentication-processing">
<span id="oauth-saml2-bearer-3-2"></span><h3><a class="toc-backref" href="#id9">3.2.  Client Authentication Processing</a><a class="headerlink" href="#client-authentication-processing" title="Permalink to this headline">¶</a></h3>
<p>If the client Assertion is not valid,
or its subject confirmation requirements cannot be met,
the authorization server MUST construct an error response as defined in [I-D.ietf.oauth-v2].
The value of the error parameter MUST be the &#8220;invalid_client&#8221; error code.
The authorization server MAY include additional information
regarding the reasons the Assertion was considered invalid
using the error_description or error_uri parameters.</p>
<p>(Draft 10, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-oauth-saml2-bearer-10#section-3.2">http://tools.ietf.org/html/draft-ietf-oauth-saml2-bearer-10#section-3.2</a> )</p>
</div>
</div>
<div class="section" id="references">
<span id="oauth-saml2-bearer-7"></span><h2><a class="toc-backref" href="#id10">7. References</a><a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<div class="section" id="normative-references">
<span id="oauth-saml2-bearer-7-1"></span><h3><a class="toc-backref" href="#id11">7.1. Normative References</a><a class="headerlink" href="#normative-references" title="Permalink to this headline">¶</a></h3>
<dl class="glossary docutils">
<dt id="term-i-d-ietf-oauth-assertions">[I-D.ietf-oauth-assertions]</dt>
<dd>Campbell, B., Mortimore, C., Jones, M., and Y. Goland,
&#8220;<a class="reference internal" href="oauth_assertion.html"><em>Assertion Framework for OAuth 2.0</em></a>&#8221;,
draft-ietf-oauth-assertions-06 (work in progress),
September 2012.</dd>
<dt id="term-oasis-saml-core-2-0-os">[OASIS.saml-core-2.0-os]</dt>
<dd>Cantor, S., Kemp, J., Philpott, R., and E. Maler,
&#8220;Assertions and Protocol for the OASIS Security Assertion
Markup Language (SAML) V2.0&#8221;, OASIS Standard saml-core-
2.0-os, March 2005.</dd>
<dt id="term-rfc2119">[RFC2119]</dt>
<dd>Bradner, S., &#8220;Key words for use in RFCs to Indicate
Requirement Levels&#8221;, BCP 14, RFC 2119, March 1997.</dd>
<dt id="term-rfc4648">[RFC4648]</dt>
<dd>Josefsson, S., &#8220;The Base16, Base32, and Base64 Data
Encodings&#8221;, RFC 4648, October 2006.</dd>
<dt id="term-rfc6749">[RFC6749]</dt>
<dd>Hardt, D., &#8220;The OAuth 2.0 Authorization Framework&#8221;,
RFC 6749, October 2012.</dd>
<dt id="term-rfc6755">[RFC6755]</dt>
<dd>Campbell, B. and H. Tschofenig, &#8220;An IETF URN Sub-Namespace
for OAuth&#8221;, RFC 6755, October 2012.</dd>
</dl>
<p>(draft 15, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-oauth-saml2-bearer-15#section-7.1">http://tools.ietf.org/html/draft-ietf-oauth-saml2-bearer-15#section-7.1</a> )</p>
</div>
<div class="section" id="informative-references">
<span id="oauth-saml2-bearer-7-2"></span><h3><a class="toc-backref" href="#id12">7.2. Informative References</a><a class="headerlink" href="#informative-references" title="Permalink to this headline">¶</a></h3>
<dl class="glossary docutils">
<dt id="term-oasis-saml-deleg-cs">[OASIS.saml-deleg-cs]</dt>
<dd>Cantor, S., Ed., &#8220;SAML V2.0 Condition for Delegation
Restriction&#8221;, Nov 2009.</dd>
<dt id="term-oasis-saml-profiles-2-0-os">[OASIS.saml-profiles-2.0-os]</dt>
<dd>Hughes, J., Cantor, S., Hodges, J., Hirsch, F., Mishra,
P., Philpott, R., and E. Maler, &#8220;Profiles for the OASIS
Security Assertion Markup Language (SAML) V2.0&#8221;, OASIS
Standard OASIS.saml-profiles-2.0-os, March 2005.</dd>
<dt id="term-oasis-saml-sec-consider-2-0-os">[OASIS.saml-sec-consider-2.0-os]</dt>
<dd>Hirsch, F., Philpott, R., and E. Maler, &#8220;Security and
Privacy Considerations for the OASIS Security Markup
Language (SAML) V2.0&#8221;, OASIS Standard saml-sec-consider-
2.0-os, March 2005.</dd>
<dt id="term-w3c-rec-html401-19991224">[W3C.REC-html401-19991224]</dt>
<dd>Hors, A., Raggett, D., and I. Jacobs, &#8220;HTML 4.01
Specification&#8221;, World Wide Web Consortium
Recommendation REC-html401-19991224, December 1999,
&lt;<a class="reference external" href="http://www.w3.org/TR/1999/REC-html401-19991224">http://www.w3.org/TR/1999/REC-html401-19991224</a>&gt;.</dd>
</dl>
<p>(draft 15, <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-oauth-saml2-bearer-15#section-7.2">http://tools.ietf.org/html/draft-ietf-oauth-saml2-bearer-15#section-7.2</a> )</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
  <h2>HDKNR.COM</h2>
  
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2011, HDKNR.COM.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.<br/>
    </p>
  </div>
</footer>

  </body>
</html>