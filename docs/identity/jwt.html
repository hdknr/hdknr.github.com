
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>JSON Web Token (JWT) : draft22 &mdash; identity 1.0 documentation</title>
    
    <link rel="stylesheet" href="static/basic.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="static/bootstrap-3.0.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="static/bootstrap-3.0.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="static/openid.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <script type="text/javascript" src="static/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="static/bootstrap-sphinx.js"></script>
    <link rel="top" title="identity 1.0 documentation" href="index.html" />
    <link rel="next" title="JSON Web Signature (JWS) : draft28" href="jws.html" />
    <link rel="prev" title="JSON Web Algorithms (JWA) : draft30" href="jwa.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">identity</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a href="index.html"
     class="dropdown-toggle"
     data-toggle="dropdown">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
    ><ul>
<li class="toctree-l1"><a class="reference internal" href="oauth.html">RFC6759:The OAuth 2.0 Authorization Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_bearer.html">The OAuth 2.0 Authorization Framework: Bearer Token Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_threat.html">Auth 2.0 Threat Model and Security Considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_revocation.html">RFC7009:Token Revocation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="oauth_jwt_bearer.html">JSON Web Token (JWT) Bearer Token Profiles for OAuth 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_saml2_bearer.html">SAML 2.0 Bearer Assertion Profiles for OAuth 2.0</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="oauth_assertion.html">Assertion Framework for OAuth 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_mac.html">HTTP Authentication: MAC Access Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_reg.html">OAuth Dynamic Client Registration Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_introspect.html">OAuth Token Introspection</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_meta.html">JSON Metadata for OAuth Responses</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_res_reg.html">OAuth 2.0 Resource Set Registration</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth-lrdd.html">Link relation Type Registrations for OAuth 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_auth.html">OAuth 2.0 User Authentication and Consent For Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_responses.html">OAuth 2.0 Multiple Response Type Encoding Practices - draft 11</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_post.html">OAuth 2.0 Form Post Response Mode - draft 01</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="oauth_res.html">OAuth Resoure</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="openid_connect.html">OpenID Connect</a></li>
<li class="toctree-l1"><a class="reference internal" href="core.html">OpenID Connect Core 1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="reg.html">OpenID Connect Dynamic Client Registration 1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="discovery.html">OpenID Connect Discovery 1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="session.html">OpenID Connect Session Management 1.0</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="basic.html">OpenID Connect Basic Client Profile 1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="implicit.html">OpenID Connect Implicit Client Implementer&#8217;s Guide 1.0 - draft 14</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="standard.html">OpenID Connect Standard 1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="messages.html">OpenID Connect Messages 1.0</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="uma_core.html">User-Managed Access (UMA) Profile of OAuth 2.0 : draft09</a></li>
<li class="toctree-l1"><a class="reference internal" href="uma_trust.html">Binding Obligations on User-Managed Access (UMA) Participants</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="jose.html">Terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="jwa.html">JSON Web Algorithms (JWA) : draft30</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">JSON Web Token (JWT) : draft22</a></li>
<li class="toctree-l1"><a class="reference internal" href="jws.html">JSON Web Signature (JWS) : draft28</a></li>
<li class="toctree-l1"><a class="reference internal" href="jwe.html">JSON Web Encryption (JWE)(draft30)</a></li>
<li class="toctree-l1"><a class="reference internal" href="jwk.html">JSON Web Key (JWK) : draft30</a></li>
<li class="toctree-l1"><a class="reference internal" href="jose_usecase.html">RFC7165:Use Cases and Requirements for JSON Object Signing and Encryption (JOSE)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="jws_hok.html">Holder-of-Key JSON Web Signature (JWS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="jws_js.html">JSON Web Signature JSON Serialization (JWS-JS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="jwe_js.html">JSON Web Encryption JSON Serialization (JWE-JS)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="hostmeta.html">Web Host Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="webfinger.html">WebFinger</a></li>
<li class="toctree-l1"><a class="reference internal" href="swd.html">Simple Web Discovery (SWD)</a></li>
<li class="toctree-l1"><a class="reference internal" href="acct.html">The &#8216;acct&#8217; URI Scheme</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="rfc3394.html">RFC3394:Advanced Encryption Standard (AES) Key Wrap Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="nist-sp-800-59a.html">NIST SP 800-56A:Recommendation for Pair-Wise Key Establishment Schemes Using Discrete Logarithm Cryptography</a></li>
<li class="toctree-l1"><a class="reference internal" href="nist-sp-800-63.html">Electronic Authentication Guideline</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="backplane.html">Backplane</a></li>
<li class="toctree-l1"><a class="reference internal" href="backplane.html#backplane-2-0">Backplane 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="lrdd.html">LRDD: Link-based Resource Descriptor Discovery</a></li>
<li class="toctree-l1"><a class="reference internal" href="revoke.html">Token Revocation</a></li>
<li class="toctree-l1"><a class="reference internal" href="poco.html">Portable Contacts 1.0 Draft C</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Terms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="saml.html">SAML</a></li>
<li class="toctree-l1"><a class="reference internal" href="xacml.html">XACML</a></li>
<li class="toctree-l1"><a class="reference internal" href="shibboleth.html">Shibboleth</a></li>
<li class="toctree-l1"><a class="reference internal" href="SamlHokProfile.html">SAML V2.0 Holder-of-Key Assertion Profile Version 1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="SamlHokWebSsoProfile.html">SAML V2.0 Holder-of-Key Web Browser SSO Profile Version 1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="wss_saml_token_profile.html">Web Services Security SAML Token Profile Version 1.1.1</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="scim_rest.html">Simple Cloud Identity Management: Protocol 1.0 (REST API 1.0)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="active_directory.html">Active Directory &amp; Connect</a></li>
<li class="toctree-l1"><a class="reference internal" href="todo.html">TODO/TBD</a></li>
<li class="toctree-l1"><a class="reference internal" href="resource.html">Resource</a></li>
<li class="toctree-l1"><a class="reference internal" href="discussion.html">Discussion</a></li>
<li class="toctree-l1"><a class="reference internal" href="signed_nonce.html">Decoupling Identity and Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="adtech.html">AdTech</a></li>
<li class="toctree-l1"><a class="reference internal" href="technight_9.html">Technight #9</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="well-known.html">RFC5783: Defining Well-Known Uniform Resource Identifiers (URIs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="rfc5988.html">RFC5988:Web Linking</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="impl_id_token.html">ID Token:Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="impl_jws.html">JOSE JWS:Implementation</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">JSON Web Token (JWT) : draft22</a><ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#introduction">1.  Introduction</a></li>
<li><a class="reference internal" href="#terminology">2.  Terminology</a></li>
<li><a class="reference internal" href="#json-web-token-jwt-overview">3.  JSON Web Token (JWT) Overview</a><ul>
<li><a class="reference internal" href="#example-jwt">3.1.  Example JWT</a></li>
</ul>
</li>
<li><a class="reference internal" href="#jwt-claims">4.  JWT Claims</a><ul>
<li><a class="reference internal" href="#reserved-claim-names">4.1.  Reserved Claim Names</a><ul>
<li><a class="reference internal" href="#iss-issuer-claim">4.1.1.  &#8220;iss&#8221; (Issuer) Claim</a></li>
<li><a class="reference internal" href="#sub-subject-claim">4.1.2.  &#8220;sub&#8221; (Subject) Claim</a></li>
<li><a class="reference internal" href="#aud-audience-claim">4.1.3.  &#8220;aud&#8221; (Audience) Claim</a></li>
<li><a class="reference internal" href="#exp-expiration-time-claim">4.1.4.  &#8220;exp&#8221; (Expiration Time) Claim</a></li>
<li><a class="reference internal" href="#nbf-not-before-claim">4.1.5.  &#8220;nbf&#8221; (Not Before) Claim</a></li>
<li><a class="reference internal" href="#iat-issued-at-claim">4.1.6.  &#8220;iat&#8221; (Issued At) Claim</a></li>
<li><a class="reference internal" href="#jti-jwt-id-claim">4.1.7. &#8220;jti&#8221; (JWT ID) Claim</a></li>
</ul>
</li>
<li><a class="reference internal" href="#public-claim-names">4.2.  Public Claim Names</a></li>
<li><a class="reference internal" href="#private-claim-names">4.3.  Private Claim Names</a></li>
</ul>
</li>
<li><a class="reference internal" href="#jwt-header">5.  JWT Header</a><ul>
<li><a class="reference internal" href="#typ-type-header-parameter">5.1.  &#8220;typ&#8221; (Type) Header Parameter</a></li>
<li><a class="reference internal" href="#cty-content-type-header-parameter">5.2.  &#8220;cty&#8221; (Content Type) Header Parameter</a></li>
<li><a class="reference internal" href="#replicating-claims-as-header-parameters">5.3.  Replicating Claims as Header Parameters</a></li>
</ul>
</li>
<li><a class="reference internal" href="#plaintext-jwts">6.  Plaintext JWTs</a><ul>
<li><a class="reference internal" href="#example-plaintext-jwt">6.1. Example Plaintext JWT</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rules-for-creating-and-validating-a-jwt">7.  Rules for Creating and Validating a JWT</a></li>
<li><a class="reference internal" href="#implementation-requirements">8.  Implementation Requirements</a></li>
<li><a class="reference internal" href="#iana-considerations">9.  IANA Considerations</a></li>
<li><a class="reference internal" href="#jwt-10">10.  IANA Considerations</a><ul>
<li><a class="reference internal" href="#json-web-token-claims-registry">10.1.  JSON Web Token Claims Registry</a></li>
</ul>
</li>
<li><a class="reference internal" href="#security-considerations">11.  Security Considerations</a><ul>
<li><a class="reference internal" href="#trust-decisions">11.1.  Trust Decisions</a></li>
<li><a class="reference internal" href="#signing-and-encryption-order">11.2.  Signing and Encryption Order</a></li>
</ul>
</li>
<li><a class="reference internal" href="#references">12.  References</a><ul>
<li><a class="reference internal" href="#normative-references">12.1. Normative References</a></li>
<li><a class="reference internal" href="#informative-references">12.2. Informative References</a></li>
</ul>
</li>
<li><a class="reference internal" href="#appendix-a-jwt-examples">Appendix A. JWT Examples</a><ul>
<li><a class="reference internal" href="#a-1-example-encrypted-jwt">A.1. Example Encrypted JWT</a></li>
<li><a class="reference internal" href="#a-2-example-nested-jwt">A.2.  Example Nested JWT</a></li>
</ul>
</li>
<li><a class="reference internal" href="#appendix-b-relationship-of-jwts-to-simple-web-tokens-swts">Appendix B.  Relationship of JWTs to Simple Web Tokens (SWTs)</a></li>
<li><a class="reference internal" href="#appendix-c-acknowledgements">Appendix C.  Acknowledgements</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li><a href="jwa.html"
         title="Previous Chapter: JSON Web Algorithms (JWA) : draft30">&laquo; JSON Web Algorit...</a></li>
  <li><a href="jws.html"
         title="Next Chapter: JSON Web Signature (JWS) : draft28">JSON Web Signatu... &raquo;</a></li>
              
            
            
            
            
              <li>
<div id="sourcelink">
  <a href="sources/jwt.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="json-web-token-jwt-draft22">
<span id="jwt-head"></span><h1>JSON Web Token (JWT) : draft22<a class="headerlink" href="#json-web-token-jwt-draft22" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li><a class="reference external" href="https://tools.ietf.org/html/draft-ietf-oauth-json-web-token-22">https://tools.ietf.org/html/draft-ietf-oauth-json-web-token-22</a></li>
</ul>
</div>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#abstract" id="id6">Abstract</a></li>
<li><a class="reference internal" href="#introduction" id="id7">1.  Introduction</a></li>
<li><a class="reference internal" href="#terminology" id="id8">2.  Terminology</a></li>
<li><a class="reference internal" href="#json-web-token-jwt-overview" id="id9">3.  JSON Web Token (JWT) Overview</a><ul>
<li><a class="reference internal" href="#example-jwt" id="id10">3.1.  Example JWT</a></li>
</ul>
</li>
<li><a class="reference internal" href="#jwt-claims" id="id11">4.  JWT Claims</a><ul>
<li><a class="reference internal" href="#reserved-claim-names" id="id12">4.1.  Reserved Claim Names</a><ul>
<li><a class="reference internal" href="#iss-issuer-claim" id="id13">4.1.1.  &#8220;iss&#8221; (Issuer) Claim</a></li>
<li><a class="reference internal" href="#sub-subject-claim" id="id14">4.1.2.  &#8220;sub&#8221; (Subject) Claim</a></li>
<li><a class="reference internal" href="#aud-audience-claim" id="id15">4.1.3.  &#8220;aud&#8221; (Audience) Claim</a></li>
<li><a class="reference internal" href="#exp-expiration-time-claim" id="id16">4.1.4.  &#8220;exp&#8221; (Expiration Time) Claim</a></li>
<li><a class="reference internal" href="#nbf-not-before-claim" id="id17">4.1.5.  &#8220;nbf&#8221; (Not Before) Claim</a></li>
<li><a class="reference internal" href="#iat-issued-at-claim" id="id18">4.1.6.  &#8220;iat&#8221; (Issued At) Claim</a></li>
<li><a class="reference internal" href="#jti-jwt-id-claim" id="id19">4.1.7. &#8220;jti&#8221; (JWT ID) Claim</a></li>
</ul>
</li>
<li><a class="reference internal" href="#public-claim-names" id="id20">4.2.  Public Claim Names</a></li>
<li><a class="reference internal" href="#private-claim-names" id="id21">4.3.  Private Claim Names</a></li>
</ul>
</li>
<li><a class="reference internal" href="#jwt-header" id="id22">5.  JWT Header</a><ul>
<li><a class="reference internal" href="#typ-type-header-parameter" id="id23">5.1.  &#8220;typ&#8221; (Type) Header Parameter</a></li>
<li><a class="reference internal" href="#cty-content-type-header-parameter" id="id24">5.2.  &#8220;cty&#8221; (Content Type) Header Parameter</a></li>
<li><a class="reference internal" href="#replicating-claims-as-header-parameters" id="id25">5.3.  Replicating Claims as Header Parameters</a></li>
</ul>
</li>
<li><a class="reference internal" href="#plaintext-jwts" id="id26">6.  Plaintext JWTs</a><ul>
<li><a class="reference internal" href="#example-plaintext-jwt" id="id27">6.1. Example Plaintext JWT</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rules-for-creating-and-validating-a-jwt" id="id28">7.  Rules for Creating and Validating a JWT</a></li>
<li><a class="reference internal" href="#implementation-requirements" id="id29">8.  Implementation Requirements</a></li>
<li><a class="reference internal" href="#iana-considerations" id="id30">9.  IANA Considerations</a></li>
<li><a class="reference internal" href="#jwt-10" id="id31">10.  IANA Considerations</a><ul>
<li><a class="reference internal" href="#json-web-token-claims-registry" id="id32">10.1.  JSON Web Token Claims Registry</a></li>
</ul>
</li>
<li><a class="reference internal" href="#security-considerations" id="id33">11.  Security Considerations</a><ul>
<li><a class="reference internal" href="#trust-decisions" id="id34">11.1.  Trust Decisions</a></li>
<li><a class="reference internal" href="#signing-and-encryption-order" id="id35">11.2.  Signing and Encryption Order</a></li>
</ul>
</li>
<li><a class="reference internal" href="#references" id="id36">12.  References</a><ul>
<li><a class="reference internal" href="#normative-references" id="id37">12.1. Normative References</a></li>
<li><a class="reference internal" href="#informative-references" id="id38">12.2. Informative References</a></li>
</ul>
</li>
<li><a class="reference internal" href="#appendix-a-jwt-examples" id="id39">Appendix A. JWT Examples</a><ul>
<li><a class="reference internal" href="#a-1-example-encrypted-jwt" id="id40">A.1. Example Encrypted JWT</a></li>
<li><a class="reference internal" href="#a-2-example-nested-jwt" id="id41">A.2.  Example Nested JWT</a></li>
</ul>
</li>
<li><a class="reference internal" href="#appendix-b-relationship-of-jwts-to-simple-web-tokens-swts" id="id42">Appendix B.  Relationship of JWTs to Simple Web Tokens (SWTs)</a></li>
<li><a class="reference internal" href="#appendix-c-acknowledgements" id="id43">Appendix C.  Acknowledgements</a></li>
</ul>
</div>
<div class="section" id="abstract">
<span id="jwt-abstract"></span><h2><a class="toc-backref" href="#id6">Abstract</a><a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h2>
<p>JSON Web Token (JWT) is
a compact URL-safe means of representing claims to be transferred between two parties.
The claims in a JWT are encoded as a JavaScript Object Notation (JSON) object
that is used as the <strong>payload</strong> of a JSON Web Signature (JWS) structure or
as the <strong>plaintext</strong> of a JSON Web Encryption (JWE) structure,
enabling the claims to be digitally signed or MACed and/or encrypted.</p>
<p>The suggested pronunciation of JWT is the same as the English word &#8220;jot&#8221;.</p>
<p>(<a class="reference external" href="https://tools.ietf.org/html/draft-ietf-oauth-json-web-token-11">https://tools.ietf.org/html/draft-ietf-oauth-json-web-token-11</a>)</p>
</div>
<div class="section" id="introduction">
<span id="jwt-1"></span><h2><a class="toc-backref" href="#id7">1.  Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>JSON Web Token (JWT) is a compact token format intended for space constrained environments
such as HTTP <a class="reference internal" href="glossary.html#term-authorization-headers"><em class="xref std std-term">Authorization headers</em></a> and <a class="reference internal" href="glossary.html#term-uri-query-parameters"><em class="xref std std-term">URI query parameters</em></a>.
JWTs encode <a class="reference internal" href="messages.html#term-84"><em class="xref std std-term">claims</em></a> to be transmitted as a <a class="reference internal" href="glossary.html#term-json"><em class="xref std std-term">JSON</em></a> object (as defined in RFC 4627 [<span class="target" id="index-0"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc4627.html"><strong>RFC 4627</strong></a>])
that is <a class="reference internal" href="session.html#term-base64url"><em class="xref std std-term">base64url</em></a> encoded and digitally signed and/or encrypted.
Signing is accomplished using JSON Web Signature (JWS) [:term::<cite>JWS</cite>].
Encryption is accomplished using JSON Web Encryption (JWE) [<a class="reference internal" href="messages.html#term-jwe"><em class="xref std std-term">JWE</em></a>].</p>
<p>The suggested pronunciation of JWT is the same as the English word &#8220;jot&#8221;.</p>
<p>(v.06)</p>
</div>
<div class="section" id="terminology">
<span id="jwt-2"></span><h2><a class="toc-backref" href="#id8">2.  Terminology</a><a class="headerlink" href="#terminology" title="Permalink to this headline">¶</a></h2>
<dl class="glossary docutils">
<dt id="term-json-web-token-jwt"><span id="term-json-web-token"></span><span id="term-jwt"></span>JSON Web Token (JWT)<br />JSON Web Token<br />JWT</dt>
<dd>A string representing a set of claims as a JSON object
that is encoded in a <a class="reference internal" href="jws.html"><em>JWS</em></a> or <a class="reference internal" href="jwe.html"><em>JWE</em></a>,
enabling the claims to be digitally signed or MACed and/or encrypted.</dd>
<dt id="term-base64url-encoding">Base64url Encoding</dt>
<dd><p class="first">Base64 encoding using the URL- and filename-safe character set
defined in Section 5 of <span class="target" id="index-1"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc4648.html"><strong>RFC 4648</strong></a> [RFC4648],
with all trailing &#8216;=&#8217; characters omitted
(as permitted by <em class="xref std std-ref">Section 3.2</em>)
and without the inclusion of any line breaks, white space,
or other additional characters.</p>
<p class="last">(See <a class="reference internal" href="jws.html#jws-appendix-c"><em>Appendix C</em></a> of [JWS]
for notes on implementing base64url encoding without padding.)</p>
</dd>
<dt id="term-jwt-header">JWT Header</dt>
<dd><p class="first">A JSON object that describes the cryptographic operations
applied to the JWT.</p>
<p>When the JWT is digitally signed or MACed,
the JWT Header is a JWS Header.</p>
<p class="last">When the JWT is encrypted, the JWT Header is a JWE Header.</p>
</dd>
<dt id="term-header-parameter">Header Parameter</dt>
<dd>A name/value pair that is member of the JWT Header.</dd>
<dt id="term-header-parameter-name">Header Parameter Name</dt>
<dd>The name of a member of the JWT Header.</dd>
<dt id="term-header-parameter-value">Header Parameter Value</dt>
<dd>The value of a member of the JSON object
representing a JWT Header.</dd>
<dt id="term-jwt-claims-set">JWT Claims Set</dt>
<dd>A JSON object that contains the Claims conveyed by the JWT.</dd>
<dt id="term-claim">Claim</dt>
<dd><p class="first">A piece of information asserted about a subject.</p>
<p class="last">A Claim is represented as a name/value pair
consisting of a Claim Name and a Claim Value.</p>
</dd>
<dt id="term-claim-name">Claim Name</dt>
<dd><p class="first">The name portion of a Claim representation.</p>
<p class="last">A Claim Name is always a string.</p>
</dd>
<dt id="term-claim-value">Claim Value</dt>
<dd><p class="first">The value portion of a Claim representation.</p>
<p class="last">A Claim Value can be any JSON value.</p>
</dd>
<dt id="term-encoded-jwt-header">Encoded JWT Header</dt>
<dd>Base64url encoding of the JWT Header.</dd>
<dt id="term-nested-jwt">Nested JWT</dt>
<dd><p class="first">A JWT in which nested signing and/or encryption are employed.</p>
<p class="last">In nested JWTs,
a JWT is used as the payload or plaintext value of an
enclosing JWS or JWE structure, respectively.</p>
</dd>
<dt id="term-collision-resistant-namespace">Collision Resistant Namespace</dt>
<dd><p class="first">A name in a namespace that enables names to be allocated
in a manner such that they are highly unlikely to collide
with other names.</p>
<p>Examples of collision-resistant namespaces include:
Domain Names, Object Identifiers (OIDs) as defined
in the ITU-T X.660 and X.670 Recommendation series,
and Universally Unique IDentifiers (UUIDs) <a class="reference internal" href="jwe.html#term-rfc4122"><em class="xref std std-term">[RFC4122]</em></a>.</p>
<p class="last">When using an administratively delegated namespace,
the definer of a name needs to take reasonable
precautions to ensure they are
in control of the portion of the namespace
they use to define the name.</p>
</dd>
<dt id="term-stringoruri">StringOrURI</dt>
<dd>A JSON string value, with the additional requirement
that while arbitrary string values MAY be used, any value
containing a &#8221;:&#8221; character MUST be a URI [RFC3986].  StringOrURI
values are compared as case-sensitive strings with no
transformations or canonicalizations applied.</dd>
<dt id="term-intdate">IntDate</dt>
<dd><p class="first">A JSON numeric value representing the number of seconds from
1970-01-01T0:0:0Z UTC until the specified UTC date/time.</p>
<p class="last">See <span class="target" id="index-2"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc3339.html"><strong>RFC 3339</strong></a> <a class="reference internal" href="core.html#term-rfc3339"><em class="xref std std-term">[RFC3339]</em></a> for details regarding date/times
in general and UTC in particular.</p>
</dd>
</dl>
<p>(draft19)</p>
</div>
<div class="section" id="json-web-token-jwt-overview">
<span id="jwt-overview"></span><span id="jwt-3"></span><h2><a class="toc-backref" href="#id9">3.  JSON Web Token (JWT) Overview</a><a class="headerlink" href="#json-web-token-jwt-overview" title="Permalink to this headline">¶</a></h2>
<p>JWTs represent a set of claims as a JSON object that is encoded in a
JWS and/or JWE structure.  This JSON object is the JWT Claims Set. As
per Section 4 of RFC 7159 [RFC7159], the JSON object consists of zero
or more name/value pairs (or members), where the names are strings
and the values are arbitrary JSON values.  These members are the
claims represented by the JWT.</p>
<p>The member names within the JWT Claims Set are referred to as Claim
Names.  The corresponding values are referred to as Claim Values.</p>
<p>The contents of the JOSE Header describe the cryptographic operations
applied to the JWT Claims Set. If the JOSE Header is for a JWS
object, the JWT is represented as a JWS, and the claims are digitally
signed or MACed, with the JWT Claims Set being the JWS Payload.  If
the JOSE Header is for a JWE object, the JWT is represented as a JWE,
and the claims are encrypted, with the JWT Claims Set being the JWE
Plaintext.  A JWT may be enclosed in another JWE or JWS structure to
create a Nested JWT, enabling nested signing and encryption to be
performed.</p>
<p>A JWT is represented as a sequence of URL-safe parts separated by
period (&#8216;.&#8217;) characters.  Each part contains a base64url encoded
value.  The number of parts in the JWT is dependent upon the
representation of the resulting JWS or JWE object using the JWS
Compact Serialization or the JWE Compact Serialization.</p>
<p>(draft30)</p>
<div class="section" id="example-jwt">
<span id="jwt-3-1"></span><h3><a class="toc-backref" href="#id10">3.1.  Example JWT</a><a class="headerlink" href="#example-jwt" title="Permalink to this headline">¶</a></h3>
<p>The following example JWT Header declares that the encoded object is
a JSON Web Token (JWT) and the JWT is a JWS that is MACed using the
HMAC SHA-256 algorithm:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span><span class="s2">&quot;typ&quot;</span><span class="o">:</span><span class="s2">&quot;JWT&quot;</span><span class="p">,</span>
 <span class="s2">&quot;alg&quot;</span><span class="o">:</span><span class="s2">&quot;HS256&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>To remove potential ambiguities in the representation
of the JSON object above,
the octet sequence for the actual UTF-8 representation
used in this example for the JWT Header/JWS Header above
is also included below.</p>
<p>(Note that ambiguities can arise due to differing
platform representations of line breaks (CRLF versus LF), differing
spacing at the beginning and ends of lines, whether the last line has
a terminating line break or not, and other causes.  In the
representation used in this example, the first line has no leading or
trailing spaces, a CRLF line break (13, 10) occurs between the first
and second lines, the second line has one leading space (32) and no
trailing spaces, and the last line does not have a terminating line
break.)</p>
<p>The octets representing the UTF-8 representation of the JWS
Header in this example (using JSON array notation) are:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span><span class="mi">123</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">116</span><span class="p">,</span> <span class="mi">121</span><span class="p">,</span> <span class="mi">112</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">74</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="mi">84</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span>
<span class="mi">34</span><span class="p">,</span> <span class="mi">97</span><span class="p">,</span> <span class="mi">108</span><span class="p">,</span> <span class="mi">103</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">83</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">54</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">125</span><span class="p">]</span>
</pre></div>
</div>
<p>Base64url encoding the octets of the UTF-8 representation of the JWT
Header yields this Encoded JWT Header value (which is also the
underlying encoded JWS Header value):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">eyJ0eXAiOiJKV1QiLA0KICJhbGciOiJIUzI1NiJ9</span>
</pre></div>
</div>
<p>The following is an example of a JWT Claims Set:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span><span class="s2">&quot;iss&quot;</span><span class="o">:</span><span class="s2">&quot;joe&quot;</span><span class="p">,</span>
 <span class="s2">&quot;exp&quot;</span><span class="o">:</span><span class="mi">1300819380</span><span class="p">,</span>
 <span class="s2">&quot;http://example.com/is_root&quot;</span><span class="o">:</span><span class="kc">true</span><span class="p">}</span>
</pre></div>
</div>
<p>The following octet sequence, which is the UTF-8 representation used
in this example for the JWT Claims Set above, is the JWS Payload:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span><span class="mi">123</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">105</span><span class="p">,</span> <span class="mi">115</span><span class="p">,</span> <span class="mi">115</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">106</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span>
<span class="mi">32</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">112</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">57</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span>
<span class="mi">48</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">104</span><span class="p">,</span> <span class="mi">116</span><span class="p">,</span> <span class="mi">116</span><span class="p">,</span> <span class="mi">112</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">97</span><span class="p">,</span>
<span class="mi">109</span><span class="p">,</span> <span class="mi">112</span><span class="p">,</span> <span class="mi">108</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">46</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="mi">109</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="mi">105</span><span class="p">,</span> <span class="mi">115</span><span class="p">,</span> <span class="mi">95</span><span class="p">,</span> <span class="mi">114</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span>
<span class="mi">111</span><span class="p">,</span> <span class="mi">116</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">116</span><span class="p">,</span> <span class="mi">114</span><span class="p">,</span> <span class="mi">117</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">125</span><span class="p">]</span>
</pre></div>
</div>
<p>Base64url encoding the JWS Payload yields this encoded JWS Payload
(with line breaks for display purposes only):</p>
<div class="highlight-python"><pre>eyJpc3MiOiJqb2UiLA0KICJleHAiOjEzMDA4MTkzODAsDQogImh0dHA6Ly
9leGFtcGxlLmNvbS9pc19yb290Ijp0cnVlfQ</pre>
</div>
<p>with the HMAC SHA-256 algorithm and base64url encoding the HMAC value
in the manner specified in [JWS], yields this encoded JWS Signature:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">dBjftJeZ4CVP</span><span class="o">-</span><span class="n">mB92K27uhbUJU1p1r_wW1gFWFOEjXk</span>
</pre></div>
</div>
<p>Concatenating these encoded parts in this order with period (&#8216;.&#8217;)
characters between the parts yields this complete JWT (with line
breaks for display purposes only):</p>
<div class="highlight-python"><pre>eyJ0eXAiOiJKV1QiLA0KICJhbGciOiJIUzI1NiJ9
.
eyJpc3MiOiJqb2UiLA0KICJleHAiOjEzMDA4MTkzODAsDQogImh0dHA6Ly9leGFt
cGxlLmNvbS9pc19yb290Ijp0cnVlfQ
.
dBjftJeZ4CVP-mB92K27uhbUJU1p1r_wW1gFWFOEjXk</pre>
</div>
<p>This computation is illustrated in more detail
in <a href="#id1"><span class="problematic" id="id2">:ret:`Appendix A.1 &lt;jws.appendix.a.1&gt;`</span></a> of [JWS].
See <a class="reference internal" href="jwe.html#jwe-appendix-a-1"><em>Appendix A.1</em></a> for an example of an encrypted JWT.</p>
<p>(draft21)</p>
</div>
</div>
<div class="section" id="jwt-claims">
<span id="jwt-4"></span><span id="id3"></span><h2><a class="toc-backref" href="#id11">4.  JWT Claims</a><a class="headerlink" href="#jwt-claims" title="Permalink to this headline">¶</a></h2>
<p>The JWT Claims Set represents
a JSON object whose members are the claims conveyed by the JWT.</p>
<p>The Claim Names within a JWT Claims Set MUST be unique;
recipients MUST either reject JWTs with duplicate Claim Names
or use a JSON parser that returns only the lexically last
duplicate member name,
as specified in Section 15.12 (The JSON Object) of
ECMAScript 5.1 <a class="reference internal" href="jwk.html#term-ecmascript"><em class="xref std std-term">[ECMAScript]</em></a>.</p>
<p>The set of claims that a JWT must contain to be considered valid
is <strong>context-dependent</strong> and is outside the scope of this specification.</p>
<p>Specific applications of JWTs will require implementations
to understand and process some claims in particular ways.</p>
<p>However,
in the absence of such requirements,
all claims that are not understood by implementations SHOULD be ignored.</p>
<p>There are three classes of JWT Claim Names: Registered Claim Names,
Public Claim Names, and Private Claim Names.</p>
<p>(draft16)</p>
<div class="section" id="reserved-claim-names">
<span id="jwt-reserved-claim"></span><span id="jwt-4-1"></span><h3><a class="toc-backref" href="#id12">4.1.  Reserved Claim Names</a><a class="headerlink" href="#reserved-claim-names" title="Permalink to this headline">¶</a></h3>
<p>The following claim names are reserved.</p>
<p>None of the claims defined below are intended to be mandatory,
but rather, provide a starting point for a set of useful, interoperable claims.</p>
<p>All the names are short because a core goal of JWTs is for the tokens to be <strong>compact</strong>.</p>
<p>Additional reserved claim names MAY be defined via the IANA JSON Web Token Claims registry <em class="xref std std-ref">Section 9.1</em>.</p>
<p>(draft 05)</p>
<table border="1" class="docutils" id="jwt-table-1">
<caption>Table 1: Reserved Claim Definitions</caption>
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Claim</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#jwt-4-1-1"><em>4.1.1.  &#8220;iss&#8221; (Issuer) Claim</em></a></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#jwt-4-1-2"><em>4.1.2.  &#8220;sub&#8221; (Subject) Claim</em></a></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#jwt-4-1-3"><em>4.1.3.  &#8220;aud&#8221; (Audience) Claim</em></a></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#jwt-4-1-4"><em>4.1.4.  &#8220;exp&#8221; (Expiration Time) Claim</em></a></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#jwt-4-1-5"><em>4.1.5.  &#8220;nbf&#8221; (Not Before) Claim</em></a></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#jwt-4-1-6"><em>4.1.6.  &#8220;iat&#8221; (Issued At) Claim</em></a></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#jwt-4-1-7"><em>4.1.7. &#8220;jti&#8221; (JWT ID) Claim</em></a></td>
</tr>
</tbody>
</table>
<div class="section" id="iss-issuer-claim">
<span id="jwt-issuer"></span><span id="jwt-iss"></span><span id="jwt-4-1-1"></span><h4><a class="toc-backref" href="#id13">4.1.1.  &#8220;iss&#8221; (Issuer) Claim</a><a class="headerlink" href="#iss-issuer-claim" title="Permalink to this headline">¶</a></h4>
<p>The &#8220;<strong>iss</strong>&#8221; (<strong>issuer</strong>) claim identifies
the <strong>principal</strong> that issued the JWT.</p>
<p>The processing of this claim is generally application specific.</p>
<p>The &#8220;iss&#8221; value is a case sensitive string containing a StringOrURI value.</p>
<p>Use of this claim is OPTIONAL.</p>
<p>(draft19)
( <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-oauth-json-web-token-19#section-4.1.1">http://tools.ietf.org/html/draft-ietf-oauth-json-web-token-19#section-4.1.1</a> )</p>
</div>
<div class="section" id="sub-subject-claim">
<span id="jwt-sub"></span><span id="jwt-4-1-2"></span><h4><a class="toc-backref" href="#id14">4.1.2.  &#8220;sub&#8221; (Subject) Claim</a><a class="headerlink" href="#sub-subject-claim" title="Permalink to this headline">¶</a></h4>
<p>The &#8220;sub&#8221; (subject) claim identifies the principal
that is the <strong>subject</strong> of the JWT.</p>
<p>The Claims in a JWT are normally statements about the subject.</p>
<p>The subject value MAY be scoped to be locally unique
in the context of the <a class="reference internal" href="#jwt-issuer"><em>issuer</em></a>
or MAY be globally unique.</p>
<p>The processing of this claim is generally application specific.</p>
<p>The &#8220;sub&#8221; value is a case-sensitive string
containing a StringOrURI value.</p>
<p>Use of this claim is OPTIONAL.</p>
<p>(draft16)
( <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-oauth-json-web-token-16#section-4.1.2">http://tools.ietf.org/html/draft-ietf-oauth-json-web-token-16#section-4.1.2</a> )</p>
</div>
<div class="section" id="aud-audience-claim">
<span id="jwt-audience"></span><span id="jwt-aud"></span><span id="jwt-4-1-3"></span><h4><a class="toc-backref" href="#id15">4.1.3.  &#8220;aud&#8221; (Audience) Claim</a><a class="headerlink" href="#aud-audience-claim" title="Permalink to this headline">¶</a></h4>
<p>The &#8220;aud&#8221; (audience) claim identifies the audiences
that the JWT is intended for.</p>
<p>Each principal intended to process the JWT MUST
identify itself with a value in audience claim.</p>
<p>If the principal processing the claim does not identify itself
with a value in the &#8220;aud&#8221; claim,
then the JWT MUST be rejected.</p>
<p>In the general case,
the &#8220;aud&#8221; value is an array of case-sensitive strings,
each containing a StringOrURI value.</p>
<p>In the special case when the JWT has one audience,
the &#8220;aud&#8221; value MAY be a single case-sensitive string
containing a StringOrURI value.</p>
<p>The interpretation of audience values is generally application specific.</p>
<p>Use of this claim is OPTIONAL.</p>
<p>(draft16)
( <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-oauth-json-web-token-16#section-4.1.3">http://tools.ietf.org/html/draft-ietf-oauth-json-web-token-16#section-4.1.3</a> )</p>
</div>
<div class="section" id="exp-expiration-time-claim">
<span id="jwt-exp"></span><span id="jwt-4-1-4"></span><h4><a class="toc-backref" href="#id16">4.1.4.  &#8220;exp&#8221; (Expiration Time) Claim</a><a class="headerlink" href="#exp-expiration-time-claim" title="Permalink to this headline">¶</a></h4>
<p>The &#8220;exp&#8221; (expiration time) claim identifies
the <strong>expiration time</strong> on or after
which the JWT MUST NOT be accepted for processing.</p>
<p>The processing of the &#8220;exp&#8221; claim requires that
the current date/time MUST be before the expiration date/time
listed in the &#8220;exp&#8221; claim.</p>
<p>Implementers MAY provide for some small leeway,
usually no more than a few minutes, to account for clock skew.</p>
<p>Its value MUST be a number containing an <em class="xref std std-ref">IntDate</em> value.</p>
<p>Use of this claim is OPTIONAL.</p>
<p>(draft19)</p>
</div>
<div class="section" id="nbf-not-before-claim">
<span id="jwt-nbf"></span><span id="jwt-4-1-5"></span><h4><a class="toc-backref" href="#id17">4.1.5.  &#8220;nbf&#8221; (Not Before) Claim</a><a class="headerlink" href="#nbf-not-before-claim" title="Permalink to this headline">¶</a></h4>
<p>The &#8220;nbf&#8221; (not before) claim identifies the time before which the JWT
MUST NOT be accepted for processing.  The processing of the &#8220;nbf&#8221;
claim requires that the current date/time MUST be after or equal to
the not-before date/time listed in the &#8220;nbf&#8221; claim.  Implementers MAY
provide for some small leeway, usually no more than a few minutes, to
account for clock skew.  Its value MUST be a number containing an
IntDate value.  Use of this claim is OPTIONAL.</p>
<p>(draft16)
(<a class="reference external" href="http://tools.ietf.org/html/draft-ietf-oauth-json-web-token-16#section-4.1.5">http://tools.ietf.org/html/draft-ietf-oauth-json-web-token-16#section-4.1.5</a> )</p>
</div>
<div class="section" id="iat-issued-at-claim">
<span id="jwt-iat"></span><span id="jwt-4-1-6"></span><h4><a class="toc-backref" href="#id18">4.1.6.  &#8220;iat&#8221; (Issued At) Claim</a><a class="headerlink" href="#iat-issued-at-claim" title="Permalink to this headline">¶</a></h4>
<p>The &#8220;iat&#8221; (issued at) claim identifies the time at which the JWT was
issued.  This claim can be used to determine the age of the JWT.  Its
value MUST be a number containing an IntDate value.  Use of this
claim is OPTIONAL.</p>
<p>(draft16)
( <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-oauth-json-web-token-16#section-4.1.6">http://tools.ietf.org/html/draft-ietf-oauth-json-web-token-16#section-4.1.6</a> )</p>
</div>
<div class="section" id="jti-jwt-id-claim">
<span id="jwt-jti"></span><span id="jwt-id"></span><span id="jwt-4-1-7"></span><h4><a class="toc-backref" href="#id19">4.1.7. &#8220;jti&#8221; (JWT ID) Claim</a><a class="headerlink" href="#jti-jwt-id-claim" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>JWTがリプレーされないように！</li>
</ul>
</div>
<p>The &#8220;jti&#8221; (JWT ID) claim provides a unique identifier for the JWT.</p>
<p>The identifier value MUST be assigned in a manner that ensures that
there is a negligible probability that the same value will be
accidentally assigned to a different data object.</p>
<p>The &#8220;jti&#8221; claim can be used to prevent the JWT from being replayed.</p>
<p>The &#8220;jti&#8221; value is a case sensitive string.</p>
<p>This claim is OPTIONAL.</p>
<p>(draft16)
( <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-oauth-json-web-token-16#section-4.1.7">http://tools.ietf.org/html/draft-ietf-oauth-json-web-token-16#section-4.1.7</a> )</p>
</div>
</div>
<div class="section" id="public-claim-names">
<span id="jwt-4-2"></span><h3><a class="toc-backref" href="#id20">4.2.  Public Claim Names</a><a class="headerlink" href="#public-claim-names" title="Permalink to this headline">¶</a></h3>
<p>Claim Names can be defined at will by those using JWTs.</p>
<p>However, in
order to prevent collisions, any new Claim Name should either be
registered in the IANA JSON Web Token Claims registry defined in
Section 10.1 or be a Public Name: a value that contains a Collision-
Resistant Name.</p>
<p>In each case, the definer of the name or value needs
to take reasonable precautions to make sure they are in control of
the part of the namespace they use to define the Claim Name.</p>
<p>(draft16)</p>
</div>
<div class="section" id="private-claim-names">
<span id="jwt-4-3"></span><h3><a class="toc-backref" href="#id21">4.3.  Private Claim Names</a><a class="headerlink" href="#private-claim-names" title="Permalink to this headline">¶</a></h3>
<p>A producer and consumer of a JWT MAY agree to use Claim Names that
are Private Names: names that are not Registered Claim Names
Section 4.1 or Public Claim Names Section 4.2.  Unlike Public Claim
Names, Private Claim Names are subject to collision and should be
used with caution.</p>
<p>(draft16)</p>
</div>
</div>
<div class="section" id="jwt-header">
<span id="jwt-5"></span><span id="id4"></span><h2><a class="toc-backref" href="#id22">5.  JWT Header</a><a class="headerlink" href="#jwt-header" title="Permalink to this headline">¶</a></h2>
<p>The members of the JSON object represented by the JWT Header describe
the cryptographic operations applied to the JWT and optionally,
additional properties of the JWT.  The member names within the JWT
Header are referred to as Header Parameter Names.  These names MUST
be unique; recipients MUST either reject JWTs with duplicate Header
Parameter Names or use a JSON parser that returns only the lexically
last duplicate member name, as specified in Section 15.12 (The JSON
Object) of ECMAScript 5.1 [ECMAScript].  The corresponding values are
referred to as Header Parameter Values.</p>
<p>JWS Header Parameters are defined by [JWS].  JWE Header Parameters
are defined by [JWE].  This specification further specifies the use
of the following Header Parameter in both the cases where the JWT is
a JWS and where it is a JWE.</p>
<p>(draft16)</p>
<div class="section" id="typ-type-header-parameter">
<span id="jwt-type"></span><span id="jwt-typ"></span><span id="jwt-5-1"></span><h3><a class="toc-backref" href="#id23">5.1.  &#8220;typ&#8221; (Type) Header Parameter</a><a class="headerlink" href="#typ-type-header-parameter" title="Permalink to this headline">¶</a></h3>
<p>The &#8220;typ&#8221; (type) Header Parameter
defined by [JWS] and [JWE] is used by JWT applications
to declare the MIME Media Type [IANA.MediaTypes] of this complete JWT.</p>
<p>This is intended for use by the JWT application
when values that are not JWTs could also be present
in an application data structure that can contain a JWT object;
the application can use this value to disambiguate
among the different kinds of objects that might be present.</p>
<p>It will typically not be used by applications
when it is already known that the object is a JWT.</p>
<p>This parameter has no effect upon the JWT processing.
If present,
it is RECOMMENDED that its value be &#8220;JWT&#8221; to indicate that
this object is a JWT.</p>
<p>While media type names are not case-sensitive,
it is RECOMMENDED that &#8220;JWT&#8221; always be spelled using uppercase
characters for compatibility with legacy implementations.</p>
<p>Use of this Header Parameter is OPTIONAL.</p>
<p>(dratt22)</p>
</div>
<div class="section" id="cty-content-type-header-parameter">
<span id="jwt-5-2"></span><h3><a class="toc-backref" href="#id24">5.2.  &#8220;cty&#8221; (Content Type) Header Parameter</a><a class="headerlink" href="#cty-content-type-header-parameter" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>ネストしていないのであれば使うな</li>
<li>ネストしていれば必須</li>
</ul>
</div>
<p>The &#8220;cty&#8221; (content type) Header Parameter
defined by [JWS] and [JWE] is used by this specification
to convey structural information about the JWT.</p>
<p>In the normal case where nested signing or encryption operations
are not employed,
the use of this Header Parameter is <strong>NOT RECOMMENDED</strong>.</p>
<p>In the case that nested signing or encryption is employed,
this Header Parameter MUST be present;
in this case,
the value MUST be &#8220;<strong>JWT</strong>&#8221;,
to indicate that a Nested JWT is carried in this JWT.</p>
<p>While media type names are not case-sensitive,
it is RECOMMENDED that &#8220;JWT&#8221; always be spelled
using uppercase characters for compatibility with
legacy implementations.</p>
<p>See Appendix A.2 for an example of a Nested JWT.</p>
<p>(draft19)</p>
</div>
<div class="section" id="replicating-claims-as-header-parameters">
<span id="jwt-5-3"></span><h3><a class="toc-backref" href="#id25">5.3.  Replicating Claims as Header Parameters</a><a class="headerlink" href="#replicating-claims-as-header-parameters" title="Permalink to this headline">¶</a></h3>
<p>In some applications using encrypted JWTs, it is useful to have an
unencrypted representation of some Claims.  This might be used, for
instance, in application processing rules to determine whether and
how to process the JWT before it is decrypted.</p>
<p>This specification allows Claims present in the JWT Claims Set to be
replicated as Header Parameters in a JWT that is a JWE, as needed by
the application.  If such replicated Claims are present, the
application receiving them SHOULD verify that their values are
identical.  It is the responsibility of the application to ensure
that only claims that are safe to be transmitted in an unencrypted
manner are replicated as Header Parameter Values in the JWT.</p>
<p>This specification registers the &#8220;iss&#8221; (issuer), &#8220;sub&#8221; (subject), and
&#8220;aud&#8221; (audience) Header Parameter Names for the purpose of providing
unencrypted replicas of these Claims in encrypted JWTs for
applications that need them.  Other specifications MAY similarly
register other names that are registered Claim Names as Header
Parameter Names, as needed.</p>
<p>(draft16)</p>
</div>
</div>
<div class="section" id="plaintext-jwts">
<span id="jwt-6"></span><h2><a class="toc-backref" href="#id26">6.  Plaintext JWTs</a><a class="headerlink" href="#plaintext-jwts" title="Permalink to this headline">¶</a></h2>
<p>To support use cases
where the JWT content is secured
by a means other than a signature and/or encryption
contained within the JWT
(such as a signature on a data structure containing the JWT),
JWTs MAY also be created without a signature or encryption.</p>
<p>A plaintext JWT is a JWS
using the &#8220;<strong>none</strong>&#8221; JWS &#8220;<em class="xref std std-ref">alg</em>&#8221; Header Parameter Value
defined in JSON Web Algorithms (JWA) <a class="reference internal" href="jwe.html#term-jwa"><em class="xref std std-term">[JWA]</em></a>;
it is a JWS with the empty string for its JWS Signature value.</p>
<p>(draft16)</p>
<div class="section" id="example-plaintext-jwt">
<span id="plaintext-jwt"></span><span id="jwt-6-1"></span><h3><a class="toc-backref" href="#id27">6.1. Example Plaintext JWT</a><a class="headerlink" href="#example-plaintext-jwt" title="Permalink to this headline">¶</a></h3>
<p>The following example JWT Header declares that the encoded object is
a <a class="reference internal" href="glossary.html#term-plaintext-jwt"><em class="xref std std-term">Plaintext JWT</em></a>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span><span class="s2">&quot;alg&quot;</span><span class="o">:</span><span class="s2">&quot;none&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>Base64url encoding the octets of the UTF-8 representation of
the <a class="reference internal" href="#term-jwt-header"><em class="xref std std-term">JWT Header</em></a> yields this <a class="reference internal" href="#term-encoded-jwt-header"><em class="xref std std-term">Encoded JWT Header</em></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">eyJhbGciOiJub25lIn0</span>
</pre></div>
</div>
<p>The following is an example of a <a class="reference internal" href="#term-jwt-claims-set"><em class="xref std std-term">JWT Claims Set</em></a>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span><span class="s2">&quot;iss&quot;</span><span class="o">:</span><span class="s2">&quot;joe&quot;</span><span class="p">,</span>
 <span class="s2">&quot;exp&quot;</span><span class="o">:</span><span class="mi">1300819380</span><span class="p">,</span>
 <span class="s2">&quot;http://example.com/is_root&quot;</span><span class="o">:</span><span class="kc">true</span><span class="p">}</span>
</pre></div>
</div>
<p><a class="reference internal" href="#term-base64url-encoding"><em class="xref std std-term">Base64url encoding</em></a> the octets of the UTF-8 representation of
the JWT Claims Set yields this <em class="xref std std-term">Encoded JWS Payload</em>
(with line breaks for display purposes only):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">eyJpc3MiOiJqb2UiLA0KICJleHAiOjEzMDA4MTkzODAsDQogImh0dHA6Ly9leGFt</span>
<span class="n">cGxlLmNvbS9pc19yb290Ijp0cnVlfQ</span>
</pre></div>
</div>
<p>The <em class="xref std std-term">Encoded JWS Signature</em> is the empty string.</p>
<p>Concatenating these parts in this order with period (&#8216;.&#8217;) characters
between the parts yields this complete JWT
(with line breaks for display purposes only):</p>
<div class="highlight-python"><pre>eyJhbGciOiJub25lIn0
.
eyJpc3MiOiJqb2UiLA0KICJleHAiOjEzMDA4MTkzODAsDQogImh0dHA6Ly9leGFt
cGxlLmNvbS9pc19yb290Ijp0cnVlfQ
.</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>alg = none だと、JWS ( <a class="reference external" href="https://tools.ietf.org/html/draft-ietf-jose-json-web-algorithms-13#section-3.1">https://tools.ietf.org/html/draft-ietf-jose-json-web-algorithms-13#section-3.1</a> )</li>
<li>シグネチャがブランク文字列なので、トークンはピリオドで終わります</li>
</ul>
</div>
<p>( <a class="reference external" href="https://tools.ietf.org/html/draft-ietf-oauth-json-web-token-11#section-6.1">https://tools.ietf.org/html/draft-ietf-oauth-json-web-token-11#section-6.1</a> )</p>
</div>
</div>
<div class="section" id="rules-for-creating-and-validating-a-jwt">
<span id="jwt-7"></span><h2><a class="toc-backref" href="#id28">7.  Rules for Creating and Validating a JWT</a><a class="headerlink" href="#rules-for-creating-and-validating-a-jwt" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li><a class="reference internal" href="jws.html"><em>JSON Web Signature (JWS) : draft28</em></a> : [<em class="xref std std-term">Encoded JWS Header</em>].[<em class="xref std std-term">Encoded JWS Payload</em>].[<em class="xref std std-term">Encoded JWS Signature</em>]</li>
<li><a class="reference internal" href="jwe.html"><em>JSON Web Encryption (JWE)(draft30)</em></a> - [<a class="reference internal" href="jwe.html#term-encoded-jwe-header"><em class="xref std std-term">Encoded JWE Header</em></a>].[<a class="reference internal" href="jwe.html#term-encoded-jwe-encrypted-key"><em class="xref std std-term">Encoded JWE Encrypted Key</em></a>].[<a class="reference internal" href="jwe.html#term-encoded-jwe-ciphertext"><em class="xref std std-term">Encoded JWE Ciphertext</em></a>]</li>
<li><strong>plaintext</strong> - [<a class="reference internal" href="#term-encoded-jwt-header"><em class="xref std std-term">Encoded JWT Header</em></a>].[<a class="reference internal" href="messages.html#term-message"><em class="xref std std-term">Message</em></a>]</li>
</ul>
</div>
<dl class="glossary docutils">
<dt id="term-message">Message</dt>
<dd>UTF-8 representation of the <em class="xref std std-term">JWT Claims Object</em></dd>
</dl>
<p>To create a JWT, one MUST follow these steps:</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">Create a <a class="reference internal" href="#term-jwt-claims-set"><em class="xref std std-term">JWT Claims Set</em></a> containing the desired claims.
Note that <a class="reference internal" href="glossary.html#term-white-space"><em class="xref std std-term">white space</em></a> is explicitly allowed
in the representation and no canonicalization is performed
before encoding.</p>
</li>
<li><p class="first">Let the <a class="reference internal" href="messages.html#term-message"><em class="xref std std-term">Message</em></a> be the bytes
of the UTF-8 representation of the <a class="reference internal" href="#term-jwt-claims-set"><em class="xref std std-term">JWT Claims Set</em></a>.</p>
</li>
<li><p class="first">Create a JWT Header containing the desired set of
Header Parameters.</p>
<p>The JWT MUST conform to either the [JWS] or [JWE]
specifications.</p>
<p>Note that white space is explicitly allowed
in the representation and
no canonicalization need be performed before encoding.</p>
</li>
<li><p class="first">Depending upon whether the JWT is a JWS or JWE,
there are two cases:</p>
</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>If the JWT is a JWS,
create a JWS using the JWT Header
as the JWS Header and the Message as the JWS Payload;
all steps specified in <a class="reference internal" href="jwe.html#term-76"><em class="xref std std-term">[JWS]</em></a>
for creating a JWS MUST be followed.</li>
<li>Else,
if the JWT is a JWE,
create a JWE using the JWT Header
as the JWE Header and the Message as the JWE Plaintext;
all steps specified in <a class="reference internal" href="jwa.html#term-jwe"><em class="xref std std-term">[JWE]</em></a>
for creating a JWE MUST be followed.</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="5">
<li>If a nested signing or encryption operation will be performed,
let the Message be the JWS or JWE,
and return to Step 3,
using a <em class="xref std std-ref">&#8220;cty&#8221; (content type)</em> value of &#8220;JWT&#8221;
in the new JWT Header created in that step.</li>
<li>Otherwise,
let the resulting JWT be the JWS or JWE.</li>
</ol>
</div></blockquote>
<p>When validating a JWT,
the following steps MUST be taken.</p>
<p>The order of the steps is not significant in cases
where there are no dependencies
between the inputs and outputs of the steps.</p>
<p>If any of the listed steps fails
then the JWT MUST be rejected for processing.</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">The JWT MUST contain at least one period (&#8216;.&#8217;) character.</p>
</li>
<li><p class="first">Let the Encoded JWT Header be the portion of the JWT
before the first period (&#8216;.&#8217;) character.</p>
</li>
<li><p class="first">The Encoded JWT Header MUST be successfully <em class="xref std std-term">base64url decoded</em>
following the restriction given in this specification
that no padding characters have been used.</p>
</li>
<li><p class="first">The resulting JWT Header MUST be completely valid JSON syntax
conforming to <span class="target" id="index-3"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc7159.html"><strong>RFC 7159</strong></a> [RFC7159].</p>
</li>
<li><p class="first">The resulting JWT Header MUST be validated
to only include parameters and values whose syntax
and semantics are both understood and supported
or that are specified as being ignored when not understood.</p>
</li>
<li><p class="first">Determine whether the JWT is a JWS or a JWE
using any of the methods described in Section 9 of [JWE].</p>
</li>
<li><p class="first">Depending upon whether the JWT is a JWS or JWE,
there are two cases:</p>
<ul>
<li><p class="first">If the JWT is a JWS,
all steps specified in [JWS]
for validating a JWS MUST be followed.</p>
<p>Let the Message be the result of
base64url decoding the JWS Payload.</p>
</li>
<li><p class="first">Else, if the JWT is a JWE,
all steps specified in [JWE] for
validating a JWE MUST be followed.</p>
<p>Let the Message be the JWE Plaintext.</p>
</li>
</ul>
</li>
<li><p class="first">If the JWT Header contains a &#8220;cty&#8221; (content type) value of &#8220;JWT&#8221;,
then the Message is a JWT that was the subject of
nested signing or encryption operations.</p>
<p>In this case,
return to Step 1, using the Message as the JWT.</p>
</li>
<li><p class="first">Otherwise,
let the JWT Claims Set be the Message.</p>
</li>
<li><p class="first">The JWT Claims Set MUST be completely valid JSON syntax
conforming to <span class="target" id="index-4"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc7159.html"><strong>RFC 7159</strong></a> [RFC7159].</p>
</li>
</ol>
</div></blockquote>
<p>(draft30)</p>
</div>
<div class="section" id="implementation-requirements">
<span id="jwt-8"></span><h2><a class="toc-backref" href="#id29">8.  Implementation Requirements</a><a class="headerlink" href="#implementation-requirements" title="Permalink to this headline">¶</a></h2>
<p>This section defines which algorithms and features of this
specification are mandatory to implement.</p>
<p>Applications using this specification can impose additional requirements
upon implementations that they use.</p>
<p>For instance,
an application might require support for encrypted JWTs and Nested JWTs;
another might require support for signing JWTs with ECDSA
using the P-256 curve and the SHA-256 hash algorithm (&#8220;ES256&#8221;).</p>
<p>Of the signature and MAC algorithms specified in JSON Web Algorithms
(JWA) [JWA],
only HMAC SHA-256 (&#8220;HS256&#8221;) and &#8220;none&#8221; MUST be implemented
by conforming JWT implementations.</p>
<p>It is RECOMMENDED that implementations also support RSASSA-PKCS1-V1_5
with the SHA-256 hash algorithm (&#8220;RS256&#8221;)
and ECDSA using the P-256 curve and the SHA-256 hash algorithm (&#8220;ES256&#8221;).</p>
<p>Support for other algorithms and key sizes is OPTIONAL.</p>
<p>Support for encrypted JWTs is OPTIONAL.
If an implementation provides encryption capabilities,
of the encryption algorithms specified in [JWA],
only RSAES-PKCS1-V1_5 with 2048 bit keys (&#8220;RSA1_5&#8221;),
AES Key Wrap with 128 and 256 bit keys (&#8220;A128KW&#8221; and &#8220;A256KW&#8221;),
and the composite authenticated encryption algorithm
using AES CBC and HMAC SHA-2 (&#8220;A128CBC-HS256&#8221; and &#8220;A256CBC-HS512&#8221;) MUST be
implemented by conforming implementations.</p>
<p>It is RECOMMENDED that
implementations also support using ECDH-ES to agree upon a key used
to wrap the Content Encryption Key
(&#8220;ECDH-ES+A128KW&#8221; and &#8220;ECDH-ES+A256KW&#8221;)
and AES in Galois/Counter Mode (GCM) with 128 bit and 256 bit keys
(&#8220;A128GCM&#8221; and &#8220;A256GCM&#8221;).</p>
<p>Support for other algorithms and key sizes is OPTIONAL.</p>
<p>Support for Nested JWTs is OPTIONAL.</p>
<p>(draft21)</p>
</div>
<div class="section" id="iana-considerations">
<span id="jwt-9"></span><h2><a class="toc-backref" href="#id30">9.  IANA Considerations</a><a class="headerlink" href="#iana-considerations" title="Permalink to this headline">¶</a></h2>
<p>This specification calls for:</p>
<blockquote>
<div><p>A new IANA registry entitled &#8220;JSON Web Token Claims&#8221; for reserved claim names is defined in <a class="reference internal" href="#jwt-4-1"><em>Section 4.1</em></a>.
Inclusion in the registry is RFC Required in the RFC 5226 [<span class="target" id="index-5"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc5226.html"><strong>RFC 5226</strong></a>] sense for reserved JWT claim names
that are intended to be interoperable between implementations.</p>
<p>The registry will just record the reserved claim name and a pointer to the RFC that defines it.
This specification defines inclusion of the claim names defined in <a class="reference internal" href="#jwt-table-1"><em>Table 1</em></a>.</p>
</div></blockquote>
<p>(v.06)</p>
</div>
<div class="section" id="jwt-10">
<span id="id5"></span><h2><a class="toc-backref" href="#id31">10.  IANA Considerations</a><a class="headerlink" href="#jwt-10" title="Permalink to this headline">¶</a></h2>
<div class="section" id="json-web-token-claims-registry">
<span id="jwt-10-1"></span><h3><a class="toc-backref" href="#id32">10.1.  JSON Web Token Claims Registry</a><a class="headerlink" href="#json-web-token-claims-registry" title="Permalink to this headline">¶</a></h3>
<p>This specification establishes the IANA JSON Web Token Claims
registry for JWT Claim Names.  The registry records the Claim Name
and a reference to the specification that defines it.  This
specification registers the Claim Names defined in Section 4.1.</p>
<p>Values are registered on a Specification Required [RFC5226] basis
after a two-week review period on the [TBD]&#64;ietf.org mailing list, on
the advice of one or more Designated Experts.  However, to allow for
the allocation of values prior to publication, the Designated
Expert(s) may approve registration once they are satisfied that such
a specification will be published.</p>
<p>Registration requests must be sent to the [TBD]&#64;ietf.org mailing list
for review and comment, with an appropriate subject (e.g., &#8220;Request
for access token type: example&#8221;). [[ Note to the RFC Editor: The name
of the mailing list should be determined in consultation with the
IESG and IANA.  Suggested name: jwt-reg-review. ]]</p>
<p>Within the review period, the Designated Expert(s) will either
approve or deny the registration request, communicating this decision
to the review list and IANA.  Denials should include an explanation
and, if applicable, suggestions as to how to make the request
successful.  Registration requests that are undetermined for a period
longer than 21 days can be brought to the IESG&#8217;s attention (using the
<a class="reference external" href="mailto:iesg&#37;&#52;&#48;iesg&#46;org">iesg<span>&#64;</span>iesg<span>&#46;</span>org</a> mailing list) for resolution.</p>
<p>Criteria that should be applied by the Designated Expert(s) includes
determining whether the proposed registration duplicates existing
functionality, determining whether it is likely to be of general
applicability or whether it is useful only for a single application,
and whether the registration makes sense.</p>
<p>IANA must only accept registry updates from the Designated Expert(s)
and should direct all requests for registration to the review mailing
list.</p>
<p>It is suggested that multiple Designated Experts be appointed who are
able to represent the perspectives of different applications using
this specification, in order to enable broadly-informed review of
registration decisions.  In cases where a registration decision could
be perceived as creating a conflict of interest for a particular
Expert, that Expert should defer to the judgment of the other
Expert(s).</p>
<p>(draft30)</p>
</div>
</div>
<div class="section" id="security-considerations">
<span id="jwt-11"></span><h2><a class="toc-backref" href="#id33">11.  Security Considerations</a><a class="headerlink" href="#security-considerations" title="Permalink to this headline">¶</a></h2>
<p>All of the security issues that are pertinent to any cryptographic
application must be addressed by JWT/JWS/JWE/JWK agents.  Among these
issues are protecting the user&#8217;s asymmetric private and symmetric
secret keys, preventing various attacks, and helping avoid mistakes
such as inadvertently encrypting a message to the wrong recipient.
The entire list of security considerations is beyond the scope of
this document, but some significant considerations are listed here.</p>
<p>All the security considerations in the JWS specification also apply
to JWT, as do the JWE security considerations when encryption is
employed.  In particular, the JWS JSON Security Considerations and
Unicode Comparison Security Considerations apply equally to the JWT
Claims Set in the same manner that they do to the JOSE Header.</p>
<p>(draft24)</p>
<div class="section" id="trust-decisions">
<span id="jwt-11-1"></span><h3><a class="toc-backref" href="#id34">11.1.  Trust Decisions</a><a class="headerlink" href="#trust-decisions" title="Permalink to this headline">¶</a></h3>
<p>The contents of a JWT cannot be relied upon in a trust decision
unless its contents have been cryptographically secured
and bound to the context necessary for the trust decision.</p>
<p>In particular,
the key(s) used to sign and/or encrypt the JWT will typically need to
verifiably be under the control of the party identified
as the issuer of the JWT.</p>
<p>(draft22)</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>送信者キーの検証はすること</li>
</ul>
</div>
</div>
<div class="section" id="signing-and-encryption-order">
<span id="jwt-11-2"></span><h3><a class="toc-backref" href="#id35">11.2.  Signing and Encryption Order</a><a class="headerlink" href="#signing-and-encryption-order" title="Permalink to this headline">¶</a></h3>
<p>While syntactically,
the signing and encryption operations
for Nested JWTs may be applied in any order,
normally senders should sign the message
and then encrypt the result (thus encrypting the signature).</p>
<p>This prevents attacks in which the signature is stripped,
leaving just an encrypted message,
as well as providing privacy for the
signer.</p>
<p>Furthermore,
signatures over encrypted text are not considered valid
in many jurisdictions.</p>
<p>Note that potential concerns about security issues
related to the order of signing and encryption operations
are already addressed by the underlying JWS and JWE specifications;
in particular,
because JWE only supports the use of authenticated encryption algorithms,
cryptographic concerns about the potential need to sign
after encryption that apply in many contexts
do not apply to this specification.</p>
<p>(draft22)</p>
</div>
</div>
<div class="section" id="references">
<span id="jwt-12"></span><h2><a class="toc-backref" href="#id36">12.  References</a><a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<p>(v.06)</p>
<div class="section" id="normative-references">
<span id="jwt-12-1"></span><h3><a class="toc-backref" href="#id37">12.1. Normative References</a><a class="headerlink" href="#normative-references" title="Permalink to this headline">¶</a></h3>
<dl class="glossary docutils">
<dt id="term-jws">JWS</dt>
<dd>Jones, M., Balfanz, D., Bradley, J., Goland, Y., Panzer, J., Sakimura, N., and P. Tarjan, “JSON Web Signature (JWS),” October 2011.
(<a class="reference internal" href="jws.html"><em>JSON Web Signature (JWS) : draft28</em></a>)</dd>
<dt id="term-rfc2045">RFC2045</dt>
<dd>Freed, N. and N. Borenstein, “Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies,” RFC 2045, November 1996 (TXT).</dd>
<dt id="term-rfc2119">RFC2119</dt>
<dd>Bradner, S., “Key words for use in RFCs to Indicate Requirement Levels,” BCP 14, RFC 2119, March 1997 (TXT, HTML, XML).</dd>
<dt id="term-rfc3339">RFC3339</dt>
<dd>Klyne, G., Ed. and C. Newman, “Date and Time on the Internet: Timestamps,” RFC 3339, July 2002 (TXT, HTML, XML).</dd>
<dt id="term-rfc3629">RFC3629</dt>
<dd>Yergeau, F., “UTF-8, a transformation format of ISO 10646,” STD 63, RFC 3629, November 2003 (TXT).</dd>
<dt id="term-rfc3986">RFC3986</dt>
<dd>Berners-Lee, T., Fielding, R., and L. Masinter, “Uniform Resource Identifier (URI): Generic Syntax,” STD 66, RFC 3986, January 2005 (TXT, HTML, XML).</dd>
<dt id="term-rfc4627">RFC4627</dt>
<dd>Crockford, D., “The application/json Media Type for JavaScript Object Notation (JSON),” RFC 4627, July 2006 (TXT).</dd>
<dt id="term-rfc4648">RFC4648</dt>
<dd>Josefsson, S., “The Base16, Base32, and Base64 Data Encodings,” RFC 4648, October 2006 (TXT).</dd>
<dt id="term-rfc5226">RFC5226</dt>
<dd>Narten, T. and H. Alvestrand, “Guidelines for Writing an IANA Considerations Section in RFCs,” BCP 26, RFC 5226, May 2008 (TXT).</dd>
<dt id="term-usa15">USA15</dt>
<dd>Davis, M., Whistler, K., and M. Dürst, “Unicode Normalization Forms,” Unicode Standard Annex 15, 09 2009.</dd>
</dl>
<p>(v.06)</p>
</div>
<div class="section" id="informative-references">
<span id="jwt-12-2"></span><h3><a class="toc-backref" href="#id38">12.2. Informative References</a><a class="headerlink" href="#informative-references" title="Permalink to this headline">¶</a></h3>
<dl class="glossary docutils">
<dt id="term-canvasapp">CanvasApp</dt>
<dd>Facebook, “Canvas Applications,” 2010.</dd>
<dt id="term-jss">JSS</dt>
<dd>Bradley, J. and N. Sakimura (editor), “JSON Simple Sign,” September 2010.</dd>
<dt id="term-jwe">JWE</dt>
<dd>Jones, M., Rescorla, E., and J. Hildebrand, “JSON Web Encryption (JWE),” October 2011. (<a class="reference internal" href="jwe.html"><em>JSON Web Encryption (JWE)(draft30)</em></a>)</dd>
<dt id="term-magicsignatures">MagicSignatures</dt>
<dd>Panzer (editor), J., Laurie, B., and D. Balfanz, “Magic Signatures,” August 2010.</dd>
<dt id="term-oasis-saml-core-2-0-os">OASIS.saml-core-2.0-os</dt>
<dd>Cantor, S., Kemp, J., Philpott, R., and E. Maler, “Assertions and Protocol for the OASIS Security Assertion Markup Language (SAML) V2.0,” OASIS Standard saml-core-2.0-os, March 2005.</dd>
<dt id="term-rfc3275">RFC3275</dt>
<dd>Eastlake, D., Reagle, J., and D. Solo, “(Extensible Markup Language) XML-Signature Syntax and Processing,” RFC 3275, March 2002 (TXT).</dd>
<dt id="term-rfc4122">RFC4122</dt>
<dd>Leach, P., Mealling, M., and R. Salz, “A Universally Unique IDentifier (UUID) URN Namespace,” RFC 4122, July 2005 (TXT, HTML, XML).</dd>
<dt id="term-swt">SWT</dt>
<dd>Hardt, D. and Y. Goland, “Simple Web Token (SWT),” Version 0.9.5.1, November 2009.</dd>
<dt id="term-w3c-cr-xml11-20021015">W3C.CR-xml11-20021015</dt>
<dd>Cowan, J., “Extensible Markup Language (XML) 1.1,” W3C CR CR-xml11-20021015, October 2002.</dd>
</dl>
<p>(v.06)</p>
</div>
</div>
<div class="section" id="appendix-a-jwt-examples">
<span id="jwt-appendix-a"></span><h2><a class="toc-backref" href="#id39">Appendix A. JWT Examples</a><a class="headerlink" href="#appendix-a-jwt-examples" title="Permalink to this headline">¶</a></h2>
<p>This section contains examples of JWTs.</p>
<p>For other example JWTs,
see Section 6.1 and Appendices A.1, A.2, and A.3 of [JWS].</p>
<p>(<a class="reference external" href="https://tools.ietf.org/html/draft-ietf-oauth-json-web-token-11#appendix-A">https://tools.ietf.org/html/draft-ietf-oauth-json-web-token-11#appendix-A</a> )</p>
<div class="section" id="a-1-example-encrypted-jwt">
<span id="jwt-appendix-a-1"></span><h3><a class="toc-backref" href="#id40">A.1. Example Encrypted JWT</a><a class="headerlink" href="#a-1-example-encrypted-jwt" title="Permalink to this headline">¶</a></h3>
<p>This example encrypts the same claims as used in Section 3.1
to the recipient using RSAES-PKCS1-V1_5 and AES_128_CBC_HMAC_SHA_256.</p>
<p>The following example JWE Header
(with line breaks for display purposes only) declares that:</p>
<blockquote>
<div><ul>
<li><p class="first">the Content Encryption Key is encrypted to the recipient using the
RSAES-PKCS1-V1_5 algorithm to produce the JWE Encrypted Key and</p>
</li>
<li><p class="first">the Plaintext is encrypted using the AES_128_CBC_HMAC_SHA_256
algorithm to produce the Ciphertext.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span><span class="s">&quot;alg&quot;</span><span class="p">:</span><span class="s">&quot;RSA1_5&quot;</span><span class="p">,</span><span class="s">&quot;enc&quot;</span><span class="p">:</span><span class="s">&quot;A128CBC-HS256&quot;</span><span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<p>Other than using the octets of the UTF-8 representation of
the JWT Claims Set from Section 3.1 as the plaintext value,
the computation of this JWT is identical to the computation of the JWE
in Appendix A.2 of [JWE], including the keys used.</p>
<p>The final result in this example (with line breaks for display purposes only) is:</p>
<div class="highlight-python"><pre>eyJhbGciOiJSU0ExXzUiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0.
QR1Owv2ug2WyPBnbQrRARTeEk9kDO2w8qDcjiHnSJflSdv1iNqhWXaKH4MqAkQtM
oNfABIPJaZm0HaA415sv3aeuBWnD8J-Ui7Ah6cWafs3ZwwFKDFUUsWHSK-IPKxLG
TkND09XyjORj_CHAgOPJ-Sd8ONQRnJvWn_hXV1BNMHzUjPyYwEsRhDhzjAD26ima
sOTsgruobpYGoQcXUwFDn7moXPRfDE8-NoQX7N7ZYMmpUDkR-Cx9obNGwJQ3nM52
YCitxoQVPzjbl7WBuB7AohdBoZOdZ24WlN1lVIeh8v1K4krB8xgKvRU8kgFrEn_a
1rZgN5TiysnmzTROF869lQ.
AxY8DCtDaGlsbGljb3RoZQ.
MKOle7UQrG6nSxTLX6Mqwt0orbHvAKeWnDYvpIAeZ72deHxz3roJDXQyhxx0wKaM
HDjUEOKIwrtkHthpqEanSBNYHZgmNOV7sln1Eu9g3J8.
fiK51VwhsxJ-siBMR-YFiA</pre>
</div>
<p>( <a class="reference external" href="https://tools.ietf.org/html/draft-ietf-oauth-json-web-token-11#appendix-A.1">https://tools.ietf.org/html/draft-ietf-oauth-json-web-token-11#appendix-A.1</a> )</p>
</div>
<div class="section" id="a-2-example-nested-jwt">
<span id="jwt-appendix-a-2"></span><h3><a class="toc-backref" href="#id41">A.2.  Example Nested JWT</a><a class="headerlink" href="#a-2-example-nested-jwt" title="Permalink to this headline">¶</a></h3>
<p>This example shows how a JWT can be used as the payload of
a JWE or JWS to create a Nested JWT.</p>
<p>In this case,
the JWT Claims Set is first signed, and then encrypted.</p>
<p>The inner signed JWT is identical to the example
in <a class="reference internal" href="jws.html#jws-appendix-a-2"><em>Appendix A.2</em></a> of [JWS].</p>
<p>Therefore,
its computation is not repeated here.</p>
<p>This example then encrypts this inner JWT to the recipient
using <em class="xref std std-term">RSAES-PKCS1-V1_5</em> and <em class="xref std std-term">AES_128_CBC_HMAC_SHA_256</em>.</p>
<p>The following example JWE Header
(with line breaks for display purposes only) declares that:</p>
<ul class="simple">
<li>the Content Encryption Key is encrypted to the recipient
using the RSAES-PKCS1-V1_5 algorithm to produce the JWE Encrypted Key,</li>
<li>the Plaintext is encrypted
using the AES_128_CBC_HMAC_SHA_256 algorithm
to produce the Ciphertext, and</li>
<li>the Plaintext is itself a JWT.</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span><span class="s">&quot;alg&quot;</span><span class="p">:</span><span class="s">&quot;RSA1_5&quot;</span><span class="p">,</span><span class="s">&quot;enc&quot;</span><span class="p">:</span><span class="s">&quot;A128CBC-HS256&quot;</span><span class="p">,</span><span class="s">&quot;cty&quot;</span><span class="p">:</span><span class="s">&quot;JWT&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>Base64url encoding the octets of the UTF-8 representation of the JWE
Header yields this encoded JWE Header value:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">eyJhbGciOiJSU0ExXzUiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2IiwiY3R5IjoiSldUIn0</span>
</pre></div>
</div>
<p>The computation of this JWT is identical to the computation of the
JWE in Appendix A.2 of [JWE], other than that different JWE Header,
Plaintext, Initialization Vector, and Content Encryption Key values
are used.  (The RSA key used is the same.)</p>
<p>The Payload used is the octets of the ASCII representation of the JWT
at the end of Appendix Section A.2.1 of [JWS] (with all whitespace
and line breaks removed), which is a sequence of 458 octets.</p>
<p>The Initialization Vector value used is:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="mi">82</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">109</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">57</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span>
<span class="mi">50</span><span class="p">]</span>
</pre></div>
</div>
<p>This example uses the Content Encryption Key represented
by the base64url encoded value below:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">GawgguFyGrWKav7AX4VKUg</span>
</pre></div>
</div>
<p>The final result for this Nested JWT (with line breaks for display
purposes only) is:</p>
<div class="highlight-python"><pre>eyJhbGciOiJSU0ExXzUiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2IiwiY3R5IjoiSldU
In0.
g_hEwksO1Ax8Qn7HoN-BVeBoa8FXe0kpyk_XdcSmxvcM5_P296JXXtoHISr_DD_M
qewaQSH4dZOQHoUgKLeFly-9RI11TG-_Ge1bZFazBPwKC5lJ6OLANLMd0QSL4fYE
b9ERe-epKYE3xb2jfY1AltHqBO-PM6j23Guj2yDKnFv6WO72tteVzm_2n17SBFvh
DuR9a2nHTE67pe0XGBUS_TK7ecA-iVq5COeVdJR4U4VZGGlxRGPLRHvolVLEHx6D
YyLpw30Ay9R6d68YCLi9FYTq3hIXPK_-dmPlOUlKvPr1GgJzRoeC9G5qCvdcHWsq
JGTO_z3Wfo5zsqwkxruxwA.
UmVkbW9uZCBXQSA5ODA1Mg.
VwHERHPvCNcHHpTjkoigx3_ExK0Qc71RMEParpatm0X_qpg-w8kozSjfNIPPXiTB
BLXR65CIPkFqz4l1Ae9w_uowKiwyi9acgVztAi-pSL8GQSXnaamh9kX1mdh3M_TT
-FZGQFQsFhu0Z72gJKGdfGE-OE7hS1zuBD5oEUfk0Dmb0VzWEzpxxiSSBbBAzP10
l56pPfAtrjEYw-7ygeMkwBl6Z_mLS6w6xUgKlvW6ULmkV-uLC4FUiyKECK4e3WZY
Kw1bpgIqGYsw2v_grHjszJZ-_I5uM-9RA8ycX9KqPRp9gc6pXmoU_-27ATs9XCvr
ZXUtK2902AUzqpeEUJYjWWxSNsS-r1TJ1I-FMJ4XyAiGrfmo9hQPcNBYxPz3GQb2
8Y5CLSQfNgKSGt0A4isp1hBUXBHAndgtcslt7ZoQJaKe_nNJgNliWtWpJ_ebuOpE
l8jdhehdccnRMIwAmU1n7SPkmhIl1HlSOpvcvDfhUN5wuqU955vOBvfkBOh5A11U
zBuo2WlgZ6hYi9-e3w29bR0C2-pp3jbqxEDw3iWaf2dc5b-LnR0FEYXvI_tYk5rd
_J9N0mg0tQ6RbpxNEMNoA9QWk5lgdPvbh9BaO195abQ.
AVO9iT5AV4CzvDJCdhSFlQ</pre>
</div>
<p>(draft21)</p>
</div>
</div>
<div class="section" id="appendix-b-relationship-of-jwts-to-simple-web-tokens-swts">
<span id="jwt-appendix-b"></span><h2><a class="toc-backref" href="#id42">Appendix B.  Relationship of JWTs to Simple Web Tokens (SWTs)</a><a class="headerlink" href="#appendix-b-relationship-of-jwts-to-simple-web-tokens-swts" title="Permalink to this headline">¶</a></h2>
<p>Both JWTs and Simple Web Tokens SWT [SWT], at their core,
enable sets of claims to be communicated between applications.</p>
<p>For SWTs,
both the claim names and claim values are strings.
For JWTs,
while claim names are strings,
claim values can be any JSON type.</p>
<p>Both token types offer cryptographic protection of their content:
SWTs with HMAC SHA-256 and
JWTs with a choice of algorithms, including HMAC SHA-256, RSA SHA-256, and ECDSA P-256 SHA-256.</p>
<p>(v.06)</p>
</div>
<div class="section" id="appendix-c-acknowledgements">
<span id="jwt-appendix-c"></span><h2><a class="toc-backref" href="#id43">Appendix C.  Acknowledgements</a><a class="headerlink" href="#appendix-c-acknowledgements" title="Permalink to this headline">¶</a></h2>
<p>The authors acknowledge that
the design of JWTs was intentionally influenced by the design and simplicity of Simple Web Tokens [SWT]
and ideas for JSON tokens that Dick Hardt discussed within the OpenID community.</p>
<p>Solutions for signing JSON content were previously explored by Magic Signatures [MagicSignatures],
JSON Simple Sign [JSS], and Canvas Applications [CanvasApp], all of which influenced this draft.</p>
<p>(v.06)</p>
</div>
</div>


    </div>
      
  </div>
</div>
  <h2>HDKNR.COM</h2>
  
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2011, HDKNR.COM.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.<br/>
    </p>
  </div>
</footer>

  </body>
</html>