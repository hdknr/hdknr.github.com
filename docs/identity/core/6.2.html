

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>6.2. Passing a Request Object by Reference &mdash; identity 1.0 documentation</title>
    
    <link rel="stylesheet" href="../static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/print.css" type="text/css" />
    <link rel="stylesheet" href="../static/openid.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/underscore.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <script type="text/javascript" src="../_static/theme_extras.js"></script>
    <link rel="top" title="identity 1.0 documentation" href="../index.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="../index.html">
          <span>identity 1.0 documentation</span></a></h1>
        <h2 class="heading"><span>6.2. Passing a Request Object by Reference</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        <a class="uplink" href="../index.html">Contents</a>
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="passing-a-request-object-by-reference">
<h1>6.2.  Passing a Request Object by Reference<a class="headerlink" href="#passing-a-request-object-by-reference" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="../standard.html#term-request-uri"><em class="xref std std-term">request_uri</em></a> Authorization Request parameter
enables OpenID Connect requests to be passed by reference,
rather than by value.</p>
<p>This parameter is used identically to the request parameter,
other than that the Request Object value is retrieved
from the resource at the specified URL, rather than passed by value.</p>
<p>The <a class="reference internal" href="../discovery.html#term-request-uri-parameter-supported"><em class="xref std std-term">request_uri_parameter_supported</em></a> <tt class="xref doc docutils literal"><span class="pre">Discovery</span></tt>
result indicates whether the OP supports this parameter.
Should an OP not support this parameter and an RP uses it,
the OP MUST return the <a class="reference internal" href="3.1.2.6.html#term-request-uri-not-supported"><em class="xref std std-term">request_uri_not_supported</em></a> error.</p>
<p>When the <a class="reference internal" href="../standard.html#term-request-uri"><em class="xref std std-term">request_uri</em></a> parameter is used,
the OpenID Connect request parameter values
contained in the referenced JWT supersede those passed
using the OAuth 2.0 request syntax.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Request Objectを事前キャッシュできる</li>
<li>state, nonce はOAuth2でわたす</li>
</ul>
</div>
<p>However,
parameters MAY also be passed using the OAuth 2.0 request syntax
even when a request_uri is used;
this would typically be done to enable a cached, pre-signed
(and possibly pre-encrypted) Request Object value
to be used containing the fixed request parameters,
while parameters that can vary with each request,
such as <a class="reference internal" href="../uma_core.html#term-state"><em class="xref std std-term">state</em></a> and <a class="reference internal" href="../standard.html#term-nonce"><em class="xref std std-term">nonce</em></a>,
are passed as OAuth 2.0 parameters.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>response_type , clinet_id は必須。なぜならばOAuth2</li>
<li>Requdst Objectの中の値と一致する必要あるよ</li>
</ul>
</div>
<p>So that the <a class="reference internal" href="../standard.html#term-request"><em class="xref std std-term">request</em></a> is a valid OAuth 2.0 Authorization Request,
values for the response_type and client_id parameters
MUST be included using the OAuth 2.0 request syntax,
since they are REQUIRED by OAuth 2.0.
The values for these parameters MUST match those
in the Request Object, if present.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>scope=openid も必要</li>
</ul>
</div>
<p>Even if a <a class="reference internal" href="../uma_core.html#term-scope"><em class="xref std std-term">scope</em></a> parameter is present
in the referenced Request Object,
a <a class="reference internal" href="../uma_core.html#term-scope"><em class="xref std std-term">scope</em></a> parameter MUST always be passed
using the OAuth 2.0 request syntax
containing the <a class="reference internal" href="../messages.html#term-openid"><em class="xref std std-term">openid</em></a> scope value to indicate
to the underlying OAuth 2.0 logic
that this is an OpenID Connect request.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>uri fragmentに Request Objectのハッシュを入れとく</li>
</ul>
</div>
<p>Servers MAY cache the contents of the resources referenced by Request URIs.
If the contents of the referenced resource could ever change,
the URI SHOULD include the <a class="reference internal" href="../session.html#term-base64url"><em class="xref std std-term">base64url</em></a> encoded SHA-256 hash
of the referenced resource contents as the <em class="xref std std-term">fragment component</em> of the URI.
If the fragment value used for a URI changes,
that signals the server that any cached value
for that URI with the old fragment value is no longer valid.</p>
<p>Note that Clients MAY pre-register request_uri values
using the request_uris parameter defined in Section 2.1
of the OpenID Connect Dynamic Client Registration 1.0 [OpenID.Registration] specification.
OPs can require that request_uri values used be pre-registered
with the <a class="reference internal" href="../discovery.html#term-require-request-uri-registration"><em class="xref std std-term">require_request_uri_registration</em></a> discovery parameter.</p>
<p>The entire Request URI MUST NOT exceed 512 ASCII characters.</p>
<p>The contents of the resource referenced by the URL MUST be a Request Object.
The scheme used in the <a class="reference internal" href="../standard.html#term-request-uri"><em class="xref std std-term">request_uri</em></a> value MUST be <strong>https</strong>,
unless the target Request Object is signed in a way that is verifiable
by the Authorization Server.</p>
<p>The <a class="reference internal" href="../standard.html#term-request-uri"><em class="xref std std-term">request_uri</em></a> value MUST be reachable by the Authorization Server,
and SHOULD be reachable by the Client.</p>
<p>The following is a non-normative example of the contents of
a Request Object resource that can be referenced by a request_uri
(with line wraps within values for display purposes only):</p>
<div class="highlight-python"><pre>eyJhbGciOiJSUzI1NiIsImtpZCI6ImsyYmRjIn0.ew0KICJpc3MiOiAiczZCaGRSa3
F0MyIsDQogImF1ZCI6ICJodHRwczovL3NlcnZlci5leGFtcGxlLmNvbSIsDQogInJl
c3BvbnNlX3R5cGUiOiAiY29kZSBpZF90b2tlbiIsDQogImNsaWVudF9pZCI6ICJzNk
JoZFJrcXQzIiwNCiAicmVkaXJlY3RfdXJpIjogImh0dHBzOi8vY2xpZW50LmV4YW1w
bGUub3JnL2NiIiwNCiAic2NvcGUiOiAib3BlbmlkIiwNCiAic3RhdGUiOiAiYWYwaW
Zqc2xka2oiLA0KICJub25jZSI6ICJuLTBTNl9XekEyTWoiLA0KICJtYXhfYWdlIjog
ODY0MDAsDQogImNsYWltcyI6IA0KICB7DQogICAidXNlcmluZm8iOiANCiAgICB7DQ
ogICAgICJnaXZlbl9uYW1lIjogeyJlc3NlbnRpYWwiOiB0cnVlfSwNCiAgICAgIm5p
Y2tuYW1lIjogbnVsbCwNCiAgICAgImVtYWlsIjogeyJlc3NlbnRpYWwiOiB0cnVlfS
wNCiAgICAgImVtYWlsX3ZlcmlmaWVkIjogeyJlc3NlbnRpYWwiOiB0cnVlfSwNCiAg
ICAgInBpY3R1cmUiOiBudWxsDQogICAgfSwNCiAgICJpZF90b2tlbiI6IA0KICAgIH
sNCiAgICAgImdlbmRlciI6IG51bGwsDQogICAgICJiaXJ0aGRhdGUiOiB7ImVzc2Vu
dGlhbCI6IHRydWV9LA0KICAgICAiYWNyIjogeyJ2YWx1ZXMiOiBbInVybjptYWNlOm
luY29tbW9uOmlhcDpzaWx2ZXIiXX0NCiAgICB9DQogIH0NCn0.nwwnNsk1-Zkbmnvs
F6zTHm8CHERFMGQPhos-EJcaH4Hh-sMgk8ePrGhw_trPYs8KQxsn6R9Emo_wHwajyF
KzuMXZFSZ3p6Mb8dkxtVyjoy2GIzvuJT_u7PkY2t8QU9hjBcHs68PkgjDVTrG1uRTx
0GxFbuPbj96tVuj11pTnmFCUR6IEOXKYr7iGOCRB3btfJhM0_AKQUfqKnRlrRscc8K
ol-cSLWoYE9l5QqholImzjT_cMnNIznW9E7CDyWXTsO70xnB4SkG6pXfLSjLLlxmPG
iyon_-Te111V8uE83IlzCYIb_NMXvtTIVc1jpspnTSD7xMbpL-2QgwUsAlMGzw</pre>
</div>
<p>(draft17)</p>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        <a class="uplink" href="../index.html">Contents</a>
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2011, HDKNR.COM.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>