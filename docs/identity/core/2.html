

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2. ID Token &mdash; identity 1.0 documentation</title>
    
    <link rel="stylesheet" href="../static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/print.css" type="text/css" />
    <link rel="stylesheet" href="../static/openid.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/underscore.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <script type="text/javascript" src="../_static/theme_extras.js"></script>
    <link rel="top" title="identity 1.0 documentation" href="../index.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="../index.html">
          <span>identity 1.0 documentation</span></a></h1>
        <h2 class="heading"><span>2. ID Token</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        <a class="uplink" href="../index.html">Contents</a>
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="id-token">
<span id="id1"></span><h1>2.  ID Token<a class="headerlink" href="#id-token" title="Permalink to this headline">Â¶</a></h1>
<p>The primary extension that OpenID Connect makes to OAuth 2.
0 to enable End-Users to be Authenticated is the ID Token data structure.</p>
<p>The ID Token is a <strong>security token</strong> that contains Claims
about the Authentication of an End-User by an Authorization Server
when using a Client,
and potentially other requested Claims.
The ID Token is represented as a <tt class="xref doc docutils literal"><span class="pre">JSON</span> <span class="pre">Web</span> <span class="pre">Token</span> <span class="pre">(JWT)</span></tt> <a class="reference internal" href="../swd.html#term-jwt"><em class="xref std std-term">[JWT]</em></a>.</p>
<p>The following Claims are used within the ID Token for all OAuth 2.0 flows used by OpenID Connect:</p>
<dl class="glossary docutils">
<dt id="term-iss">iss</dt>
<dd><p class="first">REQUIRED.</p>
<p class="last">Issuer Identifier for the Issuer of the response.
The <a class="reference internal" href="../session.html#term-iss"><em class="xref std std-term">iss</em></a> value is a <strong>case sensitive URL</strong>
using the <strong>https</strong> scheme that contains scheme, host, and optionally,
port number and path components and <strong>no query or fragment components</strong>.</p>
</dd>
<dt id="term-sub">sub</dt>
<dd><p class="first">REQUIRED.</p>
<p>Subject Identifier.
A locally unique and never reassigned identifier
within the Issuer for the End-User,
which is intended to be consumed by the Client,
e.g., 24400320 or AItOawmwtWwcT0k51BayewNvutrJUqsvl6qs7A4.</p>
<p class="last">It MUST NOT exceed 255 ASCII characters in length.
The sub value is a case sensitive string.</p>
</dd>
<dt id="term-aud">aud</dt>
<dd><p class="first">REQUIRED.</p>
<p>Audience(s) that this ID Token is intended for.
It MUST contain the OAuth 2.0 <a class="reference internal" href="../standard.html#term-client-id"><em class="xref std std-term">client_id</em></a> of the Relying Party
as an audience value.</p>
<p>It MAY also contain identifiers for other audiences.
In the general case,
the <a class="reference internal" href="../session.html#term-8"><em class="xref std std-term">aud</em></a> value is an <strong>array</strong> of case sensitive strings.</p>
<p class="last">In the common special case when there is one audience,
the aud value MAY be a single case sensitive string.</p>
</dd>
<dt id="term-exp">exp</dt>
<dd><p class="first">REQUIRED.</p>
<p>Expiration time on or after which the ID Token MUST NOT be accepted for processing.</p>
<p>The processing of this parameter requires
that the current date/time MUST be before the expiration date/time listed in the value.</p>
<p>Implementers MAY provide for some small leeway,
usually no more than a few minutes, to account for clock skew.</p>
<p>Its value is a JSON number representing the number of seconds
from 1970-01-01T0:0:0Z as measured in UTC until the date/time.</p>
<p class="last">See <span class="target" id="index-0"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc3339.html"><strong>RFC 3339</strong></a> <a class="reference internal" href="../swd.html#term-rfc3339"><em class="xref std std-term">[RFC3339]</em></a> for details
regarding date/times in general and UTC in particular.</p>
</dd>
<dt id="term-iat">iat</dt>
<dd><p class="first">REQUIRED.</p>
<p>Time at which the JWT was issued.</p>
<p class="last">Its value is a JSON number representing the number of seconds
from 1970-01-01T0:0:0Z as measured in UTC until the date/time.</p>
</dd>
<dt id="term-auth-time">auth_time</dt>
<dd><p class="first">Time when the End-User authentication occurred.</p>
<p>Its value is a JSON number representing the number of seconds
from 1970-01-01T0:0:0Z as measured in UTC until the date/time.</p>
<p>When a <a class="reference internal" href="../messages.html#term-89"><em class="xref std std-term">max_age</em></a> request is made
or when <a class="reference internal" href="../oauth_auth.html#term-auth-time"><em class="xref std std-term">auth_time</em></a> is requested
as an <a class="reference internal" href="1.2.html#term-essential-claim"><em class="xref std std-term">Essential Claim</em></a>, then this Claim is REQUIRED;
otherwise, its inclusion is OPTIONAL.</p>
<p class="last">(The auth_time Claim semantically corresponds to
the OpenID 2.0 PAPE <em class="xref std std-term">[OpenID.PAPE]</em> <strong>auth_time</strong> response parameter.)</p>
</dd>
<dt id="term-nonce">nonce</dt>
<dd><p class="first">String value used to associate a Client session with an ID Token,
and to mitigate replay attacks.</p>
<p>The value is passed through unmodified
from the Authentication Request to the ID Token.</p>
<p>If present in the ID Token,
Clients MUST verify that the <strong>nonce</strong> Claim Value is
equal to the value of the <strong>nonce</strong> parameter
sent in the Authentication Request.</p>
<p>If present in the Authentication Request,
Authorization Servers MUST include a <strong>nonce</strong> Claim
in the ID Token with the Claim Value being the <strong>nonce</strong> value
sent in the Authentication Request.</p>
<p>Authorization Servers SHOULD perform no other processing
on <strong>nonce</strong> values used.</p>
<p class="last">The <strong>nonce</strong> value is a case sensitive string.</p>
</dd>
<dt id="term-acr">acr</dt>
<dd><p class="first">OPTIONAL.</p>
<p>Authentication Context Class Reference.</p>
<p>String specifying an <a class="reference internal" href="../glossary.html#term-16"><em class="xref std std-term">Authentication Context Class Reference</em></a> value
that identifies the Authentication Context Class
that the authentication performed satisfied.</p>
<p>The value &#8220;0&#8221; indicates the End-User authentication
did not meet the requirements of ISO/IEC 29115 <a class="reference internal" href="../oauth_auth.html#term-iso29115"><em class="xref std std-term">[ISO29115]</em></a> level 1.</p>
<p>Authentication using a long-lived browser cookie,
for instance, is one example where the use of &#8220;<strong>level 0</strong>&#8221; is appropriate.</p>
<p>Authentications with level 0 SHOULD NOT be used to authorize access
to any resource of any monetary value.</p>
<p>(This corresponds to the OpenID 2.0 PAPE <em class="xref std std-ref">[OpenID.PAPE]</em> <strong>nist_auth_level 0</strong>.)</p>
<p>An absolute URI or an RFC 6711 <em class="xref std std-term">[RFC6711]</em> registered name
SHOULD be used as the acr value;
registered names MUST NOT be used with a different meaning than
that which is registered.</p>
<p>Parties using this claim will need to agree upon the meanings of the values used,
which may be context-specific.</p>
<p class="last">The acr value is a case sensitive string.</p>
</dd>
<dt id="term-amr">amr</dt>
<dd><p class="first">OPTIONAL.</p>
<p>Authentication Methods References.</p>
<p>JSON array of strings that are identifiers
for authentication methods used in the authentication.</p>
<p>For instance,
values might indicate that both password and OTP authentication methods were used.</p>
<p>The definition of particular values to be used
in the <a class="reference internal" href="../oauth_auth.html#term-amr"><em class="xref std std-term">amr</em></a> Claim is beyond the scope of this specification.</p>
<p>Parties using this claim will need to agree upon the meanings of the values used,
which may be context-specific.</p>
<p class="last">The amr value is an array of case sensitive strings.</p>
</dd>
<dt id="term-azp">azp</dt>
<dd><p class="first">OPTIONAL.</p>
<p>Authorized party - the party to which the ID Token was issued.</p>
<p>If present,
it MUST contain the OAuth 2.0 Client ID of this party.</p>
<p>This Claim is only needed when the ID Token has a single audience value
and that audience is different than the authorized party.</p>
<p>It MAY be included even when the authorized party is the same as the sole audience.</p>
<p class="last">The azp value is a case sensitive string containing a StringOrURI value.</p>
</dd>
</dl>
<p>ID Tokens MAY contain other Claims.
Any Claims used that are not understood MUST be ignored.</p>
<p>See Sections <a class="reference internal" href="../core.html#core-3-1-3-6"><em>3.1.3.6</em></a>, <a class="reference internal" href="../core.html#core-3-3-2-11"><em>3.3.2.11</em></a>, <a class="reference internal" href="../core.html#core-5-1"><em>5.1</em></a>,
and <a class="reference internal" href="../core.html#core-7-4"><em>7.4</em></a> for additional Claims defined by this specification.</p>
<p>ID Tokens MUST be signed using JWS <a class="reference internal" href="../jwk.html#term-jws"><em class="xref std std-term">[JWS]</em></a>
and optionally both signed and then encrypted
using JWS <a class="reference internal" href="../jwk.html#term-jws"><em class="xref std std-term">[JWS]</em></a> and JWE <a class="reference internal" href="../jws.html#term-jwe"><em class="xref std std-term">[JWE]</em></a> respectively,
thereby providing authentication, integrity, non-repudiation, and optionally,
confidentiality, per <em class="xref std std-ref">Section 16.14</em>.</p>
<p>If the ID Token is encrypted,
it MUST be signed then encrypted,
with the result being a Nested <tt class="xref doc docutils literal"><span class="pre">JWT</span></tt>, as defined in <a class="reference internal" href="../swd.html#term-jwt"><em class="xref std std-term">[JWT]</em></a>.
ID Tokens MUST NOT use <strong>none</strong> as the <a class="reference internal" href="../glossary.html#term-alg"><em class="xref std std-term">alg</em></a> value
unless the Response Type used returns no ID Token from the Authorization Endpoint
(such as when using the Authorization Code Flow)
and the Client explicitly requested the use of <strong>none</strong> at Registration time.</p>
<p>ID Tokens SHOULD NOT use the JWS or JWE x5u, x5c, jku, or jwk header parameter fields.
Instead,
references to keys used are communicated in advance using <tt class="xref doc docutils literal"><span class="pre">Discovery</span></tt>
and <tt class="xref doc docutils literal"><span class="pre">Registration</span></tt> parameters, per <em class="xref std std-ref">Section 10</em>.</p>
<p>The following is a non-normative example of
the set of Claims (the JWT Claims Set) in an ID Token:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
 <span class="s2">&quot;iss&quot;</span><span class="o">:</span> <span class="s2">&quot;https://server.example.com&quot;</span><span class="p">,</span>
 <span class="s2">&quot;sub&quot;</span><span class="o">:</span> <span class="s2">&quot;24400320&quot;</span><span class="p">,</span>
 <span class="s2">&quot;aud&quot;</span><span class="o">:</span> <span class="s2">&quot;s6BhdRkqt3&quot;</span><span class="p">,</span>
 <span class="s2">&quot;nonce&quot;</span><span class="o">:</span> <span class="s2">&quot;n-0S6_WzA2Mj&quot;</span><span class="p">,</span>
 <span class="s2">&quot;exp&quot;</span><span class="o">:</span> <span class="mi">1311281970</span><span class="p">,</span>
 <span class="s2">&quot;iat&quot;</span><span class="o">:</span> <span class="mi">1311280970</span><span class="p">,</span>
 <span class="s2">&quot;auth_time&quot;</span><span class="o">:</span> <span class="mi">1311280969</span><span class="p">,</span>
 <span class="s2">&quot;acr&quot;</span><span class="o">:</span> <span class="s2">&quot;urn:mace:incommon:iap:silver&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>( draft 17 )</p>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        <a class="uplink" href="../index.html">Contents</a>
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2011, HDKNR.COM.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>