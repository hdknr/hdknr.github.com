

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>3.1.2.1. Authentication Request &mdash; identity 1.0 documentation</title>
    
    <link rel="stylesheet" href="../static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/print.css" type="text/css" />
    <link rel="stylesheet" href="../static/openid.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/underscore.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <script type="text/javascript" src="../_static/theme_extras.js"></script>
    <link rel="top" title="identity 1.0 documentation" href="../index.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="../index.html">
          <span>identity 1.0 documentation</span></a></h1>
        <h2 class="heading"><span>3.1.2.1. Authentication Request</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        <a class="uplink" href="../index.html">Contents</a>
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="authentication-request">
<h1>3.1.2.1.  Authentication Request<a class="headerlink" href="#authentication-request" title="Permalink to this headline">Â¶</a></h1>
<p>An Authentication Request is an OAuth 2.0 Authorization Request
that requests that the End-User be authenticated
by the Authorization Server.</p>
<p>Authorization Servers MUST support the use of the HTTP GET
and POST methods defined in RFC 2616 <a class="reference internal" href="../swd.html#term-rfc2616"><em class="xref std std-term">[RFC2616]</em></a>
at the Authorization Endpoint.</p>
<p>Clients MAY use the HTTP GET or POST methods
to send the Authorization Request to the Authorization Server.
If using the HTTP GET method,
the request parameters are serialized using URI Query String Serialization,
per <em class="xref std std-ref">Section 13.1</em>.</p>
<p>If using the HTTP POST method,
the request parameters are serialized using Form Serialization,
per <em class="xref std std-ref">Section 13.2</em>.</p>
<p>OpenID Connect uses the following OAuth 2.0 request parameters
with the Authorization Code Flow:</p>
<dl class="glossary docutils">
<dt id="term-scope">scope</dt>
<dd><p class="first">REQUIRED.</p>
<p>OpenID Connect requests MUST contain the openid scope value.</p>
<p>If the <strong>openid</strong> <a class="reference internal" href="../uma_core.html#term-scope"><em class="xref std std-term">scope</em></a> value is not present,
the behavior is entirely unspecified.
Other scope values MAY be present.</p>
<p class="last">Scope values used that are not understood by an implementation SHOULD be ignored.
See <a class="reference internal" href="../core.html#core-5-4"><em>Sections 5.4</em></a> and <em class="xref std std-term">11</em>
for additional scope values defined by this specification.</p>
</dd>
<dt id="term-response-type">response_type</dt>
<dd><p class="first">REQUIRED.</p>
<p>OAuth 2.0 Response Type value
that determines the authorization processing flow to be used,
including what parameters are returned from the endpoints used.</p>
<p class="last">When using the Authorization Code Flow, this value is <strong>code</strong>.</p>
</dd>
<dt id="term-client-id">client_id</dt>
<dd><p class="first">REQUIRED.</p>
<p class="last">OAuth 2.0 Client Identifier valid at the Authorization Server.</p>
</dd>
<dt id="term-redirect-uri">redirect_uri</dt>
<dd><p class="first">REQUIRED.</p>
<p>Redirection URI to which the response will be sent.
This URI MUST exactly match one of the Redirection URI values
for the Client pre-registered at the OpenID Provider,
with the matching performed as described in Section 6.2.1 of <a class="reference internal" href="../swd.html#term-rfc3986"><em class="xref std std-term">[RFC3986]</em></a>
(Simple String Comparison).</p>
<p>When using this flow,
the Redirection URI SHOULD use the https scheme;
however, it MAY use the http scheme,
provided that the Client Type is <strong>confidential</strong>,
as defined in <a class="reference internal" href="../oauth.html#oauth-2-1"><em>Section 2.1 of OAuth 2.0</em></a>,
and provided the OP allows the use of http Redirection URIs in this case.</p>
<p class="last">The Redirection URI MAY use an alternate scheme,
such as one that is intended to identify a callback into a native application.</p>
</dd>
<dt id="term-state">state</dt>
<dd><p class="first">RECOMMENDED.</p>
<p>Opaque value used to maintain state
between the request and the callback.</p>
<p class="last">Typically,
Cross-Site Request Forgery (CSRF, XSRF) mitigation is
done by cryptographically binding the value of this parameter
with a browser cookie.</p>
</dd>
</dl>
<p>OpenID Connect also uses the following OAuth 2.0 request parameter,
which is defined in OAuth 2.0 Multiple Response Type Encoding Practices <a class="reference internal" href="../discovery.html#term-oauth-responses"><em class="xref std std-term">[OAuth.Responses]</em></a>:</p>
<dl class="glossary docutils">
<dt id="term-response-mode">response_mode</dt>
<dd><p class="first">OPTIONAL.</p>
<p>Informs the Authorization Server of the mechanism
to be used for returning parameters from the Authorization Endpoint.</p>
<p class="last">This use of this parameter is NOT RECOMMENDED
when the Response Mode that would be requested is the default mode
specified for the Response Type.</p>
</dd>
</dl>
<p>This specification also defines the following request parameters:</p>
<dl class="glossary docutils">
<dt id="term-nonce">nonce</dt>
<dd><p class="first">OPTIONAL.</p>
<p>String value used to associate a Client session with an ID Token,
and to mitigate replay attacks.</p>
<p>The value is passed through unmodified
from the Authorization Request to the ID Token.</p>
<p>Sufficient entropy MUST be present in the nonce values
used to prevent attackers from guessing values.</p>
<p class="last">For implementation notes, see <em class="xref std std-ref">Section 15.5.2</em>.</p>
</dd>
<dt id="term-display">display</dt>
<dd><p class="first">OPTIONAL.</p>
<p>ASCII string value that specifies
how the Authorization Server displays the authentication
and consent user interface pages to the End-User.</p>
<p>The defined values are:</p>
<blockquote>
<div><dl class="docutils">
<dt>page</dt>
<dd><p class="first">The Authorization Server SHOULD display the authentication
and consent UI consistent with a full User Agent page view.</p>
<p class="last">If the display parameter is not specified,
this is the default display mode.</p>
</dd>
<dt>popup</dt>
<dd><p class="first">The Authorization Server SHOULD display the authentication
and consent UI consistent with a popup User Agent window.</p>
<p class="last">The <strong>popup</strong> User Agent window should be of an appropriate size
for a login-focused dialog
and should not obscure the entire window
that it is popping up over.</p>
</dd>
<dt>touch</dt>
<dd>The Authorization Server SHOULD display the authentication
and consent UI consistent
with a device that leverages a touch interface.</dd>
<dt>wap</dt>
<dd>The Authorization Server SHOULD display the authentication
and consent UI consistent with a &#8220;feature phone&#8221; type display.</dd>
</dl>
</div></blockquote>
<p class="last">The Authorization Server MAY also attempt
to detect the capabilities of the User Agent
and present an appropriate display.</p>
</dd>
<dt id="term-prompt">prompt</dt>
<dd><p class="first">OPTIONAL.</p>
<p>Space delimited,
case sensitive list of ASCII string values
that specifies whether the Authorization Server prompts
the End-User for reauthentication and consent.</p>
<p>The defined values are:</p>
<blockquote>
<div><dl class="docutils">
<dt>none</dt>
<dd><p class="first">The Authorization Server MUST NOT display
any authentication or consent user interface pages.</p>
<p>An error is returned
if an End-User is not already authenticated
or the Client does not have pre-configured consent
for the requested Claims
or does not fulfill other conditions
for processing the request.</p>
<p>The error code will typically be <a class="reference internal" href="3.1.2.6.html#term-login-required"><em class="xref std std-term">login_required</em></a>,
<a class="reference internal" href="3.1.2.6.html#term-interaction-required"><em class="xref std std-term">interaction_required</em></a>,
or another code defined in <a class="reference internal" href="../core.html#core-3-1-2-6"><em>Section 3.1.2.6</em></a>.</p>
<p class="last">This can be used as a method
to check for existing authentication and/or consent.</p>
</dd>
<dt>login</dt>
<dd><p class="first">The Authorization Server SHOULD prompt the End-User
for reauthentication.</p>
<p class="last">If it cannot reauthenticate the End-User,
it MUST return an error, typically login_required.</p>
</dd>
<dt>consent</dt>
<dd><p class="first">The Authorization Server SHOULD prompt the End-User
for consent before returning information to the Client.</p>
<p class="last">If it cannot obtain consent,
it MUST return an error, typically <a class="reference internal" href="3.1.2.6.html#term-consent-required"><em class="xref std std-term">consent_required</em></a>.</p>
</dd>
<dt>select_account</dt>
<dd><p class="first">The Authorization Server SHOULD prompt the End-User
to select a user account.</p>
<p>This enables an End-User who has multiple accounts
at the Authorization Server to select
amongst the multiple accounts that they might have current sessions for.</p>
<p class="last">If it cannot obtain an account selection choice
made by the End-User,
it MUST return an error,
typically <a class="reference internal" href="3.1.2.6.html#term-account-selection-required"><em class="xref std std-term">account_selection_required</em></a>.</p>
</dd>
</dl>
</div></blockquote>
<p>The prompt parameter can be used by the Client
to make sure that the End-User is still present for the current session
or to bring attention to the request.</p>
<p class="last">If this parameter contains <em class="xref std std-ref">none</em> with any other value,
an error is returned.</p>
</dd>
<dt id="term-max-age">max_age</dt>
<dd><p class="first">OPTIONAL.</p>
<p>Maximum Authentication Age.</p>
<p>Specifies the allowable elapsed time in seconds
since the last time the End-User was actively authenticated by the OP.</p>
<p>If the elapsed time is greater than this value,
the OP MUST attempt to actively re-authenticate the End-User.
(The max_age request parameter corresponds to the OpenID 2.0 PAPE <em class="xref std std-term">[OpenID.PAPE]</em>
<strong>max_auth_age</strong> request parameter.)</p>
<p class="last">When max_age is used,
the ID Token returned MUST include an auth_time Claim Value.</p>
</dd>
<dt id="term-ui-locales">ui_locales</dt>
<dd><p class="first">OPTIONAL.</p>
<p>End-User&#8217;s preferred languages and scripts for the user interface,
represented as a space-separated list of BCP47 [RFC5646] language tag values,
ordered by preference.</p>
<p>For instance,
the value &#8220;fr-CA fr en&#8221; represents a preference for French
as spoken in Canada, then French (without a region designation),
followed by English (without a region designation).</p>
<p class="last">An error SHOULD NOT result
if some or all of the requested locales are
not supported by the OpenID Provider.</p>
</dd>
<dt id="term-id-token-hint">id_token_hint</dt>
<dd><p class="first">OPTIONAL.</p>
<p>ID Token previously issued by the Authorization Server being passed
as a hint about the End-User&#8217;s current or past authenticated session with the Client.</p>
<p>If the End-User identified by the ID Token is logged in or is logged in by the request,
then the Authorization Server returns a positive response;</p>
<p>otherwise, it SHOULD return an error,
such as <a class="reference internal" href="3.1.2.6.html#term-login-required"><em class="xref std std-term">login_required</em></a>.</p>
<p>When possible,
an id_token_hint SHOULD be present when prompt=none is used
and an <a class="reference internal" href="../uma_core.html#term-invalid-request"><em class="xref std std-term">invalid_request</em></a> error MAY be returned if it is not;
however,
the server SHOULD respond successfully when possible,
even if it is not present.</p>
<p>The Authorization Server need not be listed as an audience of the ID Token
when it is used as an id_token_hint value.</p>
<p>If the ID Token received by the RP from the OP is encrypted,
to use it as an id_token_hint,
the Client MUST decrypt the signed ID Token contained within the encrypted ID Token.</p>
<p class="last">The Client MAY re-encrypt the signed ID token to the Authentication Server
using a key that enables the server to decrypt the ID Token,
and use the re-encrypted ID token as the id_token_hint value.</p>
</dd>
<dt id="term-login-hint">login_hint</dt>
<dd><p class="first">OPTIONAL.</p>
<p>Hint to the Authorization Server
about the login identifier the End-User might use to log in (if necessary).</p>
<p>This hint can be used by an RP
if it first asks the End-User for their e-mail address (or other identifier)
and then wants to pass that value as a hint to the discovered authorization service.</p>
<p>It is RECOMMENDED that the hint value match the value used for discovery.</p>
<p>This value MAY also be a phone number in the format specified
for the phone_number Claim.</p>
<p class="last">The use of this parameter is left to the OP&#8217;s discretion.</p>
</dd>
<dt id="term-acr-values">acr_values</dt>
<dd><p class="first">OPTIONAL.</p>
<p>Requested Authentication Context Class Reference values.
Space-separated string that specifies the acr values
that the Authorization Server is being requested
to use for processing this Authentication Request,
with the values appearing in order of preference.</p>
<p>The Authentication Context Class satisfied by the authentication performed
is returned as the acr Claim Value,
as specified in <a class="reference internal" href="../core.html#core-2"><em>Section 2</em></a>.</p>
<p class="last">The acr Claim is requested as a Voluntary Claim by this parameter.</p>
</dd>
</dl>
<p>Other parameters MAY be sent.
See Sections <a class="reference internal" href="../core.html#core-3-2-2"><em>3.2.2</em></a>, <a class="reference internal" href="../core.html#core-3-3-2"><em>3.3.2</em></a>, <a class="reference internal" href="../core.html#core-5-2"><em>5.2</em></a>,
<em class="xref std std-ref">5.5 &lt;core.5.</em>, <a class="reference internal" href="../core.html#core-6"><em>6</em></a>, and <a class="reference internal" href="../core.html#core-7-2-1"><em>7.2.1</em></a>
for additional Authorization Request parameters
and parameter values defined by this specification.</p>
<p>The following is a non-normative example HTTP 302 redirect response
by the Client,
which triggers the User Agent to make an Authentication Request
to the Authorization Endpoint
(with line wraps within values for display purposes only):</p>
<div class="highlight-python"><pre>HTTP/1.1 302 Found
Location: https://server.example.com/authorize?
  response_type=code
  &amp;scope=openid%20profile%20email
  &amp;client_id=s6BhdRkqt3
  &amp;state=af0ifjsldkj
  &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb</pre>
</div>
<p>The following is the non-normative example request
that would be sent by the User Agent to the Authorization Server
in response to the HTTP 302 redirect response
by the Client above
(with line wraps within values for display purposes only):</p>
<div class="highlight-python"><pre>GET /authorize?
  response_type=code
  &amp;scope=openid%20profile%20email
  &amp;client_id=s6BhdRkqt3
  &amp;state=af0ifjsldkj
  &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb HTTP/1.1
Host: server.example.com</pre>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        <a class="uplink" href="../index.html">Contents</a>
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2011, HDKNR.COM.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>