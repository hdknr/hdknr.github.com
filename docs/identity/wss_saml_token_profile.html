

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Web Services Security SAML Token Profile Version 1.1.1 &mdash; identity 1.0 documentation</title>
    
    <link rel="stylesheet" href="static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    <link rel="stylesheet" href="static/openid.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
    <link rel="top" title="identity 1.0 documentation" href="index.html" />
    <link rel="next" title="Simple Cloud Identity Management: Protocol 1.0 (REST API 1.0)" href="scim_rest.html" />
    <link rel="prev" title="SAML V2.0 Holder-of-Key Web Browser SSO Profile Version 1.0" href="SamlHokWebSsoProfile.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="index.html">
          <span>identity 1.0 documentation</span></a></h1>
        <h2 class="heading"><span>Web Services Security SAML Token Profile Version 1.1.1</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="SamlHokWebSsoProfile.html">SAML V2.0 Holder-of-Key Web Browser SSO Profile Version 1.0</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="scim_rest.html">Simple Cloud Identity Management: Protocol 1.0 (REST API 1.0)</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="web-services-security-saml-token-profile-version-1-1-1">
<h1><a class="toc-backref" href="#id1">Web Services Security SAML Token Profile Version 1.1.1</a><a class="headerlink" href="#web-services-security-saml-token-profile-version-1-1-1" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="http://docs.oasis-open.org/wss-m/wss/v1.1.1/wss-SAMLTokenProfile-v1.1.1.html">http://docs.oasis-open.org/wss-m/wss/v1.1.1/wss-SAMLTokenProfile-v1.1.1.html</a></p>
<div class="section" id="abstract">
<span id="saml-token-profile-abstarct"></span><h2><a class="toc-backref" href="#id2">Abstract</a><a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h2>
<p>This document describes how to use Security Assertion Markup Language (SAML) V1.1 and
V2.0 assertions with the Web Services Security SOAP Message Security Version 1.1.1 specification.</p>
<p>With respect to the description of the use of SAML V1.1,
this document subsumes and is totally consistent
with the Web Services Security: SAML Token Profile 1.0
and includes all corrections identified in the 1.0 errata.</p>
<p>This document integrates specific error corrections
or editorial changes to the preceding specification,
within the scope of the Web Services Security and this TC.</p>
<p>This document introduces a third digit in the numbering convention
where the third digit represents a consolidation of error corrections,
bug fixes or editorial formatting changes (e.g., 1.1.1);
it does not add any new features beyond those of the base specifications (e.g., 1.1).</p>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#web-services-security-saml-token-profile-version-1-1-1" id="id1">Web Services Security SAML Token Profile Version 1.1.1</a><ul>
<li><a class="reference internal" href="#abstract" id="id2">Abstract</a><ul>
<li><a class="reference internal" href="#terminology" id="id3">2.3 Terminology</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage" id="id4">3 Usage</a><ul>
<li><a class="reference internal" href="#processing-model" id="id5">3.1 Processing Model</a></li>
<li><a class="reference internal" href="#subject-confirmation-of-saml-assertions" id="id6">3.5 Subject Confirmation of SAML Assertions</a><ul>
<li><a class="reference internal" href="#holder-of-key-subject-confirmation-method" id="id7">3.5.1 Holder-of-key Subject Confirmation Method</a><ul>
<li><a class="reference internal" href="#attesting-entity" id="id8">3.5.1.1 Attesting Entity</a></li>
<li><a class="reference internal" href="#receiver" id="id9">3.5.1.2  Receiver</a></li>
<li><a class="reference internal" href="#example-v2-0" id="id10">3.5.1.4 Example V2.0</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="terminology">
<span id="saml-token-profile-2-3"></span><h3><a class="toc-backref" href="#id3">2.3 Terminology</a><a class="headerlink" href="#terminology" title="Permalink to this headline">¶</a></h3>
<p>This specification employs the terminology defined in the WSS: SOAP Message Security specification.
The definitions for additional terminology used in this specification appear below.</p>
<dl class="glossary docutils">
<dt id="term-attesting-entity">Attesting Entity</dt>
<dd>the entity that provides the <em class="xref std std-term">confirmation evidence</em>
that will be used to establish the correspondence
between the <a class="reference internal" href="#term-subjects"><em class="xref std std-term">subjects</em></a> and claims of SAML statements (in SAML assertions) and SOAP message content.</dd>
<dt id="term-confirmation-method-identifier">Confirmation Method Identifier</dt>
<dd>the value within a SAML SubjectConfirmation element
that identifies the subject confirmation process to be used with the corresponding statements.</dd>
<dt id="term-subject-confirmation">Subject Confirmation</dt>
<dd>the process of establishing the correspondence
between the subject and claims of SAML statements (in SAML assertions) and SOAP message content
by verifying the confirmation evidence provided by an attesting entity.</dd>
<dt id="term-saml-assertion-authority">SAML Assertion Authority</dt>
<dd>A system entity that issues assertions.</dd>
<dt id="term-subject">Subject</dt>
<dd>A representation of the entity to which the claims in one or more SAML statements apply.</dd>
<dt id="term-subjects">Subjects</dt>
<dd><em class="xref std std-term">Subject</em></dd>
</dl>
</div>
</div>
<div class="section" id="usage">
<span id="saml-token-profile-3"></span><h2><a class="toc-backref" href="#id4">3 Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>This section defines the specific mechanisms and
procedures for using SAML assertions as security tokens.</p>
<div class="section" id="processing-model">
<span id="saml-token-profile-3-1"></span><h3><a class="toc-backref" href="#id5">3.1 Processing Model</a><a class="headerlink" href="#processing-model" title="Permalink to this headline">¶</a></h3>
<p>This specification extends
the token-independent processing model defined
by the WSS: SOAP Message Security specification.
When a receiver processes a &lt;wsse:Security&gt; header
containing or referencing SAML assertions,
it selects, based on its policy,
the signatures and assertions that it will process.</p>
<p>It is assumed that
a receiver’s signature selection policy MAY rely on semantic labeling[1]
of &lt;wsse:SecurityTokenReference&gt; elements occurring in the &lt;ds:KeyInfo&gt; elements
within the signatures.</p>
<p>It is also assumed that the assertions selected for validation and
processing will include those referenced from the &lt;ds:KeyInfo&gt; and
&lt;ds:SignedInfo&gt; elements of the selected signatures.</p>
<p>As part of its validation and processing of the selected assertions,
the receiver MUST[2] establish the relationship
between the subject and claims of the SAML statements
(of the referenced SAML assertions)
and the entity providing the evidence to satisfy the confirmation method
defined for the statements (i.e., the attesting entity).</p>
<p>Two methods for establishing this correspondence,
holder-of-key and sender-vouches are described below.
Systems implementing this specification MUST implement the processing necessary
to support both of these subject confirmation methods.</p>
</div>
<div class="section" id="subject-confirmation-of-saml-assertions">
<span id="saml-token-profile-3-5"></span><h3><a class="toc-backref" href="#id6">3.5 Subject Confirmation of SAML Assertions</a><a class="headerlink" href="#subject-confirmation-of-saml-assertions" title="Permalink to this headline">¶</a></h3>
<p>The SAML profile of WSS: SOAP Message Security requires that
systems support the holder-of-key and sender-vouches methods of subject confirmation.</p>
<p>It is strongly RECOMMENDED that
an XML signature be used to establish
the relationship between the message and the statements of the attached assertions.</p>
<p>This is especially RECOMMENDED
whenever the SOAP message exchange is conducted over an unprotected transport.</p>
<p>Any processor of SAML assertions MUST conform to the required validation
and processing rules defined in the corresponding SAML specification
including the validation of assertion signatures,
the processing of &lt;saml:Condition&gt; elements within assertions,
and the processing of &lt;saml2:SubjectConfirmationData&gt; attributes.</p>
<p>[SAMLCoreV1] defines the validation and processing rules for V1.1 assertions,
while [SAMLCoreV2] is authoritative for V2.0 assertions.
The following table enumerates
the mandatory subject confirmation methods and
summarizes their associated processing models:</p>
<p>Mechanism:</p>
<blockquote>
<div><p>holder-of-key</p>
<blockquote>
<div><dl class="docutils">
<dt>urn</dt>
<dd><ul class="first last simple">
<li><a class="reference external" href="urn:oasis:names:tc:SAML:1.0:cm:holder-of-key">urn:oasis:names:tc:SAML:1.0:cm:holder-of-key</a></li>
<li><a class="reference external" href="urn:oasis:names:tc:SAML:2.0:cm:holder-of-key">urn:oasis:names:tc:SAML:2.0:cm:holder-of-key</a></li>
</ul>
</dd>
</dl>
<p>RECOMMENDED Processing Rules</p>
<blockquote>
<div>The attesting entity demonstrates knowledge of a confirmation key identified
in a holder-of-key SubjectConfirmation element within the assertion.</div></blockquote>
</div></blockquote>
<p>sender-vouches</p>
<blockquote>
<div><dl class="docutils">
<dt>urn</dt>
<dd><ul class="first last simple">
<li><a class="reference external" href="urn:oasis:names:tc:SAML:1.0:cm:sender-vouches">urn:oasis:names:tc:SAML:1.0:cm:sender-vouches</a></li>
<li><a class="reference external" href="urn:oasis:names:tc:SAML:2.0:cm:sender-vouches">urn:oasis:names:tc:SAML:2.0:cm:sender-vouches</a></li>
</ul>
</dd>
</dl>
<p>RECOMMENDED Processing Rules</p>
<blockquote>
<div>The attesting entity, (presumed to be) different from the subject,
vouches for the verification of the subject.
The receiver MUST have an existing trust relationship with the attesting entity.
The attesting entity MUST protect the assertion in combination
with the message content against modification by another party. See also section 4.</div></blockquote>
</div></blockquote>
</div></blockquote>
<p>Note that
the high level processing model described in the following sections
does not differentiate between the attesting entity and the message sender
as would be necessary to guard against replay attacks.</p>
<p>The high-level processing model also does not take into account requirements
for authentication of receiver by sender,
or for message or assertion confidentiality.</p>
<p>These concerns must be addressed by means other than those described
in the high-level processing model (i.e., <a class="reference internal" href="#saml-token-profile-3-1"><em>section 3.1</em></a>).</p>
<div class="section" id="holder-of-key-subject-confirmation-method">
<span id="saml-token-profile-3-5-1"></span><h4><a class="toc-backref" href="#id7">3.5.1 Holder-of-key Subject Confirmation Method</a><a class="headerlink" href="#holder-of-key-subject-confirmation-method" title="Permalink to this headline">¶</a></h4>
<p>The following sections describe the holder-of-key method of establishing the correspondence
between a <em class="xref std std-term">SOAP message</em> and the <em class="xref std std-term">subject</em> and <em class="xref std std-term">claims of SAML assertions</em>
added to the SOAP message according to this specification.</p>
<div class="section" id="attesting-entity">
<h5><a class="toc-backref" href="#id8">3.5.1.1 Attesting Entity</a><a class="headerlink" href="#attesting-entity" title="Permalink to this headline">¶</a></h5>
<p>An <a class="reference internal" href="#term-attesting-entity"><em class="xref std std-term">attesting entity</em></a> demonstrates that
it is authorized to act as the subject of a holder-of-key confirmed SAML statement
by demonstrating knowledge of any key identified in a holder-of-key SubjectConfirmation element
associated with the statement by the assertion containing the statement.</p>
<p>Statements attested for by the holder-of-key method MUST be associated,
within their containing assertion,
with one or more holder-of-key SubjectConfirmation elements.</p>
<p>The SubjectConfirmation elements MUST include a &lt;ds:KeyInfo&gt; element
that identifies a public or secret key[5] that can be used to confirm the identity of the subject.</p>
<p>To satisfy the associated confirmation method processing to be performed by the message receiver,
the attesting entity MUST demonstrate knowledge of the <em class="xref std std-term">confirmation key</em>.
The attesting entity MAY accomplish this by using the <em class="xref std std-term">confirmation key</em>
to sign content within the message and by including the resulting &lt;ds:Signature&gt; element
in the &lt;wsse:Security&gt; header.
&lt;ds:Signature&gt; elements produced for this purpose MUST conform to the canonicalization and
token pre-pending rules defined in the WSS: SOAP Message Security specification.
The attesting entity MAY protect against substitution of a different
but equivalently confirmed[6] assertion by including,
as described in section 3.4.3 &#8220;SAML Assertion Referenced from SignedInfo&#8221;,
the <a class="reference internal" href="glossary.html#term-saml-assertion"><em class="xref std std-term">SAML assertion</em></a> (or an unambiguous reference to it)
in the content signed to demonstrate knowledge of the confirmation key.</p>
<p>SAML assertions that contain a holder-of-key SubjectConfirmation element
SHOULD contain a &lt;ds:Signature&gt; element
that protects the integrity of the confirmation &lt;ds:KeyInfo&gt;
established by the assertion authority.</p>
<p>The canonicalization method used to produce the &lt;ds:Signature&gt; elements
used to protect the integrity of SAML assertions MUST support
the validation of these &lt;ds:Signature&gt; elements in contexts
(such as &lt;wsse:Security&gt; header elements)
other than those in which the signatures were calculated.</p>
</div>
<div class="section" id="receiver">
<h5><a class="toc-backref" href="#id9">3.5.1.2  Receiver</a><a class="headerlink" href="#receiver" title="Permalink to this headline">¶</a></h5>
<p>Of the SAML assertions
it selects for processing,
a message receiver MUST NOT accept statements of these assertions
based on a holder-of-key SubjectConfirmation element defined for the statements
(within the assertion)
unless the receiver has validated the integrity of the assertion
and the attesting entity has demonstrated knowledge of a key identified
within the confirmation element.</p>
<p>If the receiver determines that
the attesting entity has demonstrated knowledge of a subject confirmation key,
then the subjects and claims of the SAML statements confirmed by the key
MAY be attributed to the attesting entity
and any content of the message
(including any SAML statements)
whose integrity is protected by the key
MAY be considered to have been provided by the attesting entity.</p>
</div>
<div class="section" id="example-v2-0">
<h5><a class="toc-backref" href="#id10">3.5.1.4 Example V2.0</a><a class="headerlink" href="#example-v2-0" title="Permalink to this headline">¶</a></h5>
<p>The following example illustrates the use of the holder-of-key subject confirmation method to establish the correspondence between the SOAP message and the subject of the SAML V2.0 assertion in the &lt;wsse:Security&gt; header:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;S12:Envelope</span> <span class="na">xmlns:S12=</span><span class="s">&quot;...&quot;</span> <span class="na">xmlns:wsu=</span><span class="s">&quot;...&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;S12:Header&gt;</span>

    <span class="nt">&lt;wsse:Security</span> <span class="na">xmlns:wsse=</span><span class="s">&quot;...&quot;</span> <span class="na">xmlns:wsse11=</span><span class="s">&quot;...&quot;</span> <span class="na">xmlns:ds=</span><span class="s">&quot;...&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;saml2:Assertion</span> <span class="na">xmlns:saml2=</span><span class="s">&quot;...&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;...&quot;</span>
            <span class="na">ID=</span><span class="s">”_a75adf55-01d7-40cc-929f-dbd8372ebdfc”</span><span class="nt">&gt;</span>
      <span class="nt">&lt;saml2:Subject&gt;</span>
              <span class="nt">&lt;saml2:NameID&gt;</span>
                     …
              <span class="nt">&lt;/saml2:NameID&gt;</span>
              <span class="nt">&lt;saml2:SubjectConfirmation</span>
            <span class="na">Method=</span><span class="s">”urn:oasis:names:tc:SAML:2.0:cm:holder-of-key”</span><span class="nt">&gt;</span>
            <span class="nt">&lt;saml2:SubjectConfirmationData</span>
                             <span class="na">xsi:type=</span><span class="s">&quot;saml2:KeyInfoConfirmationDataType&quot;</span><span class="nt">&gt;</span>
               <span class="nt">&lt;ds:KeyInfo&gt;</span>
                  <span class="nt">&lt;ds:KeyValue&gt;</span>…<span class="nt">&lt;/ds:KeyValue&gt;</span>
               <span class="nt">&lt;/ds:KeyInfo&gt;</span>
            <span class="nt">&lt;/saml2:SubjectConfirmationData&gt;</span>
         <span class="nt">&lt;/saml2:SubjectConfirmation&gt;</span>
      <span class="nt">&lt;/saml2:Subject&gt;</span>
      <span class="nt">&lt;saml2:Statement&gt;</span>
              …
      <span class="nt">&lt;/saml2:Statement&gt;</span>
        <span class="nt">&lt;ds:Signature&gt;</span>…<span class="nt">&lt;/ds:Signature&gt;</span>
      <span class="nt">&lt;/saml2:Assertion&gt;</span>

      <span class="nt">&lt;ds:Signature&gt;</span>
        <span class="nt">&lt;ds:SignedInfo&gt;</span>
          <span class="nt">&lt;ds:CanonicalizationMethod</span>
            <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;ds:SignatureMethod</span>
            <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;ds:Reference</span>
            <span class="na">URI=</span><span class="s">&quot;#MsgBody&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;ds:DigestMethod</span>
              <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;ds:DigestValue&gt;</span>GyGsF0Pi4xPU...<span class="nt">&lt;/ds:DigestValue&gt;</span>
          <span class="nt">&lt;/ds:Reference&gt;</span>
        <span class="nt">&lt;/ds:SignedInfo&gt;</span>
        <span class="nt">&lt;ds:SignatureValue&gt;</span>HJJWbvqW9E84vJVQk…<span class="nt">&lt;/ds:SignatureValue&gt;</span>
        <span class="nt">&lt;ds:KeyInfo&gt;</span>
          <span class="nt">&lt;wsse:SecurityTokenReference</span> <span class="na">wsu:Id=</span><span class="s">”STR1”</span>
            <span class="na">wsse11:TokenType=</span><span class="s">”http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0”</span><span class="nt">&gt;</span>
            <span class="nt">&lt;wsse:KeyIdentifier</span> <span class="na">wsu:Id=</span><span class="s">”…”</span>
              <span class="na">ValueType=</span><span class="s">”http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLID”</span><span class="nt">&gt;</span>
              _a75adf55-01d7-40cc-929f-dbd8372ebdfc
            <span class="nt">&lt;/wsse:KeyIdentifier&gt;</span>
          <span class="nt">&lt;/wsse:SecurityTokenReference&gt;</span>
        <span class="nt">&lt;/ds:KeyInfo&gt;</span>
      <span class="nt">&lt;/ds:Signature&gt;</span>
    <span class="nt">&lt;/wsse:Security&gt;</span>
  <span class="nt">&lt;/S12:Header&gt;</span>

  <span class="nt">&lt;S12:Body</span> <span class="na">wsu:Id=</span><span class="s">&quot;MsgBody&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ReportRequest&gt;</span>
      <span class="nt">&lt;TickerSymbol&gt;</span>SUNW<span class="nt">&lt;/TickerSymbol&gt;</span>
    <span class="nt">&lt;/ReportRequest&gt;</span>
  <span class="nt">&lt;/S12:Body&gt;</span>
<span class="nt">&lt;/S12:Envelope&gt;</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="SamlHokWebSsoProfile.html">SAML V2.0 Holder-of-Key Web Browser SSO Profile Version 1.0</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="scim_rest.html">Simple Cloud Identity Management: Protocol 1.0 (REST API 1.0)</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2011, HDKNR.COM.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>