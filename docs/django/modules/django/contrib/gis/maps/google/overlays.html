

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>django.contrib.gis.maps.google.overlays &mdash; Django Cheat 1 documentation</title>
    
    <link rel="stylesheet" href="../../../../../../static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../../static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../../../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../../../static/jquery.js"></script>
    <script type="text/javascript" src="../../../../../../static/underscore.js"></script>
    <script type="text/javascript" src="../../../../../../static/doctools.js"></script>
    <script type="text/javascript" src="../../../../../../static/theme_extras.js"></script>
    <link rel="top" title="Django Cheat 1 documentation" href="../../../../../../index.html" />
    <link rel="up" title="Module code" href="../../../../../index.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="../../../../../../index.html">
          <span>Django Cheat 1 documentation</span></a></h1>
        <h2 class="heading"><span>django.contrib.gis.maps.google.overlays</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        <a href="/">Home</a>:
        <a class="uplink" href="../../../../../../index.html">Contents</a>
        </p>

      </div>
      <div class="content">
        
        
  <h1>Source code for django.contrib.gis.maps.google.overlays</h1><div class="highlight"><pre>
<span class="kn">from</span> <span class="nn">django.utils.safestring</span> <span class="kn">import</span> <span class="n">mark_safe</span>
<span class="kn">from</span> <span class="nn">django.contrib.gis.geos</span> <span class="kn">import</span> <span class="n">fromstr</span><span class="p">,</span> <span class="n">Point</span><span class="p">,</span> <span class="n">LineString</span><span class="p">,</span> <span class="n">LinearRing</span><span class="p">,</span> <span class="n">Polygon</span>

<div class="viewcode-block" id="GEvent"><a class="viewcode-back" href="../../../../../../django.contrib.gis.maps.google.html#django.contrib.gis.maps.google.overlays.GEvent">[docs]</a><span class="k">class</span> <span class="nc">GEvent</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Python wrapper for the Google GEvent object.</span>

<span class="sd">    Events can be attached to any object derived from GOverlayBase with the</span>
<span class="sd">    add_event() call.</span>

<span class="sd">    For more information please see the Google Maps API Reference:</span>
<span class="sd">     http://code.google.com/apis/maps/documentation/reference.html#GEvent</span>

<span class="sd">    Example:</span>

<span class="sd">      from django.shortcuts import render_to_response</span>
<span class="sd">      from django.contrib.gis.maps.google import GoogleMap, GEvent, GPolyline</span>

<span class="sd">      def sample_request(request):</span>
<span class="sd">          polyline = GPolyline(&#39;LINESTRING(101 26, 112 26, 102 31)&#39;)</span>
<span class="sd">          event = GEvent(&#39;click&#39;,</span>
<span class="sd">            &#39;function() { location.href = &quot;http://www.google.com&quot;}&#39;)</span>
<span class="sd">          polyline.add_event(event)</span>
<span class="sd">          return render_to_response(&#39;mytemplate.html&#39;,</span>
<span class="sd">          {&#39;google&#39; : GoogleMap(polylines=[polyline])})</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">action</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes a GEvent object.</span>

<span class="sd">        Parameters:</span>

<span class="sd">        event:</span>
<span class="sd">          string for the event, such as &#39;click&#39;. The event must be a valid</span>
<span class="sd">          event for the object in the Google Maps API.</span>
<span class="sd">          There is no validation of the event type within Django.</span>

<span class="sd">        action:</span>
<span class="sd">          string containing a Javascript function, such as</span>
<span class="sd">          &#39;function() { location.href = &quot;newurl&quot;;}&#39;</span>
<span class="sd">          The string must be a valid Javascript function. Again there is no</span>
<span class="sd">          validation fo the function within Django.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="o">=</span> <span class="n">event</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">action</span> <span class="o">=</span> <span class="n">action</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Returns the parameter part of a GEvent.&quot;</span>
        <span class="k">return</span> <span class="n">mark_safe</span><span class="p">(</span><span class="s">&#39;&quot;</span><span class="si">%s</span><span class="s">&quot;, </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="p">))</span>
</div>
<span class="k">class</span> <span class="nc">GOverlayBase</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">events</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">latlng_from_coords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coords</span><span class="p">):</span>
        <span class="s">&quot;Generates a JavaScript array of GLatLng objects for the given coordinates.&quot;</span>
        <span class="k">return</span> <span class="s">&#39;[</span><span class="si">%s</span><span class="s">]&#39;</span> <span class="o">%</span> <span class="s">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">&#39;new GLatLng(</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">add_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="s">&quot;Attaches a GEvent to the overlay object.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;The string representation is the JavaScript API call.&quot;</span>
        <span class="k">return</span> <span class="n">mark_safe</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">(</span><span class="si">%s</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">js_params</span><span class="p">))</span>

<div class="viewcode-block" id="GPolygon"><a class="viewcode-back" href="../../../../../../django.contrib.gis.maps.google.html#django.contrib.gis.maps.google.overlays.GPolygon">[docs]</a><span class="k">class</span> <span class="nc">GPolygon</span><span class="p">(</span><span class="n">GOverlayBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Python wrapper for the Google GPolygon object.  For more information</span>
<span class="sd">    please see the Google Maps API Reference:</span>
<span class="sd">     http://code.google.com/apis/maps/documentation/reference.html#GPolygon</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">poly</span><span class="p">,</span>
                 <span class="n">stroke_color</span><span class="o">=</span><span class="s">&#39;#0000ff&#39;</span><span class="p">,</span> <span class="n">stroke_weight</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">stroke_opacity</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                 <span class="n">fill_color</span><span class="o">=</span><span class="s">&#39;#0000ff&#39;</span><span class="p">,</span> <span class="n">fill_opacity</span><span class="o">=</span><span class="mf">0.4</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The GPolygon object initializes on a GEOS Polygon or a parameter that</span>
<span class="sd">        may be instantiated into GEOS Polygon.  Please note that this will not</span>
<span class="sd">        depict a Polygon&#39;s internal rings.</span>

<span class="sd">        Keyword Options:</span>

<span class="sd">          stroke_color:</span>
<span class="sd">            The color of the polygon outline. Defaults to &#39;#0000ff&#39; (blue).</span>

<span class="sd">          stroke_weight:</span>
<span class="sd">            The width of the polygon outline, in pixels.  Defaults to 2.</span>

<span class="sd">          stroke_opacity:</span>
<span class="sd">            The opacity of the polygon outline, between 0 and 1.  Defaults to 1.</span>

<span class="sd">          fill_color:</span>
<span class="sd">            The color of the polygon fill.  Defaults to &#39;#0000ff&#39; (blue).</span>

<span class="sd">          fill_opacity:</span>
<span class="sd">            The opacity of the polygon fill.  Defaults to 0.4.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">poly</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span> <span class="n">poly</span> <span class="o">=</span> <span class="n">fromstr</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">poly</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span> <span class="n">poly</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">poly</span><span class="p">,</span> <span class="n">Polygon</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&#39;GPolygon may only initialize on GEOS Polygons.&#39;</span><span class="p">)</span>

        <span class="c"># Getting the envelope of the input polygon (used for automatically</span>
        <span class="c"># determining the zoom level).</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">envelope</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">envelope</span>

        <span class="c"># Translating the coordinates into a JavaScript array of</span>
        <span class="c"># Google `GLatLng` objects.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">latlng_from_coords</span><span class="p">(</span><span class="n">poly</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>

        <span class="c"># Stroke settings.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stroke_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke_opacity</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke_weight</span> <span class="o">=</span> <span class="n">stroke_color</span><span class="p">,</span> <span class="n">stroke_opacity</span><span class="p">,</span> <span class="n">stroke_weight</span>

        <span class="c"># Fill settings.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fill_opacity</span> <span class="o">=</span> <span class="n">fill_color</span><span class="p">,</span> <span class="n">fill_opacity</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">GPolygon</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">js_params</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">, &quot;</span><span class="si">%s</span><span class="s">&quot;, </span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">, &quot;</span><span class="si">%s</span><span class="s">&quot;, </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke_weight</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stroke_opacity</span><span class="p">,</span>
                                               <span class="bp">self</span><span class="o">.</span><span class="n">fill_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fill_opacity</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="GPolyline"><a class="viewcode-back" href="../../../../../../django.contrib.gis.maps.google.html#django.contrib.gis.maps.google.overlays.GPolyline">[docs]</a><span class="k">class</span> <span class="nc">GPolyline</span><span class="p">(</span><span class="n">GOverlayBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Python wrapper for the Google GPolyline object.  For more information</span>
<span class="sd">    please see the Google Maps API Reference:</span>
<span class="sd">     http://code.google.com/apis/maps/documentation/reference.html#GPolyline</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">geom</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;#0000ff&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The GPolyline object may be initialized on GEOS LineStirng, LinearRing,</span>
<span class="sd">        and Polygon objects (internal rings not supported) or a parameter that</span>
<span class="sd">        may instantiated into one of the above geometries.</span>

<span class="sd">        Keyword Options:</span>

<span class="sd">          color:</span>
<span class="sd">            The color to use for the polyline.  Defaults to &#39;#0000ff&#39; (blue).</span>

<span class="sd">          weight:</span>
<span class="sd">            The width of the polyline, in pixels.  Defaults to 2.</span>

<span class="sd">          opacity:</span>
<span class="sd">            The opacity of the polyline, between 0 and 1.  Defaults to 1.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># If a GEOS geometry isn&#39;t passed in, try to contsruct one.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span> <span class="n">geom</span> <span class="o">=</span> <span class="n">fromstr</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span> <span class="n">geom</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span>
        <span class="c"># Generating the lat/lng coordinate pairs.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="p">(</span><span class="n">LineString</span><span class="p">,</span> <span class="n">LinearRing</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">latlngs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">latlng_from_coords</span><span class="p">(</span><span class="n">geom</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="n">Polygon</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">latlngs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">latlng_from_coords</span><span class="p">(</span><span class="n">geom</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&#39;GPolyline may only initialize on GEOS LineString, LinearRing, and/or Polygon geometries.&#39;</span><span class="p">)</span>

        <span class="c"># Getting the envelope for automatic zoom determination.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">envelope</span> <span class="o">=</span> <span class="n">geom</span><span class="o">.</span><span class="n">envelope</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">weight</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="n">color</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">opacity</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">GPolyline</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">js_params</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">, &quot;</span><span class="si">%s</span><span class="s">&quot;, </span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">latlngs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">weight</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">opacity</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="GIcon"><a class="viewcode-back" href="../../../../../../django.contrib.gis.maps.google.html#django.contrib.gis.maps.google.overlays.GIcon">[docs]</a><span class="k">class</span> <span class="nc">GIcon</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a GIcon object to pass into a Gmarker object.</span>

<span class="sd">    The keyword arguments map to instance attributes of the same name. These,</span>
<span class="sd">    in turn, correspond to a subset of the attributes of the official GIcon</span>
<span class="sd">    javascript object:</span>

<span class="sd">    http://code.google.com/apis/maps/documentation/reference.html#GIcon</span>

<span class="sd">    Because a Google map often uses several different icons, a name field has</span>
<span class="sd">    been added to the required arguments.</span>

<span class="sd">    Required Arguments:</span>
<span class="sd">        varname:</span>
<span class="sd">            A string which will become the basis for the js variable name of</span>
<span class="sd">            the marker, for this reason, your code should assign a unique</span>
<span class="sd">            name for each GIcon you instantiate, otherwise there will be</span>
<span class="sd">            name space collisions in your javascript.</span>

<span class="sd">    Keyword Options:</span>
<span class="sd">        image:</span>
<span class="sd">            The url of the image to be used as the icon on the map defaults</span>
<span class="sd">            to &#39;G_DEFAULT_ICON&#39;</span>

<span class="sd">        iconsize:</span>
<span class="sd">            a tuple representing the pixel size of the foreground (not the</span>
<span class="sd">            shadow) image of the icon, in the format: (width, height) ex.:</span>

<span class="sd">            GIcon(&#39;fast_food&#39;,</span>
<span class="sd">                  image=&quot;/media/icon/star.png&quot;,</span>
<span class="sd">                  iconsize=(15,10))</span>

<span class="sd">            Would indicate your custom icon was 15px wide and 10px height.</span>

<span class="sd">        shadow:</span>
<span class="sd">            the url of the image of the icon&#39;s shadow</span>

<span class="sd">        shadowsize:</span>
<span class="sd">            a tuple representing the pixel size of the shadow image, format is</span>
<span class="sd">            the same as ``iconsize``</span>

<span class="sd">        iconanchor:</span>
<span class="sd">            a tuple representing the pixel coordinate relative to the top left</span>
<span class="sd">            corner of the icon image at which this icon is anchored to the map.</span>
<span class="sd">            In (x, y) format.  x increases to the right in the Google Maps</span>
<span class="sd">            coordinate system and y increases downwards in the Google Maps</span>
<span class="sd">            coordinate system.)</span>

<span class="sd">        infowindowanchor:</span>
<span class="sd">            The pixel coordinate relative to the top left corner of the icon</span>
<span class="sd">            image at which the info window is anchored to this icon.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">varname</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">iconsize</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">shadow</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">shadowsize</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">iconanchor</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">infowindowanchor</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">varname</span> <span class="o">=</span> <span class="n">varname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">image</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iconsize</span> <span class="o">=</span> <span class="n">iconsize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shadow</span> <span class="o">=</span> <span class="n">shadow</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shadowsize</span> <span class="o">=</span> <span class="n">shadowsize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iconanchor</span> <span class="o">=</span> <span class="n">iconanchor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infowindowanchor</span> <span class="o">=</span> <span class="n">infowindowanchor</span>

    <span class="k">def</span> <span class="nf">__cmp__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">cmp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">varname</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">varname</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># XOR with hash of GIcon type so that hash(&#39;varname&#39;) won&#39;t </span>
        <span class="c"># equal hash(GIcon(&#39;varname&#39;)).</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">)</span> <span class="o">^</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">varname</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="GMarker"><a class="viewcode-back" href="../../../../../../django.contrib.gis.maps.google.html#django.contrib.gis.maps.google.overlays.GMarker">[docs]</a><span class="k">class</span> <span class="nc">GMarker</span><span class="p">(</span><span class="n">GOverlayBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Python wrapper for the Google GMarker object.  For more information</span>
<span class="sd">    please see the Google Maps API Reference:</span>
<span class="sd">     http://code.google.com/apis/maps/documentation/reference.html#GMarker</span>

<span class="sd">    Example:</span>

<span class="sd">      from django.shortcuts import render_to_response</span>
<span class="sd">      from django.contrib.gis.maps.google.overlays import GMarker, GEvent</span>

<span class="sd">      def sample_request(request):</span>
<span class="sd">          marker = GMarker(&#39;POINT(101 26)&#39;)</span>
<span class="sd">          event = GEvent(&#39;click&#39;,</span>
<span class="sd">                         &#39;function() { location.href = &quot;http://www.google.com&quot;}&#39;)</span>
<span class="sd">          marker.add_event(event)</span>
<span class="sd">          return render_to_response(&#39;mytemplate.html&#39;,</span>
<span class="sd">                 {&#39;google&#39; : GoogleMap(markers=[marker])})</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">geom</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">draggable</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The GMarker object may initialize on GEOS Points or a parameter</span>
<span class="sd">        that may be instantiated into a GEOS point.  Keyword options map to</span>
<span class="sd">        GMarkerOptions -- so far only the title option is supported.</span>

<span class="sd">        Keyword Options:</span>
<span class="sd">         title:</span>
<span class="sd">           Title option for GMarker, will be displayed as a tooltip.</span>

<span class="sd">         draggable:</span>
<span class="sd">           Draggable option for GMarker, disabled by default.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># If a GEOS geometry isn&#39;t passed in, try to construct one.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span> <span class="n">geom</span> <span class="o">=</span> <span class="n">fromstr</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span> <span class="n">geom</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="n">Point</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">latlng</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">latlng_from_coords</span><span class="p">(</span><span class="n">geom</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&#39;GMarker may only initialize on GEOS Point geometry.&#39;</span><span class="p">)</span>
        <span class="c"># Getting the envelope for automatic zoom determination.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">envelope</span> <span class="o">=</span> <span class="n">geom</span><span class="o">.</span><span class="n">envelope</span>
        <span class="c"># TODO: Add support for more GMarkerOptions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draggable</span> <span class="o">=</span> <span class="n">draggable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">icon</span> <span class="o">=</span> <span class="n">icon</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">GMarker</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">latlng_from_coords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coords</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;new GLatLng(</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="s">)&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">options</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;title: &quot;</span><span class="si">%s</span><span class="s">&quot;&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">icon</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;icon: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">icon</span><span class="o">.</span><span class="n">varname</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">draggable</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;draggable: true&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s">&#39;{</span><span class="si">%s</span><span class="s">}&#39;</span> <span class="o">%</span> <span class="s">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">js_params</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">latlng</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">())</span></div>
</pre></div>

      </div>
      <div class="bottomnav">
      
        <p>
        <a href="/">Home</a>:
        <a class="uplink" href="../../../../../../index.html">Contents</a>
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2012, HDKNR.COM.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2pre.
    </div>
  </body>
</html>