

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>django.contrib.gis.gdal.tests.test_geom &mdash; Django Cheat 1 documentation</title>
    
    <link rel="stylesheet" href="../../../../../../static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../../static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../../../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../../../static/jquery.js"></script>
    <script type="text/javascript" src="../../../../../../static/underscore.js"></script>
    <script type="text/javascript" src="../../../../../../static/doctools.js"></script>
    <script type="text/javascript" src="../../../../../../static/theme_extras.js"></script>
    <link rel="top" title="Django Cheat 1 documentation" href="../../../../../../index.html" />
    <link rel="up" title="django.contrib.gis.gdal.tests" href="../tests.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="../../../../../../index.html">
          <span>Django Cheat 1 documentation</span></a></h1>
        <h2 class="heading"><span>django.contrib.gis.gdal.tests.test_geom</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        <a href="/">Home</a>:
        <a class="uplink" href="../../../../../../index.html">Contents</a>
        </p>

      </div>
      <div class="content">
        
        
  <h1>Source code for django.contrib.gis.gdal.tests.test_geom</h1><div class="highlight"><pre>
<span class="kn">from</span> <span class="nn">django.contrib.gis.gdal</span> <span class="kn">import</span> <span class="n">OGRGeometry</span><span class="p">,</span> <span class="n">OGRGeomType</span><span class="p">,</span> \
    <span class="n">OGRException</span><span class="p">,</span> <span class="n">OGRIndexError</span><span class="p">,</span> <span class="n">SpatialReference</span><span class="p">,</span> <span class="n">CoordTransform</span><span class="p">,</span> \
    <span class="n">GDAL_VERSION</span>
<span class="kn">from</span> <span class="nn">django.utils</span> <span class="kn">import</span> <span class="n">unittest</span>
<span class="kn">from</span> <span class="nn">django.contrib.gis.geometry.test_data</span> <span class="kn">import</span> <span class="n">TestDataMixin</span>

<div class="viewcode-block" id="OGRGeomTest"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest">[docs]</a><span class="k">class</span> <span class="nc">OGRGeomTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">,</span> <span class="n">TestDataMixin</span><span class="p">):</span>
    <span class="s">&quot;This tests the OGR Geometry.&quot;</span>

<div class="viewcode-block" id="OGRGeomTest.test00a_geomtype"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test00a_geomtype">[docs]</a>    <span class="k">def</span> <span class="nf">test00a_geomtype</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing OGRGeomType object.&quot;</span>

        <span class="c"># OGRGeomType should initialize on all these inputs.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">OGRGeomType</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">OGRGeomType</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">OGRGeomType</span><span class="p">(</span><span class="s">&#39;point&#39;</span><span class="p">)</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">OGRGeomType</span><span class="p">(</span><span class="s">&#39;GeometrycollectioN&#39;</span><span class="p">)</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">OGRGeomType</span><span class="p">(</span><span class="s">&#39;LINearrING&#39;</span><span class="p">)</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">OGRGeomType</span><span class="p">(</span><span class="s">&#39;Unknown&#39;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&#39;Could not create an OGRGeomType object!&#39;</span><span class="p">)</span>

        <span class="c"># Should throw TypeError on this input</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">OGRException</span><span class="p">,</span> <span class="n">OGRGeomType</span><span class="p">,</span> <span class="mi">23</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">OGRException</span><span class="p">,</span> <span class="n">OGRGeomType</span><span class="p">,</span> <span class="s">&#39;fooD&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">OGRException</span><span class="p">,</span> <span class="n">OGRGeomType</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>

        <span class="c"># Equivalence can take strings, ints, and other OGRGeomTypes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="n">OGRGeomType</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">OGRGeomType</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="n">OGRGeomType</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="o">==</span> <span class="s">&#39;GeometryCollection&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="n">OGRGeomType</span><span class="p">(</span><span class="s">&#39;point&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s">&#39;POINT&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">OGRGeomType</span><span class="p">(</span><span class="s">&#39;point&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="n">OGRGeomType</span><span class="p">(</span><span class="s">&#39;unknown&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="n">OGRGeomType</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">==</span> <span class="s">&#39;MULtiPolyGON&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">OGRGeomType</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="n">OGRGeomType</span><span class="p">(</span><span class="s">&#39;point&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="n">OGRGeomType</span><span class="p">(</span><span class="s">&#39;POINT&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="n">OGRGeomType</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>

        <span class="c"># Testing the Django field name equivalent property.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;PointField&#39;</span><span class="p">,</span> <span class="n">OGRGeomType</span><span class="p">(</span><span class="s">&#39;Point&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">django</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;GeometryField&#39;</span><span class="p">,</span> <span class="n">OGRGeomType</span><span class="p">(</span><span class="s">&#39;Unknown&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">django</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">OGRGeomType</span><span class="p">(</span><span class="s">&#39;none&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">django</span><span class="p">)</span>

        <span class="c"># &#39;Geometry&#39; initialization implies an unknown geometry type.</span>
        <span class="n">gt</span> <span class="o">=</span> <span class="n">OGRGeomType</span><span class="p">(</span><span class="s">&#39;Geometry&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">gt</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;Unknown&#39;</span><span class="p">,</span> <span class="n">gt</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test00b_geomtype_25d"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test00b_geomtype_25d">[docs]</a>    <span class="k">def</span> <span class="nf">test00b_geomtype_25d</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing OGRGeomType object with 25D types.&quot;</span>
        <span class="n">wkb25bit</span> <span class="o">=</span> <span class="n">OGRGeomType</span><span class="o">.</span><span class="n">wkb25bit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">OGRGeomType</span><span class="p">(</span><span class="n">wkb25bit</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="s">&#39;Point25D&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">OGRGeomType</span><span class="p">(</span><span class="s">&#39;MultiLineString25D&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="mi">5</span> <span class="o">+</span> <span class="n">wkb25bit</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;GeometryCollectionField&#39;</span><span class="p">,</span> <span class="n">OGRGeomType</span><span class="p">(</span><span class="s">&#39;GeometryCollection25D&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">django</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test01a_wkt"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test01a_wkt">[docs]</a>    <span class="k">def</span> <span class="nf">test01a_wkt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing WKT output.&quot;</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">wkt_out</span><span class="p">:</span>
            <span class="n">geom</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">wkt</span><span class="p">,</span> <span class="n">geom</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test01a_ewkt"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test01a_ewkt">[docs]</a>    <span class="k">def</span> <span class="nf">test01a_ewkt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing EWKT input/output.&quot;</span>
        <span class="k">for</span> <span class="n">ewkt_val</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;POINT (1 2 3)&#39;</span><span class="p">,</span> <span class="s">&#39;LINEARRING (0 0,1 1,2 1,0 0)&#39;</span><span class="p">):</span>
            <span class="c"># First with ewkt output when no SRID in EWKT</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ewkt_val</span><span class="p">,</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">ewkt_val</span><span class="p">)</span><span class="o">.</span><span class="n">ewkt</span><span class="p">)</span>
            <span class="c"># No test consumption with an SRID specified.</span>
            <span class="n">ewkt_val</span> <span class="o">=</span> <span class="s">&#39;SRID=4326;</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">ewkt_val</span>
            <span class="n">geom</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">ewkt_val</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ewkt_val</span><span class="p">,</span> <span class="n">geom</span><span class="o">.</span><span class="n">ewkt</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">4326</span><span class="p">,</span> <span class="n">geom</span><span class="o">.</span><span class="n">srs</span><span class="o">.</span><span class="n">srid</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test01b_gml"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test01b_gml">[docs]</a>    <span class="k">def</span> <span class="nf">test01b_gml</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing GML output.&quot;</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">wkt_out</span><span class="p">:</span>
            <span class="n">geom</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
            <span class="n">exp_gml</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">gml</span>
            <span class="k">if</span> <span class="n">GDAL_VERSION</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">):</span>
                <span class="c"># In GDAL 1.8, the non-conformant GML tag  &lt;gml:GeometryCollection&gt; was</span>
                <span class="c"># replaced with &lt;gml:MultiGeometry&gt;.</span>
                <span class="n">exp_gml</span> <span class="o">=</span> <span class="n">exp_gml</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;GeometryCollection&#39;</span><span class="p">,</span> <span class="s">&#39;MultiGeometry&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">exp_gml</span><span class="p">,</span> <span class="n">geom</span><span class="o">.</span><span class="n">gml</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test01c_hex"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test01c_hex">[docs]</a>    <span class="k">def</span> <span class="nf">test01c_hex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing HEX input/output.&quot;</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">hex_wkt</span><span class="p">:</span>
            <span class="n">geom1</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">hex</span><span class="p">,</span> <span class="n">geom1</span><span class="o">.</span><span class="n">hex</span><span class="p">)</span>
            <span class="c"># Constructing w/HEX</span>
            <span class="n">geom2</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">hex</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">geom1</span><span class="p">,</span> <span class="n">geom2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test01d_wkb"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test01d_wkb">[docs]</a>    <span class="k">def</span> <span class="nf">test01d_wkb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing WKB input/output.&quot;</span>
        <span class="kn">from</span> <span class="nn">binascii</span> <span class="kn">import</span> <span class="n">b2a_hex</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">hex_wkt</span><span class="p">:</span>
            <span class="n">geom1</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
            <span class="n">wkb</span> <span class="o">=</span> <span class="n">geom1</span><span class="o">.</span><span class="n">wkb</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">b2a_hex</span><span class="p">(</span><span class="n">wkb</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="n">g</span><span class="o">.</span><span class="n">hex</span><span class="p">)</span>
            <span class="c"># Constructing w/WKB.</span>
            <span class="n">geom2</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">wkb</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">geom1</span><span class="p">,</span> <span class="n">geom2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test01e_json"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test01e_json">[docs]</a>    <span class="k">def</span> <span class="nf">test01e_json</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing GeoJSON input/output.&quot;</span>
        <span class="kn">from</span> <span class="nn">django.contrib.gis.gdal.prototypes.geom</span> <span class="kn">import</span> <span class="n">GEOJSON</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">GEOJSON</span><span class="p">:</span> <span class="k">return</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">json_geoms</span><span class="p">:</span>
            <span class="n">geom</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="s">&#39;not_equal&#39;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">json</span><span class="p">,</span> <span class="n">geom</span><span class="o">.</span><span class="n">json</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">json</span><span class="p">,</span> <span class="n">geom</span><span class="o">.</span><span class="n">geojson</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">OGRGeometry</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">wkt</span><span class="p">),</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">geom</span><span class="o">.</span><span class="n">json</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test02_points"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test02_points">[docs]</a>    <span class="k">def</span> <span class="nf">test02_points</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing Point objects.&quot;</span>

        <span class="n">prev</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;POINT(0 0)&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">points</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="s">&#39;z&#39;</span><span class="p">):</span> <span class="c"># No 3D</span>
                <span class="n">pnt</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">pnt</span><span class="o">.</span><span class="n">geom_type</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;POINT&#39;</span><span class="p">,</span> <span class="n">pnt</span><span class="o">.</span><span class="n">geom_name</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pnt</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">pnt</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">),</span> <span class="n">pnt</span><span class="o">.</span><span class="n">tuple</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test03_multipoints"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test03_multipoints">[docs]</a>    <span class="k">def</span> <span class="nf">test03_multipoints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing MultiPoint objects.&quot;</span>
        <span class="k">for</span> <span class="n">mp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">multipoints</span><span class="p">:</span>
            <span class="n">mgeom1</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">mp</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span> <span class="c"># First one from WKT</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">mgeom1</span><span class="o">.</span><span class="n">geom_type</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;MULTIPOINT&#39;</span><span class="p">,</span> <span class="n">mgeom1</span><span class="o">.</span><span class="n">geom_name</span><span class="p">)</span>
            <span class="n">mgeom2</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;MULTIPOINT&#39;</span><span class="p">)</span> <span class="c"># Creating empty multipoint</span>
            <span class="n">mgeom3</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;MULTIPOINT&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">mgeom1</span><span class="p">:</span>
                <span class="n">mgeom2</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">g</span><span class="p">)</span> <span class="c"># adding each point from the multipoints</span>
                <span class="n">mgeom3</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span> <span class="c"># should take WKT as well</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mgeom1</span><span class="p">,</span> <span class="n">mgeom2</span><span class="p">)</span> <span class="c"># they should equal</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mgeom1</span><span class="p">,</span> <span class="n">mgeom3</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mp</span><span class="o">.</span><span class="n">coords</span><span class="p">,</span> <span class="n">mgeom2</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mp</span><span class="o">.</span><span class="n">n_p</span><span class="p">,</span> <span class="n">mgeom2</span><span class="o">.</span><span class="n">point_count</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test04_linestring"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test04_linestring">[docs]</a>    <span class="k">def</span> <span class="nf">test04_linestring</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing LineString objects.&quot;</span>
        <span class="n">prev</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;POINT(0 0)&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ls</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">linestrings</span><span class="p">:</span>
            <span class="n">linestr</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">ls</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">linestr</span><span class="o">.</span><span class="n">geom_type</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;LINESTRING&#39;</span><span class="p">,</span> <span class="n">linestr</span><span class="o">.</span><span class="n">geom_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ls</span><span class="o">.</span><span class="n">n_p</span><span class="p">,</span> <span class="n">linestr</span><span class="o">.</span><span class="n">point_count</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ls</span><span class="o">.</span><span class="n">coords</span><span class="p">,</span> <span class="n">linestr</span><span class="o">.</span><span class="n">tuple</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="n">linestr</span> <span class="o">==</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">ls</span><span class="o">.</span><span class="n">wkt</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="n">linestr</span> <span class="o">!=</span> <span class="n">prev</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">OGRIndexError</span><span class="p">,</span> <span class="n">linestr</span><span class="o">.</span><span class="n">__getitem__</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">linestr</span><span class="p">))</span>
            <span class="n">prev</span> <span class="o">=</span> <span class="n">linestr</span>

            <span class="c"># Testing the x, y properties.</span>
            <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">tmpx</span> <span class="k">for</span> <span class="n">tmpx</span><span class="p">,</span> <span class="n">tmpy</span> <span class="ow">in</span> <span class="n">ls</span><span class="o">.</span><span class="n">coords</span><span class="p">]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">tmpy</span> <span class="k">for</span> <span class="n">tmpx</span><span class="p">,</span> <span class="n">tmpy</span> <span class="ow">in</span> <span class="n">ls</span><span class="o">.</span><span class="n">coords</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">linestr</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">linestr</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test05_multilinestring"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test05_multilinestring">[docs]</a>    <span class="k">def</span> <span class="nf">test05_multilinestring</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing MultiLineString objects.&quot;</span>
        <span class="n">prev</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;POINT(0 0)&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">mls</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">multilinestrings</span><span class="p">:</span>
            <span class="n">mlinestr</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">mls</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">mlinestr</span><span class="o">.</span><span class="n">geom_type</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;MULTILINESTRING&#39;</span><span class="p">,</span> <span class="n">mlinestr</span><span class="o">.</span><span class="n">geom_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mls</span><span class="o">.</span><span class="n">n_p</span><span class="p">,</span> <span class="n">mlinestr</span><span class="o">.</span><span class="n">point_count</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mls</span><span class="o">.</span><span class="n">coords</span><span class="p">,</span> <span class="n">mlinestr</span><span class="o">.</span><span class="n">tuple</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="n">mlinestr</span> <span class="o">==</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">mls</span><span class="o">.</span><span class="n">wkt</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="n">mlinestr</span> <span class="o">!=</span> <span class="n">prev</span><span class="p">)</span>
            <span class="n">prev</span> <span class="o">=</span> <span class="n">mlinestr</span>
            <span class="k">for</span> <span class="n">ls</span> <span class="ow">in</span> <span class="n">mlinestr</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">ls</span><span class="o">.</span><span class="n">geom_type</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;LINESTRING&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">.</span><span class="n">geom_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">OGRIndexError</span><span class="p">,</span> <span class="n">mlinestr</span><span class="o">.</span><span class="n">__getitem__</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">mlinestr</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test06_linearring"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test06_linearring">[docs]</a>    <span class="k">def</span> <span class="nf">test06_linearring</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing LinearRing objects.&quot;</span>
        <span class="n">prev</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;POINT(0 0)&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">rr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">linearrings</span><span class="p">:</span>
            <span class="n">lr</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">rr</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
            <span class="c">#self.assertEqual(101, lr.geom_type.num)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;LINEARRING&#39;</span><span class="p">,</span> <span class="n">lr</span><span class="o">.</span><span class="n">geom_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">rr</span><span class="o">.</span><span class="n">n_p</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">lr</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="n">lr</span> <span class="o">==</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">rr</span><span class="o">.</span><span class="n">wkt</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="n">lr</span> <span class="o">!=</span> <span class="n">prev</span><span class="p">)</span>
            <span class="n">prev</span> <span class="o">=</span> <span class="n">lr</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test07a_polygons"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test07a_polygons">[docs]</a>    <span class="k">def</span> <span class="nf">test07a_polygons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing Polygon objects.&quot;</span>

        <span class="c"># Testing `from_bbox` class method</span>
        <span class="n">bbox</span> <span class="o">=</span>  <span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span><span class="o">-</span><span class="mi">90</span><span class="p">,</span><span class="mi">180</span><span class="p">,</span><span class="mi">90</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="o">.</span><span class="n">from_bbox</span><span class="p">(</span> <span class="n">bbox</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">bbox</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">extent</span><span class="p">)</span>

        <span class="n">prev</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;POINT(0 0)&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">polygons</span><span class="p">:</span>
            <span class="n">poly</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">poly</span><span class="o">.</span><span class="n">geom_type</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;POLYGON&#39;</span><span class="p">,</span> <span class="n">poly</span><span class="o">.</span><span class="n">geom_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">n_p</span><span class="p">,</span> <span class="n">poly</span><span class="o">.</span><span class="n">point_count</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">n_i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">poly</span><span class="p">))</span>

            <span class="c"># Testing area &amp; centroid.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">area</span><span class="p">,</span> <span class="n">poly</span><span class="o">.</span><span class="n">area</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">centroid</span><span class="o">.</span><span class="n">tuple</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">centroid</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">centroid</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">y</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>

            <span class="c"># Testing equivalence</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="n">poly</span> <span class="o">==</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">wkt</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="n">poly</span> <span class="o">!=</span> <span class="n">prev</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">ext_ring_cs</span><span class="p">:</span>
                <span class="n">ring</span> <span class="o">=</span> <span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">ext_ring_cs</span><span class="p">,</span> <span class="n">ring</span><span class="o">.</span><span class="n">tuple</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">ext_ring_cs</span><span class="p">,</span> <span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tuple</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">ext_ring_cs</span><span class="p">),</span> <span class="n">ring</span><span class="o">.</span><span class="n">point_count</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">poly</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;LINEARRING&#39;</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">geom_name</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test07b_closepolygons"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test07b_closepolygons">[docs]</a>    <span class="k">def</span> <span class="nf">test07b_closepolygons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing closing Polygon objects.&quot;</span>
        <span class="c"># Both rings in this geometry are not closed.</span>
        <span class="n">poly</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;POLYGON((0 0, 5 0, 5 5, 0 5), (1 1, 2 1, 2 2, 2 1))&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="n">poly</span><span class="o">.</span><span class="n">point_count</span><span class="p">)</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">BEGIN - expecting IllegalArgumentException; safe to ignore.</span><span class="se">\n</span><span class="s">&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">centroid</span>
        <span class="k">except</span> <span class="n">OGRException</span><span class="p">:</span>
            <span class="c"># Should raise an OGR exception, rings are not closed</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&#39;Should have raised an OGRException!&#39;</span><span class="p">)</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">END - expecting IllegalArgumentException; safe to ignore.</span><span class="se">\n</span><span class="s">&quot;</span>

        <span class="c"># Closing the rings -- doesn&#39;t work on GDAL versions 1.4.1 and below:</span>
        <span class="c"># http://trac.osgeo.org/gdal/ticket/1673</span>
        <span class="k">if</span> <span class="n">GDAL_VERSION</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span> <span class="k">return</span>
        <span class="n">poly</span><span class="o">.</span><span class="n">close_rings</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">poly</span><span class="o">.</span><span class="n">point_count</span><span class="p">)</span> <span class="c"># Two closing points should&#39;ve been added</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;POINT(2.5 2.5)&#39;</span><span class="p">),</span> <span class="n">poly</span><span class="o">.</span><span class="n">centroid</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test08_multipolygons"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test08_multipolygons">[docs]</a>    <span class="k">def</span> <span class="nf">test08_multipolygons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing MultiPolygon objects.&quot;</span>
        <span class="n">prev</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;POINT(0 0)&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">mp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">multipolygons</span><span class="p">:</span>
            <span class="n">mpoly</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">mp</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">mpoly</span><span class="o">.</span><span class="n">geom_type</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;MULTIPOLYGON&#39;</span><span class="p">,</span> <span class="n">mpoly</span><span class="o">.</span><span class="n">geom_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">mp</span><span class="o">.</span><span class="n">valid</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mp</span><span class="o">.</span><span class="n">n_p</span><span class="p">,</span> <span class="n">mpoly</span><span class="o">.</span><span class="n">point_count</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mp</span><span class="o">.</span><span class="n">num_geom</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">mpoly</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">OGRIndexError</span><span class="p">,</span> <span class="n">mpoly</span><span class="o">.</span><span class="n">__getitem__</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">mpoly</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">mpoly</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;POLYGON&#39;</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">geom_name</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">geom_type</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mpoly</span><span class="o">.</span><span class="n">wkt</span><span class="p">,</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">mp</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test09a_srs"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test09a_srs">[docs]</a>    <span class="k">def</span> <span class="nf">test09a_srs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing OGR Geometries with Spatial Reference objects.&quot;</span>
        <span class="k">for</span> <span class="n">mp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">multipolygons</span><span class="p">:</span>
            <span class="c"># Creating a geometry w/spatial reference</span>
            <span class="n">sr</span> <span class="o">=</span> <span class="n">SpatialReference</span><span class="p">(</span><span class="s">&#39;WGS84&#39;</span><span class="p">)</span>
            <span class="n">mpoly</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">mp</span><span class="o">.</span><span class="n">wkt</span><span class="p">,</span> <span class="n">sr</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">sr</span><span class="o">.</span><span class="n">wkt</span><span class="p">,</span> <span class="n">mpoly</span><span class="o">.</span><span class="n">srs</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>

            <span class="c"># Ensuring that SRS is propagated to clones.</span>
            <span class="n">klone</span> <span class="o">=</span> <span class="n">mpoly</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">sr</span><span class="o">.</span><span class="n">wkt</span><span class="p">,</span> <span class="n">klone</span><span class="o">.</span><span class="n">srs</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>

            <span class="c"># Ensuring all children geometries (polygons and their rings) all</span>
            <span class="c"># return the assigned spatial reference as well.</span>
            <span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="n">mpoly</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">sr</span><span class="o">.</span><span class="n">wkt</span><span class="p">,</span> <span class="n">poly</span><span class="o">.</span><span class="n">srs</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">ring</span> <span class="ow">in</span> <span class="n">poly</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">sr</span><span class="o">.</span><span class="n">wkt</span><span class="p">,</span> <span class="n">ring</span><span class="o">.</span><span class="n">srs</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>

            <span class="c"># Ensuring SRS propagate in topological ops.</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">topology_geoms</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">wkt_a</span><span class="p">,</span> <span class="n">sr</span><span class="p">)</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">topology_geoms</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">wkt_b</span><span class="p">,</span> <span class="n">sr</span><span class="p">)</span>
            <span class="n">diff</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
            <span class="n">union</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">sr</span><span class="o">.</span><span class="n">wkt</span><span class="p">,</span> <span class="n">diff</span><span class="o">.</span><span class="n">srs</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">sr</span><span class="o">.</span><span class="n">srid</span><span class="p">,</span> <span class="n">union</span><span class="o">.</span><span class="n">srs</span><span class="o">.</span><span class="n">srid</span><span class="p">)</span>

            <span class="c"># Instantiating w/an integer SRID</span>
            <span class="n">mpoly</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">mp</span><span class="o">.</span><span class="n">wkt</span><span class="p">,</span> <span class="mi">4326</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">4326</span><span class="p">,</span> <span class="n">mpoly</span><span class="o">.</span><span class="n">srid</span><span class="p">)</span>
            <span class="n">mpoly</span><span class="o">.</span><span class="n">srs</span> <span class="o">=</span> <span class="n">SpatialReference</span><span class="p">(</span><span class="mi">4269</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">4269</span><span class="p">,</span> <span class="n">mpoly</span><span class="o">.</span><span class="n">srid</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;NAD83&#39;</span><span class="p">,</span> <span class="n">mpoly</span><span class="o">.</span><span class="n">srs</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

            <span class="c"># Incrementing through the multipolyogn after the spatial reference</span>
            <span class="c"># has been re-assigned.</span>
            <span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="n">mpoly</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mpoly</span><span class="o">.</span><span class="n">srs</span><span class="o">.</span><span class="n">wkt</span><span class="p">,</span> <span class="n">poly</span><span class="o">.</span><span class="n">srs</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
                <span class="n">poly</span><span class="o">.</span><span class="n">srs</span> <span class="o">=</span> <span class="mi">32140</span>
                <span class="k">for</span> <span class="n">ring</span> <span class="ow">in</span> <span class="n">poly</span><span class="p">:</span>
                    <span class="c"># Changing each ring in the polygon</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">32140</span><span class="p">,</span> <span class="n">ring</span><span class="o">.</span><span class="n">srs</span><span class="o">.</span><span class="n">srid</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;NAD83 / Texas South Central&#39;</span><span class="p">,</span> <span class="n">ring</span><span class="o">.</span><span class="n">srs</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                    <span class="n">ring</span><span class="o">.</span><span class="n">srs</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">SpatialReference</span><span class="p">(</span><span class="mi">4326</span><span class="p">))</span> <span class="c"># back to WGS84</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">4326</span><span class="p">,</span> <span class="n">ring</span><span class="o">.</span><span class="n">srs</span><span class="o">.</span><span class="n">srid</span><span class="p">)</span>

                    <span class="c"># Using the `srid` property.</span>
                    <span class="n">ring</span><span class="o">.</span><span class="n">srid</span> <span class="o">=</span> <span class="mi">4322</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;WGS 72&#39;</span><span class="p">,</span> <span class="n">ring</span><span class="o">.</span><span class="n">srs</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">4322</span><span class="p">,</span> <span class="n">ring</span><span class="o">.</span><span class="n">srid</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test09b_srs_transform"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test09b_srs_transform">[docs]</a>    <span class="k">def</span> <span class="nf">test09b_srs_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing transform().&quot;</span>
        <span class="n">orig</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;POINT (-104.609 38.255)&#39;</span><span class="p">,</span> <span class="mi">4326</span><span class="p">)</span>
        <span class="n">trans</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;POINT (992385.4472045 481455.4944650)&#39;</span><span class="p">,</span> <span class="mi">2774</span><span class="p">)</span>

        <span class="c"># Using an srid, a SpatialReference object, and a CoordTransform object</span>
        <span class="c"># or transformations.</span>
        <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span> <span class="o">=</span> <span class="n">orig</span><span class="o">.</span><span class="n">clone</span><span class="p">(),</span> <span class="n">orig</span><span class="o">.</span><span class="n">clone</span><span class="p">(),</span> <span class="n">orig</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
        <span class="n">t1</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">trans</span><span class="o">.</span><span class="n">srid</span><span class="p">)</span>
        <span class="n">t2</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">SpatialReference</span><span class="p">(</span><span class="s">&#39;EPSG:2774&#39;</span><span class="p">))</span>
        <span class="n">ct</span> <span class="o">=</span> <span class="n">CoordTransform</span><span class="p">(</span><span class="n">SpatialReference</span><span class="p">(</span><span class="s">&#39;WGS84&#39;</span><span class="p">),</span> <span class="n">SpatialReference</span><span class="p">(</span><span class="mi">2774</span><span class="p">))</span>
        <span class="n">t3</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">ct</span><span class="p">)</span>

        <span class="c"># Testing use of the `clone` keyword.</span>
        <span class="n">k1</span> <span class="o">=</span> <span class="n">orig</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
        <span class="n">k2</span> <span class="o">=</span> <span class="n">k1</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">trans</span><span class="o">.</span><span class="n">srid</span><span class="p">,</span> <span class="n">clone</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">k1</span><span class="p">,</span> <span class="n">orig</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">)</span>

        <span class="n">prec</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">,</span> <span class="n">k2</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">trans</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">prec</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">trans</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">prec</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test09c_transform_dim"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test09c_transform_dim">[docs]</a>    <span class="k">def</span> <span class="nf">test09c_transform_dim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing coordinate dimension is the same on transformed geometries.&quot;</span>
        <span class="n">ls_orig</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;LINESTRING(-104.609 38.255)&#39;</span><span class="p">,</span> <span class="mi">4326</span><span class="p">)</span>
        <span class="n">ls_trans</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;LINESTRING(992385.4472045 481455.4944650)&#39;</span><span class="p">,</span> <span class="mi">2774</span><span class="p">)</span>

        <span class="n">prec</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="n">ls_orig</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">ls_trans</span><span class="o">.</span><span class="n">srs</span><span class="p">)</span>
        <span class="c"># Making sure the coordinate dimension is still 2D.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">ls_orig</span><span class="o">.</span><span class="n">coord_dim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">ls_trans</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ls_orig</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">prec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">ls_trans</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ls_orig</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">prec</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test10_difference"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test10_difference">[docs]</a>    <span class="k">def</span> <span class="nf">test10_difference</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing difference().&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">topology_geoms</span><span class="p">)):</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">topology_geoms</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">wkt_a</span><span class="p">)</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">topology_geoms</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">wkt_b</span><span class="p">)</span>
            <span class="n">d1</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">diff_geoms</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
            <span class="n">d2</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="p">)</span> <span class="c"># __sub__ is difference operator</span>
            <span class="n">a</span> <span class="o">-=</span> <span class="n">b</span> <span class="c"># testing __isub__</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test11_intersection"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test11_intersection">[docs]</a>    <span class="k">def</span> <span class="nf">test11_intersection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing intersects() and intersection().&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">topology_geoms</span><span class="p">)):</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">topology_geoms</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">wkt_a</span><span class="p">)</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">topology_geoms</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">wkt_b</span><span class="p">)</span>
            <span class="n">i1</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">intersect_geoms</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">intersects</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
            <span class="n">i2</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="n">a</span> <span class="o">&amp;</span> <span class="n">b</span><span class="p">)</span> <span class="c"># __and__ is intersection operator</span>
            <span class="n">a</span> <span class="o">&amp;=</span> <span class="n">b</span> <span class="c"># testing __iand__</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test12_symdifference"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test12_symdifference">[docs]</a>    <span class="k">def</span> <span class="nf">test12_symdifference</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing sym_difference().&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">topology_geoms</span><span class="p">)):</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">topology_geoms</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">wkt_a</span><span class="p">)</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">topology_geoms</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">wkt_b</span><span class="p">)</span>
            <span class="n">d1</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">sdiff_geoms</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
            <span class="n">d2</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">sym_difference</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="n">a</span> <span class="o">^</span> <span class="n">b</span><span class="p">)</span> <span class="c"># __xor__ is symmetric difference operator</span>
            <span class="n">a</span> <span class="o">^=</span> <span class="n">b</span> <span class="c"># testing __ixor__</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test13_union"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test13_union">[docs]</a>    <span class="k">def</span> <span class="nf">test13_union</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing union().&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">topology_geoms</span><span class="p">)):</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">topology_geoms</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">wkt_a</span><span class="p">)</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">topology_geoms</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">wkt_b</span><span class="p">)</span>
            <span class="n">u1</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">union_geoms</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
            <span class="n">u2</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">u1</span><span class="p">,</span> <span class="n">u2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">u1</span><span class="p">,</span> <span class="n">a</span> <span class="o">|</span> <span class="n">b</span><span class="p">)</span> <span class="c"># __or__ is union operator</span>
            <span class="n">a</span> <span class="o">|=</span> <span class="n">b</span> <span class="c"># testing __ior__</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">u1</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test14_add"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test14_add">[docs]</a>    <span class="k">def</span> <span class="nf">test14_add</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing GeometryCollection.add().&quot;</span>
        <span class="c"># Can&#39;t insert a Point into a MultiPolygon.</span>
        <span class="n">mp</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;MultiPolygon&#39;</span><span class="p">)</span>
        <span class="n">pnt</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;POINT(5 23)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">OGRException</span><span class="p">,</span> <span class="n">mp</span><span class="o">.</span><span class="n">add</span><span class="p">,</span> <span class="n">pnt</span><span class="p">)</span>

        <span class="c"># GeometryCollection.add may take an OGRGeometry (if another collection</span>
        <span class="c"># of the same type all child geoms will be added individually) or WKT.</span>
        <span class="k">for</span> <span class="n">mp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">multipolygons</span><span class="p">:</span>
            <span class="n">mpoly</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">mp</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
            <span class="n">mp1</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;MultiPolygon&#39;</span><span class="p">)</span>
            <span class="n">mp2</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;MultiPolygon&#39;</span><span class="p">)</span>
            <span class="n">mp3</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;MultiPolygon&#39;</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="n">mpoly</span><span class="p">:</span>
                <span class="n">mp1</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span> <span class="c"># Adding a geometry at a time</span>
                <span class="n">mp2</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">poly</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span> <span class="c"># Adding WKT</span>
            <span class="n">mp3</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">mpoly</span><span class="p">)</span> <span class="c"># Adding a MultiPolygon&#39;s entire contents at once.</span>
            <span class="k">for</span> <span class="n">tmp</span> <span class="ow">in</span> <span class="p">(</span><span class="n">mp1</span><span class="p">,</span> <span class="n">mp2</span><span class="p">,</span> <span class="n">mp3</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mpoly</span><span class="p">,</span> <span class="n">tmp</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test15_extent"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test15_extent">[docs]</a>    <span class="k">def</span> <span class="nf">test15_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing `extent` property.&quot;</span>
        <span class="c"># The xmin, ymin, xmax, ymax of the MultiPoint should be returned.</span>
        <span class="n">mp</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;MULTIPOINT(5 23, 0 0, 10 50)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">),</span> <span class="n">mp</span><span class="o">.</span><span class="n">extent</span><span class="p">)</span>
        <span class="c"># Testing on the &#39;real world&#39; Polygon.</span>
        <span class="n">poly</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">polygons</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
        <span class="n">ring</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">shell</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">ring</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">ring</span><span class="o">.</span><span class="n">y</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">),</span> <span class="n">poly</span><span class="o">.</span><span class="n">extent</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test16_25D"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test16_25D">[docs]</a>    <span class="k">def</span> <span class="nf">test16_25D</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing 2.5D geometries.&quot;</span>
        <span class="n">pnt_25d</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;POINT(1 2 3)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;Point25D&#39;</span><span class="p">,</span> <span class="n">pnt_25d</span><span class="o">.</span><span class="n">geom_type</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">pnt_25d</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">pnt_25d</span><span class="o">.</span><span class="n">coord_dim</span><span class="p">)</span>
        <span class="n">ls_25d</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;LINESTRING(1 1 1,2 2 2,3 3 3)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;LineString25D&#39;</span><span class="p">,</span> <span class="n">ls_25d</span><span class="o">.</span><span class="n">geom_type</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">],</span> <span class="n">ls_25d</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">ls_25d</span><span class="o">.</span><span class="n">coord_dim</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test17_pickle"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test17_pickle">[docs]</a>    <span class="k">def</span> <span class="nf">test17_pickle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing pickle support.&quot;</span>
        <span class="kn">import</span> <span class="nn">cPickle</span>
        <span class="n">g1</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;LINESTRING(1 1 1,2 2 2,3 3 3)&#39;</span><span class="p">,</span> <span class="s">&#39;WGS84&#39;</span><span class="p">)</span>
        <span class="n">g2</span> <span class="o">=</span> <span class="n">cPickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">cPickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">g1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">g1</span><span class="p">,</span> <span class="n">g2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">4326</span><span class="p">,</span> <span class="n">g2</span><span class="o">.</span><span class="n">srs</span><span class="o">.</span><span class="n">srid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">g1</span><span class="o">.</span><span class="n">srs</span><span class="o">.</span><span class="n">wkt</span><span class="p">,</span> <span class="n">g2</span><span class="o">.</span><span class="n">srs</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test18_ogrgeometry_transform_workaround"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test18_ogrgeometry_transform_workaround">[docs]</a>    <span class="k">def</span> <span class="nf">test18_ogrgeometry_transform_workaround</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing coordinate dimensions on geometries after transformation.&quot;</span>
        <span class="c"># A bug in GDAL versions prior to 1.7 changes the coordinate</span>
        <span class="c"># dimension of a geometry after it has been transformed.</span>
        <span class="c"># This test ensures that the bug workarounds employed within</span>
        <span class="c"># `OGRGeometry.transform` indeed work.</span>
        <span class="n">wkt_2d</span> <span class="o">=</span> <span class="s">&quot;MULTILINESTRING ((0 0,1 1,2 2))&quot;</span>
        <span class="n">wkt_3d</span> <span class="o">=</span> <span class="s">&quot;MULTILINESTRING ((0 0 0,1 1 1,2 2 2))&quot;</span>
        <span class="n">srid</span> <span class="o">=</span> <span class="mi">4326</span>

        <span class="c"># For both the 2D and 3D MultiLineString, ensure _both_ the dimension</span>
        <span class="c"># of the collection and the component LineString have the expected</span>
        <span class="c"># coordinate dimension after transform.</span>
        <span class="n">geom</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">wkt_2d</span><span class="p">,</span> <span class="n">srid</span><span class="p">)</span>
        <span class="n">geom</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">srid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">geom</span><span class="o">.</span><span class="n">coord_dim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coord_dim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">wkt_2d</span><span class="p">,</span> <span class="n">geom</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>

        <span class="n">geom</span> <span class="o">=</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="n">wkt_3d</span><span class="p">,</span> <span class="n">srid</span><span class="p">)</span>
        <span class="n">geom</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">srid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">geom</span><span class="o">.</span><span class="n">coord_dim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coord_dim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">wkt_3d</span><span class="p">,</span> <span class="n">geom</span><span class="o">.</span><span class="n">wkt</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OGRGeomTest.test19_equivalence_regression"><a class="viewcode-back" href="../../../../../../django.contrib.gis.gdal.tests.html#django.contrib.gis.gdal.tests.test_geom.OGRGeomTest.test19_equivalence_regression">[docs]</a>    <span class="k">def</span> <span class="nf">test19_equivalence_regression</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Testing equivalence methods with non-OGRGeometry instances.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;POINT(0 0)&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">OGRGeometry</span><span class="p">(</span><span class="s">&#39;LINESTRING(0 0, 1 1)&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span>
</div></div>
<span class="k">def</span> <span class="nf">suite</span><span class="p">():</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestSuite</span><span class="p">()</span>
    <span class="n">s</span><span class="o">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">makeSuite</span><span class="p">(</span><span class="n">OGRGeomTest</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">s</span>

<span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">verbosity</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">TextTestRunner</span><span class="p">(</span><span class="n">verbosity</span><span class="o">=</span><span class="n">verbosity</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">suite</span><span class="p">())</span>
</pre></div>

      </div>
      <div class="bottomnav">
      
        <p>
        <a href="/">Home</a>:
        <a class="uplink" href="../../../../../../index.html">Contents</a>
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2012, HDKNR.COM.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2pre/660be19d7963.
    </div>
  </body>
</html>