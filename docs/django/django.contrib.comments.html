

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>django.contrib.comments &mdash; Django Cheat 1 documentation</title>
    
    <link rel="stylesheet" href="static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <script type="text/javascript" src="static/theme_extras.js"></script>
    <link rel="top" title="Django Cheat 1 documentation" href="index.html" />
    <link rel="next" title="django.contrib.comments.templatetags" href="django.contrib.comments.templatetags.html" />
    <link rel="prev" title="django.contrib.auth.tests" href="django.contrib.auth.tests.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="index.html">
          <span>Django Cheat 1 documentation</span></a></h1>
        <h2 class="heading"><span>django.contrib.comments</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        <a href="/">Home</a>:
        «&#160;&#160;<a href="django.contrib.auth.tests.html">django.contrib.auth.tests</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="django.contrib.comments.templatetags.html">django.contrib.comments.templatetags</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="django-contrib-comments">
<h1>django.contrib.comments<a class="headerlink" href="#django-contrib-comments" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<span id="id2"></span><h2>django.contrib.comments<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-django.contrib.comments"></span><dl class="function">
<dt id="django.contrib.comments.get_approve_url">
<tt class="descclassname">django.contrib.comments.</tt><tt class="descname">get_approve_url</tt><big>(</big><em>comment</em><big>)</big><a class="reference internal" href="modules/django/contrib/comments.html#get_approve_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.get_approve_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the URL for the &#8220;approve this comment from moderation&#8221; view.</p>
</dd></dl>

<dl class="function">
<dt id="django.contrib.comments.get_comment_app">
<tt class="descclassname">django.contrib.comments.</tt><tt class="descname">get_comment_app</tt><big>(</big><big>)</big><a class="reference internal" href="modules/django/contrib/comments.html#get_comment_app"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.get_comment_app" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the comment app (i.e. &#8220;django.contrib.comments&#8221;) as defined in the settings</p>
</dd></dl>

<dl class="function">
<dt id="django.contrib.comments.get_comment_app_name">
<tt class="descclassname">django.contrib.comments.</tt><tt class="descname">get_comment_app_name</tt><big>(</big><big>)</big><a class="reference internal" href="modules/django/contrib/comments.html#get_comment_app_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.get_comment_app_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of the comment app (either the setting value, if it
exists, or the default).</p>
</dd></dl>

<dl class="function">
<dt id="django.contrib.comments.get_delete_url">
<tt class="descclassname">django.contrib.comments.</tt><tt class="descname">get_delete_url</tt><big>(</big><em>comment</em><big>)</big><a class="reference internal" href="modules/django/contrib/comments.html#get_delete_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.get_delete_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the URL for the &#8220;delete this comment&#8221; view.</p>
</dd></dl>

<dl class="function">
<dt id="django.contrib.comments.get_flag_url">
<tt class="descclassname">django.contrib.comments.</tt><tt class="descname">get_flag_url</tt><big>(</big><em>comment</em><big>)</big><a class="reference internal" href="modules/django/contrib/comments.html#get_flag_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.get_flag_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the URL for the &#8220;flag this comment&#8221; view.</p>
</dd></dl>

<dl class="function">
<dt id="django.contrib.comments.get_form">
<tt class="descclassname">django.contrib.comments.</tt><tt class="descname">get_form</tt><big>(</big><big>)</big><a class="reference internal" href="modules/django/contrib/comments.html#get_form"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.get_form" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the comment ModelForm class.</p>
</dd></dl>

<dl class="function">
<dt id="django.contrib.comments.get_form_target">
<tt class="descclassname">django.contrib.comments.</tt><tt class="descname">get_form_target</tt><big>(</big><big>)</big><a class="reference internal" href="modules/django/contrib/comments.html#get_form_target"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.get_form_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the target URL for the comment form submission view.</p>
</dd></dl>

<dl class="function">
<dt id="django.contrib.comments.get_model">
<tt class="descclassname">django.contrib.comments.</tt><tt class="descname">get_model</tt><big>(</big><big>)</big><a class="reference internal" href="modules/django/contrib/comments.html#get_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.get_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the comment model class.</p>
</dd></dl>

</div>
<div class="section" id="sub">
<h2>Sub<a class="headerlink" href="#sub" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="django.contrib.comments.views.html"><em>django.contrib.comments.views</em></a></li>
<li><a class="reference internal" href="django.contrib.comments.templatetags.html"><em>django.contrib.comments.templatetags</em></a></li>
</ul>
</div>
<div class="section" id="django-contrib-comments-forms">
<span id="id3"></span><h2>django.contrib.comments.forms<a class="headerlink" href="#django-contrib-comments-forms" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-django.contrib.comments.forms"></span><dl class="class">
<dt id="django.contrib.comments.forms.CommentDetailsForm">
<em class="property">class </em><tt class="descclassname">django.contrib.comments.forms.</tt><tt class="descname">CommentDetailsForm</tt><big>(</big><em>target_object</em>, <em>data=None</em>, <em>initial=None</em><big>)</big><a class="reference internal" href="modules/django/contrib/comments/forms.html#CommentDetailsForm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.forms.CommentDetailsForm" title="Permalink to this definition">¶</a></dt>
<dd><p>Handles the specific details of the comment (name, comment, etc.).</p>
<dl class="method">
<dt id="django.contrib.comments.forms.CommentDetailsForm.check_for_duplicate_comment">
<tt class="descname">check_for_duplicate_comment</tt><big>(</big><em>new</em><big>)</big><a class="reference internal" href="modules/django/contrib/comments/forms.html#CommentDetailsForm.check_for_duplicate_comment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.forms.CommentDetailsForm.check_for_duplicate_comment" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that a submitted comment isn&#8217;t a duplicate. This might be caused
by someone posting a comment twice. If it is a dup, silently return the <em>previous</em> comment.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.comments.forms.CommentDetailsForm.clean_comment">
<tt class="descname">clean_comment</tt><big>(</big><big>)</big><a class="reference internal" href="modules/django/contrib/comments/forms.html#CommentDetailsForm.clean_comment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.forms.CommentDetailsForm.clean_comment" title="Permalink to this definition">¶</a></dt>
<dd><p>If COMMENTS_ALLOW_PROFANITIES is False, check that the comment doesn&#8217;t
contain anything in PROFANITIES_LIST.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.comments.forms.CommentDetailsForm.get_comment_create_data">
<tt class="descname">get_comment_create_data</tt><big>(</big><big>)</big><a class="reference internal" href="modules/django/contrib/comments/forms.html#CommentDetailsForm.get_comment_create_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.forms.CommentDetailsForm.get_comment_create_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the dict of data to be used to create a comment. Subclasses in
custom comment apps that override get_comment_model can override this
method to add extra fields onto a custom comment model.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.comments.forms.CommentDetailsForm.get_comment_model">
<tt class="descname">get_comment_model</tt><big>(</big><big>)</big><a class="reference internal" href="modules/django/contrib/comments/forms.html#CommentDetailsForm.get_comment_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.forms.CommentDetailsForm.get_comment_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the comment model to create with this form. Subclasses in custom
comment apps should override this, get_comment_create_data, and perhaps
check_for_duplicate_comment to provide custom comment models.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.comments.forms.CommentDetailsForm.get_comment_object">
<tt class="descname">get_comment_object</tt><big>(</big><big>)</big><a class="reference internal" href="modules/django/contrib/comments/forms.html#CommentDetailsForm.get_comment_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.forms.CommentDetailsForm.get_comment_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new (unsaved) comment object based on the information in this
form. Assumes that the form is already validated and will throw a
ValueError if not.</p>
<p>Does not set any of the fields that would come from a Request object
(i.e. <tt class="docutils literal"><span class="pre">user</span></tt> or <tt class="docutils literal"><span class="pre">ip_address</span></tt>).</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="django.contrib.comments.forms.CommentSecurityForm">
<em class="property">class </em><tt class="descclassname">django.contrib.comments.forms.</tt><tt class="descname">CommentSecurityForm</tt><big>(</big><em>target_object</em>, <em>data=None</em>, <em>initial=None</em><big>)</big><a class="reference internal" href="modules/django/contrib/comments/forms.html#CommentSecurityForm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.forms.CommentSecurityForm" title="Permalink to this definition">¶</a></dt>
<dd><p>Handles the security aspects (anti-spoofing) for comment forms.</p>
<dl class="method">
<dt id="django.contrib.comments.forms.CommentSecurityForm.clean_security_hash">
<tt class="descname">clean_security_hash</tt><big>(</big><big>)</big><a class="reference internal" href="modules/django/contrib/comments/forms.html#CommentSecurityForm.clean_security_hash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.forms.CommentSecurityForm.clean_security_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the security hash.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.comments.forms.CommentSecurityForm.clean_timestamp">
<tt class="descname">clean_timestamp</tt><big>(</big><big>)</big><a class="reference internal" href="modules/django/contrib/comments/forms.html#CommentSecurityForm.clean_timestamp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.forms.CommentSecurityForm.clean_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure the timestamp isn&#8217;t too far (&gt; 2 hours) in the past.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.comments.forms.CommentSecurityForm.generate_security_data">
<tt class="descname">generate_security_data</tt><big>(</big><big>)</big><a class="reference internal" href="modules/django/contrib/comments/forms.html#CommentSecurityForm.generate_security_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.forms.CommentSecurityForm.generate_security_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a dict of security data for &#8220;initial&#8221; data.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.comments.forms.CommentSecurityForm.generate_security_hash">
<tt class="descname">generate_security_hash</tt><big>(</big><em>content_type</em>, <em>object_pk</em>, <em>timestamp</em><big>)</big><a class="reference internal" href="modules/django/contrib/comments/forms.html#CommentSecurityForm.generate_security_hash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.forms.CommentSecurityForm.generate_security_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a HMAC security hash from the provided info.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.comments.forms.CommentSecurityForm.initial_security_hash">
<tt class="descname">initial_security_hash</tt><big>(</big><em>timestamp</em><big>)</big><a class="reference internal" href="modules/django/contrib/comments/forms.html#CommentSecurityForm.initial_security_hash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.forms.CommentSecurityForm.initial_security_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the initial security hash from self.content_object
and a (unix) timestamp.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.comments.forms.CommentSecurityForm.security_errors">
<tt class="descname">security_errors</tt><big>(</big><big>)</big><a class="reference internal" href="modules/django/contrib/comments/forms.html#CommentSecurityForm.security_errors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.forms.CommentSecurityForm.security_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>Return just those errors associated with security</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="django-contrib-comments-moderation">
<span id="id4"></span><h2>django.contrib.comments.moderation<a class="headerlink" href="#django-contrib-comments-moderation" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-django.contrib.comments.moderation"></span><p>A generic comment-moderation system which allows configuration of
moderation options on a per-model basis.</p>
<p>To use, do two things:</p>
<ol class="arabic simple">
<li>Create or import a subclass of <tt class="docutils literal"><span class="pre">CommentModerator</span></tt> defining the
options you want.</li>
<li>Import <tt class="docutils literal"><span class="pre">moderator</span></tt> from this module and register one or more
models, passing the models and the <tt class="docutils literal"><span class="pre">CommentModerator</span></tt> options
class you want to use.</li>
</ol>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>First, we define a simple model class which might represent entries in
a Weblog:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Entry</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">maxlength</span><span class="o">=</span><span class="mi">250</span><span class="p">)</span>
    <span class="n">body</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
    <span class="n">pub_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">()</span>
    <span class="n">enable_comments</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">()</span>
</pre></div>
</div>
<p>Then we create a <tt class="docutils literal"><span class="pre">CommentModerator</span></tt> subclass specifying some
moderation options:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib.comments.moderation</span> <span class="kn">import</span> <span class="n">CommentModerator</span><span class="p">,</span> <span class="n">moderator</span>

<span class="k">class</span> <span class="nc">EntryModerator</span><span class="p">(</span><span class="n">CommentModerator</span><span class="p">):</span>
    <span class="n">email_notification</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">enable_field</span> <span class="o">=</span> <span class="s">&#39;enable_comments&#39;</span>
</pre></div>
</div>
<p>And finally register it for moderation:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">moderator</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Entry</span><span class="p">,</span> <span class="n">EntryModerator</span><span class="p">)</span>
</pre></div>
</div>
<p>This sample class would apply two moderation steps to each new
comment submitted on an Entry:</p>
<ul class="simple">
<li>If the entry&#8217;s <tt class="docutils literal"><span class="pre">enable_comments</span></tt> field is set to <tt class="docutils literal"><span class="pre">False</span></tt>, the
comment will be rejected (immediately deleted).</li>
<li>If the comment is successfully posted, an email notification of the
comment will be sent to site staff.</li>
</ul>
<p>For a full list of built-in moderation options and other
configurability, see the documentation for the <tt class="docutils literal"><span class="pre">CommentModerator</span></tt>
class.</p>
<dl class="exception">
<dt id="django.contrib.comments.moderation.AlreadyModerated">
<em class="property">exception </em><tt class="descclassname">django.contrib.comments.moderation.</tt><tt class="descname">AlreadyModerated</tt><a class="reference internal" href="modules/django/contrib/comments/moderation.html#AlreadyModerated"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.moderation.AlreadyModerated" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when a model which is already registered for moderation is
attempting to be registered again.</p>
</dd></dl>

<dl class="class">
<dt id="django.contrib.comments.moderation.CommentModerator">
<em class="property">class </em><tt class="descclassname">django.contrib.comments.moderation.</tt><tt class="descname">CommentModerator</tt><big>(</big><em>model</em><big>)</big><a class="reference internal" href="modules/django/contrib/comments/moderation.html#CommentModerator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.moderation.CommentModerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Encapsulates comment-moderation options for a given model.</p>
<p>This class is not designed to be used directly, since it doesn&#8217;t
enable any of the available moderation options. Instead, subclass
it and override attributes to enable different options:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="sb">``</span><span class="n">auto_close_field</span><span class="sb">``</span>
</pre></div>
</div>
<blockquote>
<div>If this is set to the name of a <tt class="docutils literal"><span class="pre">DateField</span></tt> or
<tt class="docutils literal"><span class="pre">DateTimeField</span></tt> on the model for which comments are
being moderated, new comments for objects of that model
will be disallowed (immediately deleted) when a certain
number of days have passed after the date specified in
that field. Must be used in conjunction with
<tt class="docutils literal"><span class="pre">close_after</span></tt>, which specifies the number of days past
which comments should be disallowed. Default value is
<tt class="docutils literal"><span class="pre">None</span></tt>.</div></blockquote>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">auto_moderate_field</span></tt></dt>
<dd>Like <tt class="docutils literal"><span class="pre">auto_close_field</span></tt>, but instead of outright
deleting new comments when the requisite number of days
have elapsed, it will simply set the <tt class="docutils literal"><span class="pre">is_public</span></tt> field
of new comments to <tt class="docutils literal"><span class="pre">False</span></tt> before saving them. Must be
used in conjunction with <tt class="docutils literal"><span class="pre">moderate_after</span></tt>, which
specifies the number of days past which comments should be
moderated. Default value is <tt class="docutils literal"><span class="pre">None</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">close_after</span></tt></dt>
<dd>If <tt class="docutils literal"><span class="pre">auto_close_field</span></tt> is used, this must specify the
number of days past the value of the field specified by
<tt class="docutils literal"><span class="pre">auto_close_field</span></tt> after which new comments for an
object should be disallowed. Default value is <tt class="docutils literal"><span class="pre">None</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">email_notification</span></tt></dt>
<dd>If <tt class="docutils literal"><span class="pre">True</span></tt>, any new comment on an object of this model
which survives moderation will generate an email to site
staff. Default value is <tt class="docutils literal"><span class="pre">False</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">enable_field</span></tt></dt>
<dd>If this is set to the name of a <tt class="docutils literal"><span class="pre">BooleanField</span></tt> on the
model for which comments are being moderated, new comments
on objects of that model will be disallowed (immediately
deleted) whenever the value of that field is <tt class="docutils literal"><span class="pre">False</span></tt> on
the object the comment would be attached to. Default value
is <tt class="docutils literal"><span class="pre">None</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">moderate_after</span></tt></dt>
<dd>If <tt class="docutils literal"><span class="pre">auto_moderate_field</span></tt> is used, this must specify the number
of days past the value of the field specified by
<tt class="docutils literal"><span class="pre">auto_moderate_field</span></tt> after which new comments for an
object should be marked non-public. Default value is
<tt class="docutils literal"><span class="pre">None</span></tt>.</dd>
</dl>
<p>Most common moderation needs can be covered by changing these
attributes, but further customization can be obtained by
subclassing and overriding the following methods. Each method will
be called with three arguments: <tt class="docutils literal"><span class="pre">comment</span></tt>, which is the comment
being submitted, <tt class="docutils literal"><span class="pre">content_object</span></tt>, which is the object the
comment will be attached to, and <tt class="docutils literal"><span class="pre">request</span></tt>, which is the
<tt class="docutils literal"><span class="pre">HttpRequest</span></tt> in which the comment is being submitted:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="sb">``</span><span class="n">allow</span><span class="sb">``</span>
</pre></div>
</div>
<blockquote>
<div>Should return <tt class="docutils literal"><span class="pre">True</span></tt> if the comment should be allowed to
post on the content object, and <tt class="docutils literal"><span class="pre">False</span></tt> otherwise (in
which case the comment will be immediately deleted).</div></blockquote>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">email</span></tt></dt>
<dd>If email notification of the new comment should be sent to
site staff or moderators, this method is responsible for
sending the email.</dd>
<dt><tt class="docutils literal"><span class="pre">moderate</span></tt></dt>
<dd>Should return <tt class="docutils literal"><span class="pre">True</span></tt> if the comment should be moderated
(in which case its <tt class="docutils literal"><span class="pre">is_public</span></tt> field will be set to
<tt class="docutils literal"><span class="pre">False</span></tt> before saving), and <tt class="docutils literal"><span class="pre">False</span></tt> otherwise (in
which case the <tt class="docutils literal"><span class="pre">is_public</span></tt> field will not be changed).</dd>
</dl>
<p>Subclasses which want to introspect the model for which comments
are being moderated can do so through the attribute <tt class="docutils literal"><span class="pre">_model</span></tt>,
which will be the model class.</p>
<dl class="method">
<dt id="django.contrib.comments.moderation.CommentModerator.allow">
<tt class="descname">allow</tt><big>(</big><em>comment</em>, <em>content_object</em>, <em>request</em><big>)</big><a class="reference internal" href="modules/django/contrib/comments/moderation.html#CommentModerator.allow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.moderation.CommentModerator.allow" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether a given comment is allowed to be posted on
a given object.</p>
<p>Return <tt class="docutils literal"><span class="pre">True</span></tt> if the comment should be allowed, <a href="#id5"><span class="problematic" id="id6">``</span></a>False
otherwise.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.comments.moderation.CommentModerator.email">
<tt class="descname">email</tt><big>(</big><em>comment</em>, <em>content_object</em>, <em>request</em><big>)</big><a class="reference internal" href="modules/django/contrib/comments/moderation.html#CommentModerator.email"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.moderation.CommentModerator.email" title="Permalink to this definition">¶</a></dt>
<dd><p>Send email notification of a new comment to site staff when email
notifications have been requested.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.comments.moderation.CommentModerator.moderate">
<tt class="descname">moderate</tt><big>(</big><em>comment</em>, <em>content_object</em>, <em>request</em><big>)</big><a class="reference internal" href="modules/django/contrib/comments/moderation.html#CommentModerator.moderate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.moderation.CommentModerator.moderate" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether a given comment on a given object should be
allowed to show up immediately, or should be marked non-public
and await approval.</p>
<p>Return <tt class="docutils literal"><span class="pre">True</span></tt> if the comment should be moderated (marked
non-public), <tt class="docutils literal"><span class="pre">False</span></tt> otherwise.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="django.contrib.comments.moderation.Moderator">
<em class="property">class </em><tt class="descclassname">django.contrib.comments.moderation.</tt><tt class="descname">Moderator</tt><a class="reference internal" href="modules/django/contrib/comments/moderation.html#Moderator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.moderation.Moderator" title="Permalink to this definition">¶</a></dt>
<dd><p>Handles moderation of a set of models.</p>
<p>An instance of this class will maintain a list of one or more
models registered for comment moderation, and their associated
moderation classes, and apply moderation to all incoming comments.</p>
<p>To register a model, obtain an instance of <tt class="docutils literal"><span class="pre">Moderator</span></tt> (this
module exports one as <tt class="docutils literal"><span class="pre">moderator</span></tt>), and call its <tt class="docutils literal"><span class="pre">register</span></tt>
method, passing the model class and a moderation class (which
should be a subclass of <tt class="docutils literal"><span class="pre">CommentModerator</span></tt>). Note that both of
these should be the actual classes, not instances of the classes.</p>
<p>To cease moderation for a model, call the <tt class="docutils literal"><span class="pre">unregister</span></tt> method,
passing the model class.</p>
<p>For convenience, both <tt class="docutils literal"><span class="pre">register</span></tt> and <tt class="docutils literal"><span class="pre">unregister</span></tt> can also
accept a list of model classes in place of a single model; this
allows easier registration of multiple models with the same
<tt class="docutils literal"><span class="pre">CommentModerator</span></tt> class.</p>
<p>The actual moderation is applied in two phases: one prior to
saving a new comment, and the other immediately after saving. The
pre-save moderation may mark a comment as non-public or mark it to
be removed; the post-save moderation may delete a comment which
was disallowed (there is currently no way to prevent the comment
being saved once before removal) and, if the comment is still
around, will send any notification emails the comment generated.</p>
<dl class="method">
<dt id="django.contrib.comments.moderation.Moderator.connect">
<tt class="descname">connect</tt><big>(</big><big>)</big><a class="reference internal" href="modules/django/contrib/comments/moderation.html#Moderator.connect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.moderation.Moderator.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook up the moderation methods to pre- and post-save signals
from the comment models.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.comments.moderation.Moderator.post_save_moderation">
<tt class="descname">post_save_moderation</tt><big>(</big><em>sender</em>, <em>comment</em>, <em>request</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="modules/django/contrib/comments/moderation.html#Moderator.post_save_moderation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.moderation.Moderator.post_save_moderation" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply any necessary post-save moderation steps to new
comments.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.comments.moderation.Moderator.pre_save_moderation">
<tt class="descname">pre_save_moderation</tt><big>(</big><em>sender</em>, <em>comment</em>, <em>request</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="modules/django/contrib/comments/moderation.html#Moderator.pre_save_moderation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.moderation.Moderator.pre_save_moderation" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply any necessary pre-save moderation steps to new
comments.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.comments.moderation.Moderator.register">
<tt class="descname">register</tt><big>(</big><em>model_or_iterable</em>, <em>moderation_class</em><big>)</big><a class="reference internal" href="modules/django/contrib/comments/moderation.html#Moderator.register"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.moderation.Moderator.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a model or a list of models for comment moderation,
using a particular moderation class.</p>
<p>Raise <tt class="docutils literal"><span class="pre">AlreadyModerated</span></tt> if any of the models are already
registered.</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.comments.moderation.Moderator.unregister">
<tt class="descname">unregister</tt><big>(</big><em>model_or_iterable</em><big>)</big><a class="reference internal" href="modules/django/contrib/comments/moderation.html#Moderator.unregister"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.moderation.Moderator.unregister" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a model or a list of models from the list of models
whose comments will be moderated.</p>
<p>Raise <tt class="docutils literal"><span class="pre">NotModerated</span></tt> if any of the models are not currently
registered for moderation.</p>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="django.contrib.comments.moderation.NotModerated">
<em class="property">exception </em><tt class="descclassname">django.contrib.comments.moderation.</tt><tt class="descname">NotModerated</tt><a class="reference internal" href="modules/django/contrib/comments/moderation.html#NotModerated"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.moderation.NotModerated" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when a model which is not registered for moderation is
attempting to be unregistered.</p>
</dd></dl>

</div>
</div>
<div class="section" id="django-contrib-comments-managers">
<span id="id7"></span><h2>django.contrib.comments.managers<a class="headerlink" href="#django-contrib-comments-managers" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-django.contrib.comments.managers"></span></div>
<div class="section" id="django-contrib-comments-admin">
<span id="id8"></span><h2>django.contrib.comments.admin<a class="headerlink" href="#django-contrib-comments-admin" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-django.contrib.comments.admin"></span></div>
<div class="section" id="django-contrib-comments-signals">
<span id="id9"></span><h2>django.contrib.comments.signals<a class="headerlink" href="#django-contrib-comments-signals" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-django.contrib.comments.signals"></span><p>Signals relating to comments.</p>
</div>
<div class="section" id="django-contrib-comments-feeds">
<span id="id10"></span><h2>django.contrib.comments.feeds<a class="headerlink" href="#django-contrib-comments-feeds" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-django.contrib.comments.feeds"></span><dl class="class">
<dt id="django.contrib.comments.feeds.LatestCommentFeed">
<em class="property">class </em><tt class="descclassname">django.contrib.comments.feeds.</tt><tt class="descname">LatestCommentFeed</tt><a class="reference internal" href="modules/django/contrib/comments/feeds.html#LatestCommentFeed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.feeds.LatestCommentFeed" title="Permalink to this definition">¶</a></dt>
<dd><p>Feed of latest comments on the current site.</p>
</dd></dl>

</div>
<div class="section" id="django-contrib-comments-urls">
<span id="id11"></span><h2>django.contrib.comments.urls<a class="headerlink" href="#django-contrib-comments-urls" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-django.contrib.comments.urls"></span></div>
<div class="section" id="django-contrib-comments-models">
<span id="id12"></span><h2>django.contrib.comments.models<a class="headerlink" href="#django-contrib-comments-models" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-django.contrib.comments.models"></span><dl class="class">
<dt id="django.contrib.comments.models.BaseCommentAbstractModel">
<em class="property">class </em><tt class="descclassname">django.contrib.comments.models.</tt><tt class="descname">BaseCommentAbstractModel</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="modules/django/contrib/comments/models.html#BaseCommentAbstractModel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.models.BaseCommentAbstractModel" title="Permalink to this definition">¶</a></dt>
<dd><p>An abstract base class that any custom comment models probably should
subclass.</p>
<dl class="method">
<dt id="django.contrib.comments.models.BaseCommentAbstractModel.get_content_object_url">
<tt class="descname">get_content_object_url</tt><big>(</big><big>)</big><a class="reference internal" href="modules/django/contrib/comments/models.html#BaseCommentAbstractModel.get_content_object_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.models.BaseCommentAbstractModel.get_content_object_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a URL suitable for redirecting to the content object.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="django.contrib.comments.models.Comment">
<em class="property">class </em><tt class="descclassname">django.contrib.comments.models.</tt><tt class="descname">Comment</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="modules/django/contrib/comments/models.html#Comment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.models.Comment" title="Permalink to this definition">¶</a></dt>
<dd><p>A user comment about some object.</p>
<dl class="attribute">
<dt id="django.contrib.comments.models.Comment.email">
<tt class="descname">email</tt><a class="headerlink" href="#django.contrib.comments.models.Comment.email" title="Permalink to this definition">¶</a></dt>
<dd><p>The email of the user who posted this comment</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.comments.models.Comment.get_as_text">
<tt class="descname">get_as_text</tt><big>(</big><big>)</big><a class="reference internal" href="modules/django/contrib/comments/models.html#Comment.get_as_text"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.models.Comment.get_as_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Return this comment as plain text.  Useful for emails.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.comments.models.Comment.name">
<tt class="descname">name</tt><a class="headerlink" href="#django.contrib.comments.models.Comment.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the user who posted this comment</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.comments.models.Comment.url">
<tt class="descname">url</tt><a class="headerlink" href="#django.contrib.comments.models.Comment.url" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL given by the user who posted this comment</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.comments.models.Comment.userinfo">
<tt class="descname">userinfo</tt><a class="headerlink" href="#django.contrib.comments.models.Comment.userinfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a dictionary that pulls together information about the poster
safely for both authenticated and non-authenticated comments.</p>
<p>This dict will have <tt class="docutils literal"><span class="pre">name</span></tt>, <tt class="docutils literal"><span class="pre">email</span></tt>, and <tt class="docutils literal"><span class="pre">url</span></tt> fields.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="django.contrib.comments.models.CommentFlag">
<em class="property">class </em><tt class="descclassname">django.contrib.comments.models.</tt><tt class="descname">CommentFlag</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="modules/django/contrib/comments/models.html#CommentFlag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.contrib.comments.models.CommentFlag" title="Permalink to this definition">¶</a></dt>
<dd><p>Records a flag on a comment. This is intentionally flexible; right now, a
flag could be:</p>
<blockquote>
<div><ul class="simple">
<li>A &#8220;removal suggestion&#8221; &#8211; where a user suggests a comment for (potential) removal.</li>
<li>A &#8220;moderator deletion&#8221; &#8211; used when a moderator deletes a comment.</li>
</ul>
</div></blockquote>
<p>You can (ab)use this model to add other flags, if needed. However, by
design users are only allowed to flag a comment with a given flag once;
if you want rating look elsewhere.</p>
</dd></dl>

</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        <a href="/">Home</a>:
        «&#160;&#160;<a href="django.contrib.auth.tests.html">django.contrib.auth.tests</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="django.contrib.comments.templatetags.html">django.contrib.comments.templatetags</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2012, HDKNR.COM.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2pre.
    </div>
  </body>
</html>