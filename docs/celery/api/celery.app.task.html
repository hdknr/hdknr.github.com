

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>celery.app.task &mdash; Celery 1 documentation</title>
    
    <link rel="stylesheet" href="../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../static/theme_extras.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="top" title="Celery 1 documentation" href="../index.html" />
    <link rel="up" title="API Reference" href="index.html" />
    <link rel="next" title="celery.app.amqp" href="celery.app.amqp.html" />
    <link rel="prev" title="celery.app" href="celery.app.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="../index.html">
          <span>Celery 1 documentation</span></a></h1>
        <h2 class="heading"><span>celery.app.task</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        <a href="/">Home</a>:
        «&#160;&#160;<a href="celery.app.html">celery.app</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="celery.app.amqp.html">celery.app.amqp</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="celery-app-task">
<h1>celery.app.task<a class="headerlink" href="#celery-app-task" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#id1" id="id2">celery.app.task</a></li>
</ul>
</div>
<span class="target" id="module-celery.app.task"></span><div class="section" id="id1">
<h2><a class="toc-backref" href="#id2">celery.app.task</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Task Implementation: Task request context, and the base task class.</p>
<dl class="class">
<dt id="celery.app.task.Task">
<em class="property">class </em><tt class="descclassname">celery.app.task.</tt><tt class="descname">Task</tt><a class="reference internal" href="../_modules/celery/app/task.html#Task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.app.task.Task" title="Permalink to this definition">¶</a></dt>
<dd><p>Task base class.</p>
<p>When called tasks apply the <a class="reference internal" href="#celery.app.task.Task.run" title="celery.app.task.Task.run"><tt class="xref py py-meth docutils literal"><span class="pre">run()</span></tt></a> method.  This method must
be defined by all tasks (that is unless the <tt class="xref py py-meth docutils literal"><span class="pre">__call__()</span></tt> method
is overridden).</p>
<dl class="method">
<dt id="celery.app.task.Task.AsyncResult">
<tt class="descname">AsyncResult</tt><big>(</big><em>task_id</em><big>)</big><a class="reference internal" href="../_modules/celery/app/task.html#Task.AsyncResult"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.app.task.Task.AsyncResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Get AsyncResult instance for this kind of task.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>task_id</strong> &#8211; Task id to get result for.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="celery.app.task.Task.ErrorMail">
<em class="property">class </em><tt class="descname">ErrorMail</tt><big>(</big><em>task</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#celery.app.task.Task.ErrorMail" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines how and when task error e-mails should be sent.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>task</strong> &#8211; The task instance that raised the error.</td>
</tr>
</tbody>
</table>
<p><tt class="xref py py-attr docutils literal"><span class="pre">subject</span></tt> and <tt class="xref py py-attr docutils literal"><span class="pre">body</span></tt> are format strings which
are passed a context containing the following keys:</p>
<ul>
<li><p class="first">name</p>
<blockquote>
<div><p>Name of the task.</p>
</div></blockquote>
</li>
<li><p class="first">id</p>
<blockquote>
<div><p>UUID of the task.</p>
</div></blockquote>
</li>
<li><p class="first">exc</p>
<blockquote>
<div><p>String representation of the exception.</p>
</div></blockquote>
</li>
<li><p class="first">args</p>
<blockquote>
<div><p>Positional arguments.</p>
</div></blockquote>
</li>
<li><p class="first">kwargs</p>
<blockquote>
<div><p>Keyword arguments.</p>
</div></blockquote>
</li>
<li><p class="first">traceback</p>
<blockquote>
<div><p>String representation of the traceback.</p>
</div></blockquote>
</li>
<li><p class="first">hostname</p>
<blockquote>
<div><p>Worker hostname.</p>
</div></blockquote>
</li>
</ul>
<dl class="method">
<dt id="celery.app.task.Task.ErrorMail.should_send">
<tt class="descname">should_send</tt><big>(</big><em>context</em>, <em>exc</em><big>)</big><a class="headerlink" href="#celery.app.task.Task.ErrorMail.should_send" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns true or false depending on if a task error mail
should be sent for this type of error.</p>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="celery.app.task.Task.MaxRetriesExceededError">
<em class="property">exception </em><tt class="descclassname">Task.</tt><tt class="descname">MaxRetriesExceededError</tt><a class="headerlink" href="#celery.app.task.Task.MaxRetriesExceededError" title="Permalink to this definition">¶</a></dt>
<dd><p>The tasks max restart limit has been exceeded.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.app.task.Task.Strategy">
<tt class="descclassname">Task.</tt><tt class="descname">Strategy</tt><em class="property"> = 'celery.worker.strategy:default'</em><a class="headerlink" href="#celery.app.task.Task.Strategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Execution strategy used, or the qualified name of one.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.app.task.Task.abstract">
<tt class="descclassname">Task.</tt><tt class="descname">abstract</tt><em class="property"> = None</em><a class="headerlink" href="#celery.app.task.Task.abstract" title="Permalink to this definition">¶</a></dt>
<dd><p>If <tt class="xref py py-const docutils literal"><span class="pre">True</span></tt> the task is an abstract base class.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.app.task.Task.accept_magic_kwargs">
<tt class="descclassname">Task.</tt><tt class="descname">accept_magic_kwargs</tt><em class="property"> = False</em><a class="headerlink" href="#celery.app.task.Task.accept_magic_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>If disabled the worker will not forward magic keyword arguments.
Deprecated and scheduled for removal in v4.0.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.app.task.Task.acks_late">
<tt class="descclassname">Task.</tt><tt class="descname">acks_late</tt><em class="property"> = False</em><a class="headerlink" href="#celery.app.task.Task.acks_late" title="Permalink to this definition">¶</a></dt>
<dd><p>When enabled messages for this task will be acknowledged <strong>after</strong>
the task has been executed, and not <em>just before</em> which is the
default behavior.</p>
<p>Please note that this means the task may be executed twice if the
worker crashes mid execution (which may be acceptable for some
applications).</p>
<p>The application default can be overridden with the
<a class="reference internal" href="../configuration.html#std:setting-CELERY_ACKS_LATE"><tt class="xref std std-setting docutils literal"><span class="pre">CELERY_ACKS_LATE</span></tt></a> setting.</p>
</dd></dl>

<dl class="method">
<dt id="celery.app.task.Task.after_return">
<tt class="descclassname">Task.</tt><tt class="descname">after_return</tt><big>(</big><em>status</em>, <em>retval</em>, <em>task_id</em>, <em>args</em>, <em>kwargs</em>, <em>einfo</em><big>)</big><a class="reference internal" href="../_modules/celery/app/task.html#Task.after_return"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.app.task.Task.after_return" title="Permalink to this definition">¶</a></dt>
<dd><p>Handler called after the task returns.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>status</strong> &#8211; Current task state.</li>
<li><strong>retval</strong> &#8211; Task return value/exception.</li>
<li><strong>task_id</strong> &#8211; Unique id of the task.</li>
<li><strong>args</strong> &#8211; Original arguments for the task that failed.</li>
<li><strong>kwargs</strong> &#8211; Original keyword arguments for the task
that failed.</li>
<li><strong>einfo</strong> &#8211; <a class="reference external" href="http://docs.celeryproject.org/en/latest/internals/reference/celery.datastructures.html#celery.datastructures.ExceptionInfo" title="(in Celery v3.1)"><tt class="xref py py-class docutils literal"><span class="pre">ExceptionInfo</span></tt></a>
instance, containing the traceback (if any).</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The return value of this handler is ignored.</p>
</dd></dl>

<dl class="method">
<dt id="celery.app.task.Task.apply">
<tt class="descclassname">Task.</tt><tt class="descname">apply</tt><big>(</big><em>args=None</em>, <em>kwargs=None</em>, <em>**options</em><big>)</big><a class="reference internal" href="../_modules/celery/app/task.html#Task.apply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.app.task.Task.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute this task locally, by blocking until the task returns.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>args</strong> &#8211; positional arguments passed on to the task.</li>
<li><strong>kwargs</strong> &#8211; keyword arguments passed on to the task.</li>
<li><strong>throw</strong> &#8211; Re-raise task exceptions.  Defaults to
the <a class="reference internal" href="../configuration.html#std:setting-CELERY_EAGER_PROPAGATES_EXCEPTIONS"><tt class="xref std std-setting docutils literal"><span class="pre">CELERY_EAGER_PROPAGATES_EXCEPTIONS</span></tt></a>
setting.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>:rtype <a class="reference internal" href="celery.result.html#celery.result.EagerResult" title="celery.result.EagerResult"><tt class="xref py py-class docutils literal"><span class="pre">celery.result.EagerResult</span></tt></a>:</p>
</dd></dl>

<dl class="method">
<dt id="celery.app.task.Task.apply_async">
<tt class="descclassname">Task.</tt><tt class="descname">apply_async</tt><big>(</big><em>args=None</em>, <em>kwargs=None</em>, <em>task_id=None</em>, <em>producer=None</em>, <em>connection=None</em>, <em>router=None</em>, <em>link=None</em>, <em>link_error=None</em>, <em>publisher=None</em>, <em>add_to_parent=True</em>, <em>**options</em><big>)</big><a class="reference internal" href="../_modules/celery/app/task.html#Task.apply_async"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.app.task.Task.apply_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply tasks asynchronously by sending a message.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>args</strong> &#8211; The positional arguments to pass on to the
task (a <tt class="xref py py-class docutils literal"><span class="pre">list</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">tuple</span></tt>).</li>
<li><strong>kwargs</strong> &#8211; The keyword arguments to pass on to the
task (a <a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">dict</span></tt></a>)</li>
<li><strong>countdown</strong> &#8211; Number of seconds into the future that the
task should execute. Defaults to immediate
execution (do not confuse with the
<cite>immediate</cite> flag, as they are unrelated).</li>
<li><strong>eta</strong> &#8211; A <a class="reference external" href="http://docs.python.org/library/datetime.html#datetime.datetime" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">datetime</span></tt></a> object describing
the absolute time and date of when the task should
be executed.  May not be specified if <cite>countdown</cite>
is also supplied.  (Do not confuse this with the
<cite>immediate</cite> flag, as they are unrelated).</li>
<li><strong>expires</strong> &#8211; Either a <tt class="xref py py-class docutils literal"><span class="pre">int</span></tt>, describing the number of
seconds, or a <a class="reference external" href="http://docs.python.org/library/datetime.html#datetime.datetime" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">datetime</span></tt></a> object
that describes the absolute time and date of when
the task should expire.  The task will not be
executed after the expiration time.</li>
<li><strong>connection</strong> &#8211; Re-use existing broker connection instead
of establishing a new one.</li>
<li><strong>retry</strong> &#8211; If enabled sending of the task message will be retried
in the event of connection loss or failure.  Default
is taken from the <a class="reference internal" href="../configuration.html#std:setting-CELERY_TASK_PUBLISH_RETRY"><tt class="xref std std-setting docutils literal"><span class="pre">CELERY_TASK_PUBLISH_RETRY</span></tt></a>
setting.  Note you need to handle the
producer/connection manually for this to work.</li>
<li><strong>retry_policy</strong> &#8211; Override the retry policy used.  See the
<a class="reference internal" href="../configuration.html#std:setting-CELERY_TASK_PUBLISH_RETRY"><tt class="xref std std-setting docutils literal"><span class="pre">CELERY_TASK_PUBLISH_RETRY</span></tt></a> setting.</li>
<li><strong>routing_key</strong> &#8211; The routing key used to route the task to a
worker server.  Defaults to the
<tt class="xref py py-attr docutils literal"><span class="pre">routing_key</span></tt> attribute.</li>
<li><strong>exchange</strong> &#8211; The named exchange to send the task to.
Defaults to the <tt class="xref py py-attr docutils literal"><span class="pre">exchange</span></tt> attribute.</li>
<li><strong>exchange_type</strong> &#8211; The exchange type to initialize the exchange
if not already declared.  Defaults to the
<tt class="xref py py-attr docutils literal"><span class="pre">exchange_type</span></tt> attribute.</li>
<li><strong>immediate</strong> &#8211; Request immediate delivery.  Will raise an
exception if the task cannot be routed to a worker
immediately.  (Do not confuse this parameter with
the <cite>countdown</cite> and <cite>eta</cite> settings, as they are
unrelated).  Defaults to the <tt class="xref py py-attr docutils literal"><span class="pre">immediate</span></tt>
attribute.</li>
<li><strong>mandatory</strong> &#8211; Mandatory routing. Raises an exception if
there&#8217;s no running workers able to take on this
task.  Defaults to the <tt class="xref py py-attr docutils literal"><span class="pre">mandatory</span></tt>
attribute.</li>
<li><strong>priority</strong> &#8211; The task priority, a number between 0 and 9.
Defaults to the <tt class="xref py py-attr docutils literal"><span class="pre">priority</span></tt> attribute.</li>
<li><strong>serializer</strong> &#8211; A string identifying the default
serialization method to use.  Can be <cite>pickle</cite>,
<cite>json</cite>, <cite>yaml</cite>, <cite>msgpack</cite> or any custom
serialization method that has been registered
with <tt class="xref py py-mod docutils literal"><span class="pre">kombu.serialization.registry</span></tt>.
Defaults to the <a class="reference internal" href="../userguide/tasks.html#Task.serializer" title="Task.serializer"><tt class="xref py py-attr docutils literal"><span class="pre">serializer</span></tt></a> attribute.</li>
<li><strong>compression</strong> &#8211; A string identifying the compression method
to use.  Can be one of <tt class="docutils literal"><span class="pre">zlib</span></tt>, <tt class="docutils literal"><span class="pre">bzip2</span></tt>,
or any custom compression methods registered with
<tt class="xref py py-func docutils literal"><span class="pre">kombu.compression.register()</span></tt>. Defaults to
the <a class="reference internal" href="../configuration.html#std:setting-CELERY_MESSAGE_COMPRESSION"><tt class="xref std std-setting docutils literal"><span class="pre">CELERY_MESSAGE_COMPRESSION</span></tt></a>
setting.</li>
<li><strong>link</strong> &#8211; A single, or a list of subtasks to apply if the
task exits successfully.</li>
<li><strong>link_error</strong> &#8211; A single, or a list of subtasks to apply
if an error occurs while executing the task.</li>
<li><strong>producer</strong> &#8211; :class:~&#64;amqp.TaskProducer` instance to use.</li>
<li><strong>add_to_parent</strong> &#8211; If set to True (default) and the task
is applied while executing another task, then the result
will be appended to the parent tasks <tt class="docutils literal"><span class="pre">request.children</span></tt>
attribute.</li>
<li><strong>publisher</strong> &#8211; Deprecated alias to <tt class="docutils literal"><span class="pre">producer</span></tt>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the <a class="reference internal" href="../configuration.html#std:setting-CELERY_ALWAYS_EAGER"><tt class="xref std std-setting docutils literal"><span class="pre">CELERY_ALWAYS_EAGER</span></tt></a> setting is set, it will
be replaced by a local <a class="reference internal" href="#celery.app.task.Task.apply" title="celery.app.task.Task.apply"><tt class="xref py py-func docutils literal"><span class="pre">apply()</span></tt></a> call instead.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="celery.app.task.Task.autoregister">
<tt class="descclassname">Task.</tt><tt class="descname">autoregister</tt><em class="property"> = True</em><a class="headerlink" href="#celery.app.task.Task.autoregister" title="Permalink to this definition">¶</a></dt>
<dd><p>If disabled this task won&#8217;t be registered automatically.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.app.task.Task.backend">
<tt class="descclassname">Task.</tt><tt class="descname">backend</tt><em class="property"> = &lt;celery.backends.base.DisabledBackend object at 0x103508bd0&gt;</em><a class="headerlink" href="#celery.app.task.Task.backend" title="Permalink to this definition">¶</a></dt>
<dd><p>The result store backend used for this task.</p>
</dd></dl>

<dl class="method">
<dt id="celery.app.task.Task.chunks">
<tt class="descclassname">Task.</tt><tt class="descname">chunks</tt><big>(</big><em>it</em>, <em>n</em><big>)</big><a class="reference internal" href="../_modules/celery/app/task.html#Task.chunks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.app.task.Task.chunks" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a <tt class="xref py py-class docutils literal"><span class="pre">chunks</span></tt> task for this task.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.app.task.Task.default_retry_delay">
<tt class="descclassname">Task.</tt><tt class="descname">default_retry_delay</tt><em class="property"> = 180</em><a class="headerlink" href="#celery.app.task.Task.default_retry_delay" title="Permalink to this definition">¶</a></dt>
<dd><p>Default time in seconds before a retry of the task should be
executed.  3 minutes by default.</p>
</dd></dl>

<dl class="method">
<dt id="celery.app.task.Task.delay">
<tt class="descclassname">Task.</tt><tt class="descname">delay</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/celery/app/task.html#Task.delay"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.app.task.Task.delay" title="Permalink to this definition">¶</a></dt>
<dd><p>Star argument version of <a class="reference internal" href="#celery.app.task.Task.apply_async" title="celery.app.task.Task.apply_async"><tt class="xref py py-meth docutils literal"><span class="pre">apply_async()</span></tt></a>.</p>
<p>Does not support the extra options enabled by <a class="reference internal" href="#celery.app.task.Task.apply_async" title="celery.app.task.Task.apply_async"><tt class="xref py py-meth docutils literal"><span class="pre">apply_async()</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>*args</strong> &#8211; positional arguments passed on to the task.</li>
<li><strong>**kwargs</strong> &#8211; keyword arguments passed on to the task.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>:returns <a class="reference internal" href="celery.result.html#celery.result.AsyncResult" title="celery.result.AsyncResult"><tt class="xref py py-class docutils literal"><span class="pre">celery.result.AsyncResult</span></tt></a>:</p>
</dd></dl>

<dl class="method">
<dt id="celery.app.task.Task.execute">
<tt class="descclassname">Task.</tt><tt class="descname">execute</tt><big>(</big><em>request</em>, <em>pool</em>, <em>loglevel</em>, <em>logfile</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/celery/app/task.html#Task.execute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.app.task.Task.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>The method the worker calls to execute the task.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>request</strong> &#8211; A <a class="reference external" href="http://docs.celeryproject.org/en/latest/reference/celery.worker.job.html#celery.worker.job.Request" title="(in Celery v3.1)"><tt class="xref py py-class docutils literal"><span class="pre">Request</span></tt></a>.</li>
<li><strong>pool</strong> &#8211; A task pool.</li>
<li><strong>loglevel</strong> &#8211; Current loglevel.</li>
<li><strong>logfile</strong> &#8211; Name of the currently used logfile.</li>
<li><strong>consumer</strong> &#8211; The <a class="reference external" href="http://docs.celeryproject.org/en/latest/reference/celery.worker.consumer.html#celery.worker.consumer.Consumer" title="(in Celery v3.1)"><tt class="xref py py-class docutils literal"><span class="pre">Consumer</span></tt></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="celery.app.task.Task.expires">
<tt class="descclassname">Task.</tt><tt class="descname">expires</tt><em class="property"> = None</em><a class="headerlink" href="#celery.app.task.Task.expires" title="Permalink to this definition">¶</a></dt>
<dd><p>Default task expiry time.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.app.task.Task.ignore_result">
<tt class="descclassname">Task.</tt><tt class="descname">ignore_result</tt><em class="property"> = False</em><a class="headerlink" href="#celery.app.task.Task.ignore_result" title="Permalink to this definition">¶</a></dt>
<dd><p>If enabled the worker will not store task state and return values
for this task.  Defaults to the <a class="reference internal" href="../configuration.html#std:setting-CELERY_IGNORE_RESULT"><tt class="xref std std-setting docutils literal"><span class="pre">CELERY_IGNORE_RESULT</span></tt></a>
setting.</p>
</dd></dl>

<dl class="method">
<dt id="celery.app.task.Task.map">
<tt class="descclassname">Task.</tt><tt class="descname">map</tt><big>(</big><em>it</em><big>)</big><a class="reference internal" href="../_modules/celery/app/task.html#Task.map"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.app.task.Task.map" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a <tt class="xref py py-class docutils literal"><span class="pre">xmap</span></tt> task from <tt class="docutils literal"><span class="pre">it</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.app.task.Task.max_retries">
<tt class="descclassname">Task.</tt><tt class="descname">max_retries</tt><em class="property"> = 3</em><a class="headerlink" href="#celery.app.task.Task.max_retries" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum number of retries before giving up.  If set to <tt class="xref py py-const docutils literal"><span class="pre">None</span></tt>,
it will <strong>never</strong> stop retrying.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.app.task.Task.name">
<tt class="descclassname">Task.</tt><tt class="descname">name</tt><em class="property"> = None</em><a class="headerlink" href="#celery.app.task.Task.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the task.</p>
</dd></dl>

<dl class="classmethod">
<dt id="celery.app.task.Task.on_bound">
<em class="property">classmethod </em><tt class="descclassname">Task.</tt><tt class="descname">on_bound</tt><big>(</big><em>app</em><big>)</big><a class="reference internal" href="../_modules/celery/app/task.html#Task.on_bound"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.app.task.Task.on_bound" title="Permalink to this definition">¶</a></dt>
<dd><p>This method can be defined to do additional actions when the
task class is bound to an app.</p>
</dd></dl>

<dl class="method">
<dt id="celery.app.task.Task.on_failure">
<tt class="descclassname">Task.</tt><tt class="descname">on_failure</tt><big>(</big><em>exc</em>, <em>task_id</em>, <em>args</em>, <em>kwargs</em>, <em>einfo</em><big>)</big><a class="reference internal" href="../_modules/celery/app/task.html#Task.on_failure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.app.task.Task.on_failure" title="Permalink to this definition">¶</a></dt>
<dd><p>Error handler.</p>
<p>This is run by the worker when the task fails.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>exc</strong> &#8211; The exception raised by the task.</li>
<li><strong>task_id</strong> &#8211; Unique id of the failed task.</li>
<li><strong>args</strong> &#8211; Original arguments for the task that failed.</li>
<li><strong>kwargs</strong> &#8211; Original keyword arguments for the task
that failed.</li>
<li><strong>einfo</strong> &#8211; <a class="reference external" href="http://docs.celeryproject.org/en/latest/internals/reference/celery.datastructures.html#celery.datastructures.ExceptionInfo" title="(in Celery v3.1)"><tt class="xref py py-class docutils literal"><span class="pre">ExceptionInfo</span></tt></a>
instance, containing the traceback.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The return value of this handler is ignored.</p>
</dd></dl>

<dl class="method">
<dt id="celery.app.task.Task.on_retry">
<tt class="descclassname">Task.</tt><tt class="descname">on_retry</tt><big>(</big><em>exc</em>, <em>task_id</em>, <em>args</em>, <em>kwargs</em>, <em>einfo</em><big>)</big><a class="reference internal" href="../_modules/celery/app/task.html#Task.on_retry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.app.task.Task.on_retry" title="Permalink to this definition">¶</a></dt>
<dd><p>Retry handler.</p>
<p>This is run by the worker when the task is to be retried.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>exc</strong> &#8211; The exception sent to <a class="reference internal" href="#celery.app.task.Task.retry" title="celery.app.task.Task.retry"><tt class="xref py py-meth docutils literal"><span class="pre">retry()</span></tt></a>.</li>
<li><strong>task_id</strong> &#8211; Unique id of the retried task.</li>
<li><strong>args</strong> &#8211; Original arguments for the retried task.</li>
<li><strong>kwargs</strong> &#8211; Original keyword arguments for the retried task.</li>
<li><strong>einfo</strong> &#8211; <a class="reference external" href="http://docs.celeryproject.org/en/latest/internals/reference/celery.datastructures.html#celery.datastructures.ExceptionInfo" title="(in Celery v3.1)"><tt class="xref py py-class docutils literal"><span class="pre">ExceptionInfo</span></tt></a>
instance, containing the traceback.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The return value of this handler is ignored.</p>
</dd></dl>

<dl class="method">
<dt id="celery.app.task.Task.on_success">
<tt class="descclassname">Task.</tt><tt class="descname">on_success</tt><big>(</big><em>retval</em>, <em>task_id</em>, <em>args</em>, <em>kwargs</em><big>)</big><a class="reference internal" href="../_modules/celery/app/task.html#Task.on_success"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.app.task.Task.on_success" title="Permalink to this definition">¶</a></dt>
<dd><p>Success handler.</p>
<p>Run by the worker if the task executes successfully.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>retval</strong> &#8211; The return value of the task.</li>
<li><strong>task_id</strong> &#8211; Unique id of the executed task.</li>
<li><strong>args</strong> &#8211; Original arguments for the executed task.</li>
<li><strong>kwargs</strong> &#8211; Original keyword arguments for the executed task.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The return value of this handler is ignored.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.app.task.Task.rate_limit">
<tt class="descclassname">Task.</tt><tt class="descname">rate_limit</tt><em class="property"> = None</em><a class="headerlink" href="#celery.app.task.Task.rate_limit" title="Permalink to this definition">¶</a></dt>
<dd><p>Rate limit for this task type.  Examples: <tt class="xref py py-const docutils literal"><span class="pre">None</span></tt> (no rate
limit), <cite>&#8216;100/s&#8217;</cite> (hundred tasks a second), <cite>&#8216;100/m&#8217;</cite> (hundred tasks
a minute),`&#8216;100/h&#8217;` (hundred tasks an hour)</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.app.task.Task.request">
<tt class="descclassname">Task.</tt><tt class="descname">request</tt><a class="reference internal" href="../_modules/celery/app/task.html#Task.request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.app.task.Task.request" title="Permalink to this definition">¶</a></dt>
<dd><p>Current request object.</p>
</dd></dl>

<dl class="method">
<dt id="celery.app.task.Task.retry">
<tt class="descclassname">Task.</tt><tt class="descname">retry</tt><big>(</big><em>args=None</em>, <em>kwargs=None</em>, <em>exc=None</em>, <em>throw=True</em>, <em>eta=None</em>, <em>countdown=None</em>, <em>max_retries=None</em>, <em>**options</em><big>)</big><a class="reference internal" href="../_modules/celery/app/task.html#Task.retry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.app.task.Task.retry" title="Permalink to this definition">¶</a></dt>
<dd><p>Retry the task.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>args</strong> &#8211; Positional arguments to retry with.</li>
<li><strong>kwargs</strong> &#8211; Keyword arguments to retry with.</li>
<li><strong>exc</strong> &#8211; Optional exception to raise instead of
<a class="reference internal" href="celery.exceptions.html#celery.exceptions.MaxRetriesExceededError" title="celery.exceptions.MaxRetriesExceededError"><tt class="xref py py-exc docutils literal"><span class="pre">MaxRetriesExceededError</span></tt></a>
when the max restart limit has been exceeded.</li>
<li><strong>countdown</strong> &#8211; Time in seconds to delay the retry for.</li>
<li><strong>eta</strong> &#8211; Explicit time and date to run the retry at
(must be a <a class="reference external" href="http://docs.python.org/library/datetime.html#datetime.datetime" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">datetime</span></tt></a> instance).</li>
<li><strong>max_retries</strong> &#8211; If set, overrides the default retry limit.</li>
<li><strong>**options</strong> &#8211; Any extra options to pass on to
meth:<cite>apply_async</cite>.</li>
<li><strong>throw</strong> &#8211; If this is <tt class="xref py py-const docutils literal"><span class="pre">False</span></tt>, do not raise the
<a class="reference internal" href="celery.exceptions.html#celery.exceptions.RetryTaskError" title="celery.exceptions.RetryTaskError"><tt class="xref py py-exc docutils literal"><span class="pre">RetryTaskError</span></tt></a> exception,
that tells the worker to mark the task as being
retried.  Note that this means the task will be
marked as failed if the task raises an exception,
or successful if it returns.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Raises <a class="reference internal" href="celery.exceptions.html#celery.exceptions.RetryTaskError" title="celery.exceptions.RetryTaskError">celery.exceptions.RetryTaskError</a>:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first last">To tell the worker that
the task has been re-sent for retry. This always happens,
unless the <cite>throw</cite> keyword argument has been explicitly set
to <tt class="xref py py-const docutils literal"><span class="pre">False</span></tt>, and is considered normal operation.</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nd">@task</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">tweet</span><span class="p">(</span><span class="n">auth</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">twitter</span> <span class="o">=</span> <span class="n">Twitter</span><span class="p">(</span><span class="n">oauth</span><span class="o">=</span><span class="n">auth</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">twitter</span><span class="o">.</span><span class="n">post_status_update</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">except</span> <span class="n">twitter</span><span class="o">.</span><span class="n">FailWhale</span><span class="p">,</span> <span class="n">exc</span><span class="p">:</span>
<span class="gp">... </span>        <span class="c"># Retry in 5 minutes.</span>
<span class="gp">... </span>        <span class="k">raise</span> <span class="n">tweet</span><span class="o">.</span><span class="n">retry</span><span class="p">(</span><span class="n">countdown</span><span class="o">=</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">5</span><span class="p">,</span> <span class="n">exc</span><span class="o">=</span><span class="n">exc</span><span class="p">)</span>
</pre></div>
</div>
<p>Although the task will never return above as <cite>retry</cite> raises an
exception to notify the worker, we use <cite>return</cite> in front of the retry
to convey that the rest of the block will not be executed.</p>
</dd></dl>

<dl class="method">
<dt id="celery.app.task.Task.run">
<tt class="descclassname">Task.</tt><tt class="descname">run</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/celery/app/task.html#Task.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.app.task.Task.run" title="Permalink to this definition">¶</a></dt>
<dd><p>The body of the task executed by workers.</p>
</dd></dl>

<dl class="method">
<dt id="celery.app.task.Task.s">
<tt class="descclassname">Task.</tt><tt class="descname">s</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/celery/app/task.html#Task.s"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.app.task.Task.s" title="Permalink to this definition">¶</a></dt>
<dd><p><tt class="docutils literal"><span class="pre">.s(*a,</span> <span class="pre">**k)</span> <span class="pre">-&gt;</span> <span class="pre">.subtask(a,</span> <span class="pre">k)</span></tt></p>
</dd></dl>

<dl class="attribute">
<dt id="celery.app.task.Task.send_error_emails">
<tt class="descclassname">Task.</tt><tt class="descname">send_error_emails</tt><em class="property"> = False</em><a class="headerlink" href="#celery.app.task.Task.send_error_emails" title="Permalink to this definition">¶</a></dt>
<dd><p>If enabled an email will be sent to <a class="reference internal" href="../configuration.html#std:setting-ADMINS"><tt class="xref std std-setting docutils literal"><span class="pre">ADMINS</span></tt></a> whenever a task
of this type fails.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.app.task.Task.serializer">
<tt class="descclassname">Task.</tt><tt class="descname">serializer</tt><em class="property"> = 'pickle'</em><a class="headerlink" href="#celery.app.task.Task.serializer" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of a serializer that are registered with
<tt class="xref py py-mod docutils literal"><span class="pre">kombu.serialization.registry</span></tt>.  Default is <cite>&#8216;pickle&#8217;</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="celery.app.task.Task.si">
<tt class="descclassname">Task.</tt><tt class="descname">si</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/celery/app/task.html#Task.si"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.app.task.Task.si" title="Permalink to this definition">¶</a></dt>
<dd><p><tt class="docutils literal"><span class="pre">.si(*a,</span> <span class="pre">**k)</span> <span class="pre">-&gt;</span> <span class="pre">.subtask(a,</span> <span class="pre">k,</span> <span class="pre">immutable=True)</span></tt></p>
</dd></dl>

<dl class="attribute">
<dt id="celery.app.task.Task.soft_time_limit">
<tt class="descclassname">Task.</tt><tt class="descname">soft_time_limit</tt><em class="property"> = None</em><a class="headerlink" href="#celery.app.task.Task.soft_time_limit" title="Permalink to this definition">¶</a></dt>
<dd><p>Soft time limit.
Defaults to the <tt class="xref std std-setting docutils literal"><span class="pre">CELERY_TASK_SOFT_TIME_LIMIT</span></tt> setting.</p>
</dd></dl>

<dl class="method">
<dt id="celery.app.task.Task.starmap">
<tt class="descclassname">Task.</tt><tt class="descname">starmap</tt><big>(</big><em>it</em><big>)</big><a class="reference internal" href="../_modules/celery/app/task.html#Task.starmap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.app.task.Task.starmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a <tt class="xref py py-class docutils literal"><span class="pre">xstarmap</span></tt> task from <tt class="docutils literal"><span class="pre">it</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.app.task.Task.store_errors_even_if_ignored">
<tt class="descclassname">Task.</tt><tt class="descname">store_errors_even_if_ignored</tt><em class="property"> = False</em><a class="headerlink" href="#celery.app.task.Task.store_errors_even_if_ignored" title="Permalink to this definition">¶</a></dt>
<dd><p>When enabled errors will be stored even if the task is otherwise
configured to ignore results.</p>
</dd></dl>

<dl class="method">
<dt id="celery.app.task.Task.subtask">
<tt class="descclassname">Task.</tt><tt class="descname">subtask</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/celery/app/task.html#Task.subtask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.app.task.Task.subtask" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <a class="reference internal" href="celery.html#celery.subtask" title="celery.subtask"><tt class="xref py py-class docutils literal"><span class="pre">subtask</span></tt></a> object for
this task, wrapping arguments and execution options
for a single task invocation.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.app.task.Task.time_limit">
<tt class="descclassname">Task.</tt><tt class="descname">time_limit</tt><em class="property"> = None</em><a class="headerlink" href="#celery.app.task.Task.time_limit" title="Permalink to this definition">¶</a></dt>
<dd><p>Hard time limit.
Defaults to the <tt class="xref std std-setting docutils literal"><span class="pre">CELERY_TASK_TIME_LIMIT</span></tt> setting.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.app.task.Task.track_started">
<tt class="descclassname">Task.</tt><tt class="descname">track_started</tt><em class="property"> = False</em><a class="headerlink" href="#celery.app.task.Task.track_started" title="Permalink to this definition">¶</a></dt>
<dd><p>If enabled the task will report its status as &#8216;started&#8217; when the task
is executed by a worker.  Disabled by default as the normal behaviour
is to not report that level of granularity.  Tasks are either pending,
finished, or waiting to be retried.</p>
<p>Having a &#8216;started&#8217; status can be useful for when there are long
running tasks and there is a need to report which task is currently
running.</p>
<p>The application default can be overridden using the
<a class="reference internal" href="../configuration.html#std:setting-CELERY_TRACK_STARTED"><tt class="xref std std-setting docutils literal"><span class="pre">CELERY_TRACK_STARTED</span></tt></a> setting.</p>
</dd></dl>

<dl class="method">
<dt id="celery.app.task.Task.update_state">
<tt class="descclassname">Task.</tt><tt class="descname">update_state</tt><big>(</big><em>task_id=None</em>, <em>state=None</em>, <em>meta=None</em><big>)</big><a class="reference internal" href="../_modules/celery/app/task.html#Task.update_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.app.task.Task.update_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Update task state.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>task_id</strong> &#8211; Id of the task to update, defaults to the
id of the current task</li>
<li><strong>state</strong> &#8211; New state (<tt class="xref py py-class docutils literal"><span class="pre">str</span></tt>).</li>
<li><strong>meta</strong> &#8211; State metadata (<a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">dict</span></tt></a>).</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="celery.app.task.TaskType">
<em class="property">class </em><tt class="descclassname">celery.app.task.</tt><tt class="descname">TaskType</tt><a class="reference internal" href="../_modules/celery/app/task.html#TaskType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#celery.app.task.TaskType" title="Permalink to this definition">¶</a></dt>
<dd><p>Meta class for tasks.</p>
<p>Automatically registers the task in the task registry, except
if the <cite>abstract</cite> attribute is set.</p>
<p>If no <cite>name</cite> attribute is provided, then no name is automatically
set to the name of the module it was defined in, and the class name.</p>
</dd></dl>

</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        <a href="/">Home</a>:
        «&#160;&#160;<a href="celery.app.html">celery.app</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="celery.app.amqp.html">celery.app.amqp</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2012, HDKNR.COM.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>