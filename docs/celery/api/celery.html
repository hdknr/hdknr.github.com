

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>celery &mdash; Celery 1 documentation</title>
    
    <link rel="stylesheet" href="../static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/underscore.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <script type="text/javascript" src="../static/theme_extras.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="top" title="Celery 1 documentation" href="../index.html" />
    <link rel="up" title="API Reference" href="index.html" />
    <link rel="next" title="celery.app" href="celery.app.html" />
    <link rel="prev" title="API Reference" href="index.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="../index.html">
          <span>Celery 1 documentation</span></a></h1>
        <h2 class="heading"><span>celery</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        <a href="/">Home</a>:
        «&#160;&#160;<a href="index.html">API Reference</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="celery.app.html">celery.app</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="module-celery">
<span id="celery"></span><h1>celery<a class="headerlink" href="#module-celery" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#application" id="id1">Application</a></li>
<li><a class="reference internal" href="#grouping-tasks" id="id2">Grouping Tasks</a></li>
<li><a class="reference internal" href="#proxies" id="id3">Proxies</a></li>
</ul>
</div>
<div class="section" id="application">
<h2><a class="toc-backref" href="#id1">Application</a><a class="headerlink" href="#application" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="celery.Celery">
<em class="property">class </em><tt class="descclassname">celery.</tt><tt class="descname">Celery</tt><big>(</big><em>main='__main__'</em>, <em>broker='amqp://localhost//'</em>, <em>...</em><big>)</big><a class="headerlink" href="#celery.Celery" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>main</strong> &#8211; Name of the main module if running as <cite>__main__</cite>.</li>
<li><strong>broker</strong> &#8211; URL of the default broker used.</li>
<li><strong>loader</strong> &#8211; The loader class, or the name of the loader class to use.
Default is <a class="reference internal" href="celery.loaders.app.html#celery.loaders.app.AppLoader" title="celery.loaders.app.AppLoader"><tt class="xref py py-class docutils literal"><span class="pre">celery.loaders.app.AppLoader</span></tt></a>.</li>
<li><strong>backend</strong> &#8211; The result store backend class, or the name of the
backend class to use. Default is the value of the
<a class="reference external" href="http://docs.celeryproject.org/en/latest/configuration.html#std:setting-CELERY_RESULT_BACKEND" title="(in Celery v3.0)"><tt class="xref std std-setting docutils literal"><span class="pre">CELERY_RESULT_BACKEND</span></tt></a> setting.</li>
<li><strong>amqp</strong> &#8211; AMQP object or class name.</li>
<li><strong>events</strong> &#8211; Events object or class name.</li>
<li><strong>log</strong> &#8211; Log object or class name.</li>
<li><strong>control</strong> &#8211; Control object or class name.</li>
<li><strong>set_as_current</strong> &#8211; Make this the global current app.</li>
<li><strong>tasks</strong> &#8211; A task registry or the name of a registry class.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="celery.Celery.main">
<tt class="descname">main</tt><a class="headerlink" href="#celery.Celery.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the <cite>__main__</cite> module.  Required for standalone scripts.</p>
<p>If set this will be used instead of <cite>__main__</cite> when automatically
generating task names.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.Celery.conf">
<tt class="descname">conf</tt><a class="headerlink" href="#celery.Celery.conf" title="Permalink to this definition">¶</a></dt>
<dd><p>Current configuration.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.Celery.current_task">
<tt class="descname">current_task</tt><a class="headerlink" href="#celery.Celery.current_task" title="Permalink to this definition">¶</a></dt>
<dd><p>The instance of the task that is being executed, or <tt class="xref py py-const docutils literal"><span class="pre">None</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.Celery.amqp">
<tt class="descname">amqp</tt><a class="headerlink" href="#celery.Celery.amqp" title="Permalink to this definition">¶</a></dt>
<dd><p>AMQP related functionality: <a class="reference internal" href="celery.app.amqp.html#celery.app.amqp.AMQP" title="celery.app.amqp.AMQP"><tt class="xref py py-class docutils literal"><span class="pre">amqp</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.Celery.backend">
<tt class="descname">backend</tt><a class="headerlink" href="#celery.Celery.backend" title="Permalink to this definition">¶</a></dt>
<dd><p>Current backend instance.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.Celery.loader">
<tt class="descname">loader</tt><a class="headerlink" href="#celery.Celery.loader" title="Permalink to this definition">¶</a></dt>
<dd><p>Current loader instance.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.Celery.control">
<tt class="descname">control</tt><a class="headerlink" href="#celery.Celery.control" title="Permalink to this definition">¶</a></dt>
<dd><p>Remote control: <a class="reference internal" href="celery.app.control.html#celery.app.control.Control" title="celery.app.control.Control"><tt class="xref py py-class docutils literal"><span class="pre">control</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.Celery.events">
<tt class="descname">events</tt><a class="headerlink" href="#celery.Celery.events" title="Permalink to this definition">¶</a></dt>
<dd><p>Consuming and sending events: <a class="reference internal" href="celery.events.html#celery.events.Events" title="celery.events.Events"><tt class="xref py py-class docutils literal"><span class="pre">events</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.Celery.log">
<tt class="descname">log</tt><a class="headerlink" href="#celery.Celery.log" title="Permalink to this definition">¶</a></dt>
<dd><p>Logging: <a class="reference internal" href="celery.app.log.html#celery.app.log.Logging" title="celery.app.log.Logging"><tt class="xref py py-class docutils literal"><span class="pre">log</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.Celery.tasks">
<tt class="descname">tasks</tt><a class="headerlink" href="#celery.Celery.tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Task registry.</p>
<p>Accessing this attribute will also finalize the app.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.Celery.pool">
<tt class="descname">pool</tt><a class="headerlink" href="#celery.Celery.pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Broker connection pool: <tt class="xref py py-class docutils literal"><span class="pre">pool</span></tt>.
This attribute is not related to the workers concurrency pool.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.Celery.Task">
<tt class="descname">Task</tt><a class="headerlink" href="#celery.Celery.Task" title="Permalink to this definition">¶</a></dt>
<dd><p>Base task class for this app.</p>
</dd></dl>

<dl class="method">
<dt id="celery.Celery.bugreport">
<tt class="descname">bugreport</tt><big>(</big><big>)</big><a class="headerlink" href="#celery.Celery.bugreport" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a string with information useful for the Celery core
developers when reporting a bug.</p>
</dd></dl>

<dl class="method">
<dt id="celery.Celery.config_from_object">
<tt class="descname">config_from_object</tt><big>(</big><em>obj</em>, <em>silent=False</em><big>)</big><a class="headerlink" href="#celery.Celery.config_from_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads configuration from object, where object is either
an object or the name of a module to import.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>silent</strong> &#8211; If true then import errors will be ignored.</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">celery</span><span class="o">.</span><span class="n">config_from_object</span><span class="p">(</span><span class="s">&quot;myapp.celeryconfig&quot;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">myapp</span> <span class="kn">import</span> <span class="n">celeryconfig</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">celery</span><span class="o">.</span><span class="n">config_from_object</span><span class="p">(</span><span class="n">celeryconfig</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="celery.Celery.config_from_envvar">
<tt class="descname">config_from_envvar</tt><big>(</big><em>variable_name</em>, <em>silent=False</em><big>)</big><a class="headerlink" href="#celery.Celery.config_from_envvar" title="Permalink to this definition">¶</a></dt>
<dd><p>Read configuration from environment variable.</p>
<p>The value of the environment variable must be the name
of a module to import.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&quot;CELERY_CONFIG_MODULE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;myapp.celeryconfig&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">celery</span><span class="o">.</span><span class="n">config_from_envvar</span><span class="p">(</span><span class="s">&quot;CELERY_CONFIG_MODULE&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="celery.Celery.add_defaults">
<tt class="descname">add_defaults</tt><big>(</big><em>d</em><big>)</big><a class="headerlink" href="#celery.Celery.add_defaults" title="Permalink to this definition">¶</a></dt>
<dd><p>Add default configuration from dict <tt class="docutils literal"><span class="pre">d</span></tt>.</p>
<p>If the argument is a callable function then it will be regarded
as a promise, and it won&#8217;t be loaded until the configuration is
actually needed.</p>
<p>This method can be compared to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">celery</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
<p>with a difference that 1) no copy will be made and 2) the dict will
not be transferred when the worker spawns child processes, so
it&#8217;s important that the same configuration happens at import time
when pickle restores the object on the other side.</p>
</dd></dl>

<dl class="method">
<dt id="celery.Celery.start">
<tt class="descname">start</tt><big>(</big><em>argv=None</em><big>)</big><a class="headerlink" href="#celery.Celery.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Run <strong class="program">celery</strong> using <cite>argv</cite>.</p>
<p>Uses <a class="reference external" href="http://www.python.jp/doc/release/library/sys.html#sys.argv" title="(in Python v2.7)"><tt class="xref py py-data docutils literal"><span class="pre">sys.argv</span></tt></a> if <cite>argv</cite> is not specified.</p>
</dd></dl>

<dl class="method">
<dt id="celery.Celery.task">
<tt class="descname">task</tt><big>(</big><em>fun</em>, <em>...</em><big>)</big><a class="headerlink" href="#celery.Celery.task" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to create a task class out of any callable.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@celery.task</span>
<span class="k">def</span> <span class="nf">refresh_feed</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="k">return</span> <span class="o">...</span>
</pre></div>
</div>
<p>with setting extra options:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@celery.task</span><span class="p">(</span><span class="n">exchange</span><span class="o">=</span><span class="s">&quot;feeds&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">refresh_feed</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="k">return</span> <span class="o">...</span>
</pre></div>
</div>
<div class="admonition-app-binding admonition">
<p class="first admonition-title">App Binding</p>
<p>For custom apps the task decorator returns proxy
objects, so that the act of creating the task is not performed
until the task is used or the task registry is accessed.</p>
<p class="last">If you are depending on binding to be deferred, then you must
not access any attributes on the returned object until the
application is fully set up (finalized).</p>
</div>
</dd></dl>

<dl class="method">
<dt id="celery.Celery.send_task">
<tt class="descname">send_task</tt><big>(</big><em>name</em><span class="optional">[</span>, <em>args</em><span class="optional">[</span>, <em>kwargs</em><span class="optional">[</span>, <em>...</em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><big>)</big><a class="headerlink" href="#celery.Celery.send_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Send task by name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of task to call (e.g. <cite>&#8220;tasks.add&#8221;</cite>).</li>
<li><strong>result_cls</strong> &#8211; Specify custom result class. Default is
using <a class="reference internal" href="#celery.Celery.AsyncResult" title="celery.Celery.AsyncResult"><tt class="xref py py-meth docutils literal"><span class="pre">AsyncResult()</span></tt></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Otherwise supports the same arguments as <a class="reference internal" href="celery.app.task.html#celery.app.task.Task.apply_async" title="celery.app.task.Task.apply_async"><tt class="xref py py-meth docutils literal"><span class="pre">Task.apply_async()</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.Celery.AsyncResult">
<tt class="descname">AsyncResult</tt><a class="headerlink" href="#celery.Celery.AsyncResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Create new result instance. See <a class="reference internal" href="celery.result.html#celery.result.AsyncResult" title="celery.result.AsyncResult"><tt class="xref py py-class docutils literal"><span class="pre">AsyncResult</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.Celery.GroupResult">
<tt class="descname">GroupResult</tt><a class="headerlink" href="#celery.Celery.GroupResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Create new taskset result instance.
See <a class="reference internal" href="celery.result.html#celery.result.GroupResult" title="celery.result.GroupResult"><tt class="xref py py-class docutils literal"><span class="pre">GroupResult</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="celery.Celery.worker_main">
<tt class="descname">worker_main</tt><big>(</big><em>argv=None</em><big>)</big><a class="headerlink" href="#celery.Celery.worker_main" title="Permalink to this definition">¶</a></dt>
<dd><p>Run <strong class="program">celeryd</strong> using <cite>argv</cite>.</p>
<p>Uses <a class="reference external" href="http://www.python.jp/doc/release/library/sys.html#sys.argv" title="(in Python v2.7)"><tt class="xref py py-data docutils literal"><span class="pre">sys.argv</span></tt></a> if <cite>argv</cite> is not specified.&#8221;&#8220;&#8221;</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.Celery.Worker">
<tt class="descname">Worker</tt><a class="headerlink" href="#celery.Celery.Worker" title="Permalink to this definition">¶</a></dt>
<dd><p>Worker application. See <a class="reference internal" href="celery.apps.worker.html#celery.apps.worker.Worker" title="celery.apps.worker.Worker"><tt class="xref py py-class docutils literal"><span class="pre">Worker</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.Celery.WorkController">
<tt class="descname">WorkController</tt><a class="headerlink" href="#celery.Celery.WorkController" title="Permalink to this definition">¶</a></dt>
<dd><p>Embeddable worker. See <tt class="xref py py-class docutils literal"><span class="pre">WorkController</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.Celery.Beat">
<tt class="descname">Beat</tt><a class="headerlink" href="#celery.Celery.Beat" title="Permalink to this definition">¶</a></dt>
<dd><p>Celerybeat scheduler application.
See <a class="reference internal" href="celery.apps.beat.html#celery.apps.beat.Beat" title="celery.apps.beat.Beat"><tt class="xref py py-class docutils literal"><span class="pre">Beat</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="celery.Celery.connection">
<tt class="descname">connection</tt><big>(</big><em>url=default</em><span class="optional">[</span>, <em>ssl</em><span class="optional">[</span>, <em>transport_options={}</em><span class="optional">]</span><span class="optional">]</span><big>)</big><a class="headerlink" href="#celery.Celery.connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Establish a connection to the message broker.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>url</strong> &#8211; Either the URL or the hostname of the broker to use.</li>
<li><strong>hostname</strong> &#8211; URL, Hostname/IP-address of the broker.
If an URL is used, then the other argument below will
be taken from the URL instead.</li>
<li><strong>userid</strong> &#8211; Username to authenticate as.</li>
<li><strong>password</strong> &#8211; Password to authenticate with</li>
<li><strong>virtual_host</strong> &#8211; Virtual host to use (domain).</li>
<li><strong>port</strong> &#8211; Port to connect to.</li>
<li><strong>ssl</strong> &#8211; Defaults to the <a class="reference external" href="http://docs.celeryproject.org/en/latest/configuration.html#std:setting-BROKER_USE_SSL" title="(in Celery v3.0)"><tt class="xref std std-setting docutils literal"><span class="pre">BROKER_USE_SSL</span></tt></a> setting.</li>
<li><strong>transport</strong> &#8211; defaults to the <a class="reference external" href="http://docs.celeryproject.org/en/latest/configuration.html#std:setting-BROKER_TRANSPORT" title="(in Celery v3.0)"><tt class="xref std std-setting docutils literal"><span class="pre">BROKER_TRANSPORT</span></tt></a>
setting.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>:returns <tt class="xref py py-class docutils literal"><span class="pre">kombu.connection.Connection</span></tt>:</p>
</dd></dl>

<dl class="method">
<dt id="celery.Celery.connection_or_acquire">
<tt class="descname">connection_or_acquire</tt><big>(</big><em>connection=None</em><big>)</big><a class="headerlink" href="#celery.Celery.connection_or_acquire" title="Permalink to this definition">¶</a></dt>
<dd><p>For use within a with-statement to get a connection from the pool
if one is not already provided.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>connection</strong> &#8211; If not provided, then a connection will be
acquired from the connection pool.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="celery.Celery.producer_or_acquire">
<tt class="descname">producer_or_acquire</tt><big>(</big><em>producer=None</em><big>)</big><a class="headerlink" href="#celery.Celery.producer_or_acquire" title="Permalink to this definition">¶</a></dt>
<dd><p>For use within a with-statement to get a producer from the pool
if one is not already provided</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>producer</strong> &#8211; If not provided, then a producer will be
acquired from the producer pool.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="celery.Celery.mail_admins">
<tt class="descname">mail_admins</tt><big>(</big><em>subject</em>, <em>body</em>, <em>fail_silently=False</em><big>)</big><a class="headerlink" href="#celery.Celery.mail_admins" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends an email to the admins in the <a class="reference external" href="http://docs.djangoproject.com/en/dev/ref/settings/#std:setting-ADMINS" title="(in Django v1.5)"><tt class="xref std std-setting docutils literal"><span class="pre">ADMINS</span></tt></a> setting.</p>
</dd></dl>

<dl class="method">
<dt id="celery.Celery.select_queues">
<tt class="descname">select_queues</tt><big>(</big><em>queues=</em><span class="optional">[</span><span class="optional">]</span><big>)</big><a class="headerlink" href="#celery.Celery.select_queues" title="Permalink to this definition">¶</a></dt>
<dd><p>Select a subset of queues, where queues must be a list of queue
names to keep.</p>
</dd></dl>

<dl class="method">
<dt id="celery.Celery.now">
<tt class="descname">now</tt><big>(</big><big>)</big><a class="headerlink" href="#celery.Celery.now" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current time and date as a <a class="reference external" href="http://www.python.jp/doc/release/library/datetime.html#datetime.datetime" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">datetime</span></tt></a>
object.</p>
</dd></dl>

<dl class="method">
<dt id="celery.Celery.set_current">
<tt class="descname">set_current</tt><big>(</big><big>)</big><a class="headerlink" href="#celery.Celery.set_current" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes this the current app for this thread.</p>
</dd></dl>

<dl class="method">
<dt id="celery.Celery.finalize">
<tt class="descname">finalize</tt><big>(</big><big>)</big><a class="headerlink" href="#celery.Celery.finalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalizes the app by loading built-in tasks,
and evaluating pending task decorators</p>
</dd></dl>

<dl class="attribute">
<dt id="celery.Celery.Pickler">
<tt class="descname">Pickler</tt><a class="headerlink" href="#celery.Celery.Pickler" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper class used to pickle this application.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="grouping-tasks">
<h2><a class="toc-backref" href="#id2">Grouping Tasks</a><a class="headerlink" href="#grouping-tasks" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="celery.group">
<em class="property">class </em><tt class="descclassname">celery.</tt><tt class="descname">group</tt><big>(</big><em>task1</em><span class="optional">[</span>, <em>task2</em><span class="optional">[</span>, <em>task3</em><span class="optional">[</span>, <em>... taskN</em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><big>)</big><a class="headerlink" href="#celery.group" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a group of tasks to be executed in parallel.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">group</span><span class="p">([</span><span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)])</span><span class="o">.</span><span class="n">apply_async</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="go">[4, 8]</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">apply_async</span></tt> method returns <a class="reference internal" href="celery.result.html#celery.result.GroupResult" title="celery.result.GroupResult"><tt class="xref py py-class docutils literal"><span class="pre">GroupResult</span></tt></a>.</p>
</dd></dl>

<dl class="class">
<dt id="celery.chain">
<em class="property">class </em><tt class="descclassname">celery.</tt><tt class="descname">chain</tt><big>(</big><em>task1</em><span class="optional">[</span>, <em>task2</em><span class="optional">[</span>, <em>task3</em><span class="optional">[</span>, <em>... taskN</em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><big>)</big><a class="headerlink" href="#celery.chain" title="Permalink to this definition">¶</a></dt>
<dd><p>Chains tasks together, so that each tasks follows each other
by being applied as a callback of the previous task.</p>
<p>If called with only one argument, then that argument must
be an iterable of tasks to chain.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">chain</span><span class="p">(</span><span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span><span class="o">.</span><span class="n">apply_async</span><span class="p">()</span>
</pre></div>
</div>
<p>is effectively <span class="math">(2 + 2) + 4)</span>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="go">8</span>
</pre></div>
</div>
<p>Calling a chain will return the result of the last task in the chain.
You can get to the other tasks by following the <tt class="docutils literal"><span class="pre">result.parent</span></tt>&#8216;s:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="go">4</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="celery.chord">
<em class="property">class </em><tt class="descclassname">celery.</tt><tt class="descname">chord</tt><big>(</big><em>header</em><span class="optional">[</span>, <em>body</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#celery.chord" title="Permalink to this definition">¶</a></dt>
<dd><p>A chord consists of a header and a body.
The header is a group of tasks that must complete before the callback is
called.  A chord is essentially a callback for a group of tasks.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">chord</span><span class="p">([</span><span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)])(</span><span class="n">sum_task</span><span class="o">.</span><span class="n">s</span><span class="p">())</span>
</pre></div>
</div>
<p>is effectively <span class="math">\Sigma ((2 + 2) + (4 + 4))</span>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="go">12</span>
</pre></div>
</div>
<p>The body is applied with the return values of all the header
tasks as a list.</p>
</dd></dl>

<dl class="class">
<dt id="celery.subtask">
<em class="property">class </em><tt class="descclassname">celery.</tt><tt class="descname">subtask</tt><big>(</big><em>task=None</em>, <em>args=()</em>, <em>kwargs={}</em>, <em>options={}</em><big>)</big><a class="headerlink" href="#celery.subtask" title="Permalink to this definition">¶</a></dt>
<dd><p>Describes the arguments and execution options for a single task invocation.</p>
<p>Used as the parts in a <a class="reference internal" href="#celery.group" title="celery.group"><tt class="xref py py-class docutils literal"><span class="pre">group</span></tt></a> or to safely pass
tasks around as callbacks.</p>
<p>Subtasks can also be created from tasks:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">add</span><span class="o">.</span><span class="n">subtask</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="p">(),</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{},</span> <span class="n">options</span><span class="o">=</span><span class="p">{})</span>
</pre></div>
</div>
<p>or the <tt class="docutils literal"><span class="pre">.s()</span></tt> shortcut:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>task</strong> &#8211; Either a task class/instance, or the name of a task.</li>
<li><strong>args</strong> &#8211; Positional arguments to apply.</li>
<li><strong>kwargs</strong> &#8211; Keyword arguments to apply.</li>
<li><strong>options</strong> &#8211; Additional options to <tt class="xref py py-meth docutils literal"><span class="pre">Task.apply_async()</span></tt>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Note that if the first argument is a <a class="reference external" href="http://www.python.jp/doc/release/library/stdtypes.html#dict" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">dict</span></tt></a>, the other
arguments will be ignored and the values in the dict will be used
instead.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">subtask</span><span class="p">(</span><span class="s">&quot;tasks.add&quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">subtask</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">{&quot;task&quot;: &quot;tasks.add&quot;, args=(2, 2), kwargs={}, options={}}</span>
</pre></div>
</div>
<dl class="method">
<dt id="celery.subtask.delay">
<tt class="descname">delay</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#celery.subtask.delay" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut to <a class="reference internal" href="#celery.subtask.apply_async" title="celery.subtask.apply_async"><tt class="xref py py-meth docutils literal"><span class="pre">apply_async()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="celery.subtask.apply_async">
<tt class="descname">apply_async</tt><big>(</big><em>args=()</em>, <em>kwargs={}</em>, <em>...</em><big>)</big><a class="headerlink" href="#celery.subtask.apply_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply this task asynchronously.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>args</strong> &#8211; Partial args to be prepended to the existing args.</li>
<li><strong>kwargs</strong> &#8211; Partial kwargs to be merged with the existing kwargs.</li>
<li><strong>options</strong> &#8211; Partial options to be merged with the existing
options.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>See <a class="reference internal" href="celery.app.task.html#celery.app.task.Task.apply_async" title="celery.app.task.Task.apply_async"><tt class="xref py py-meth docutils literal"><span class="pre">apply_async()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="celery.subtask.apply">
<tt class="descname">apply</tt><big>(</big><em>args=()</em>, <em>kwargs={}</em>, <em>...</em><big>)</big><a class="headerlink" href="#celery.subtask.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#celery.subtask.apply_async" title="celery.subtask.apply_async"><tt class="xref py py-meth docutils literal"><span class="pre">apply_async()</span></tt></a> but executed the task inline instead
of sending a task message.</p>
</dd></dl>

<dl class="method">
<dt id="celery.subtask.clone">
<tt class="descname">clone</tt><big>(</big><em>args=()</em>, <em>kwargs={}</em>, <em>...</em><big>)</big><a class="headerlink" href="#celery.subtask.clone" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a copy of this subtask.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>args</strong> &#8211; Partial args to be prepended to the existing args.</li>
<li><strong>kwargs</strong> &#8211; Partial kwargs to be merged with the existing kwargs.</li>
<li><strong>options</strong> &#8211; Partial options to be merged with the existing
options.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="celery.subtask.replace">
<tt class="descname">replace</tt><big>(</big><em>args=None</em>, <em>kwargs=None</em>, <em>options=None</em><big>)</big><a class="headerlink" href="#celery.subtask.replace" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace the args, kwargs or options set for this subtask.
These are only replaced if the selected is not <tt class="xref py py-const docutils literal"><span class="pre">None</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="celery.subtask.link">
<tt class="descname">link</tt><big>(</big><em>other_subtask</em><big>)</big><a class="headerlink" href="#celery.subtask.link" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a callback task to be applied if this task
executes successfully.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><tt class="docutils literal"><span class="pre">other_subtask</span></tt> (to work with <a class="reference external" href="http://www.python.jp/doc/release/library/functools.html#functools.reduce" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">reduce()</span></tt></a>).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="celery.subtask.link_error">
<tt class="descname">link_error</tt><big>(</big><em>other_subtask</em><big>)</big><a class="headerlink" href="#celery.subtask.link_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a callback task to be applied if an error occurs
while executing this task.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><tt class="docutils literal"><span class="pre">other_subtask</span></tt> (to work with <a class="reference external" href="http://www.python.jp/doc/release/library/functools.html#functools.reduce" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">reduce()</span></tt></a>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="celery.subtask.set">
<tt class="descname">set</tt><big>(</big><em>...</em><big>)</big><a class="headerlink" href="#celery.subtask.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Set arbitrary options (same as <tt class="docutils literal"><span class="pre">.options.update(...)</span></tt>).</p>
<p>This is a chaining method call (i.e. it returns itself).</p>
</dd></dl>

<dl class="method">
<dt id="celery.subtask.flatten_links">
<tt class="descname">flatten_links</tt><big>(</big><big>)</big><a class="headerlink" href="#celery.subtask.flatten_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Gives a recursive list of dependencies (unchain if you will,
but with links intact).</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="proxies">
<h2><a class="toc-backref" href="#id3">Proxies</a><a class="headerlink" href="#proxies" title="Permalink to this headline">¶</a></h2>
<dl class="data">
<dt id="celery.current_app">
<tt class="descclassname">celery.</tt><tt class="descname">current_app</tt><a class="headerlink" href="#celery.current_app" title="Permalink to this definition">¶</a></dt>
<dd><p>The currently set app for this thread.</p>
</dd></dl>

<dl class="data">
<dt id="celery.current_task">
<tt class="descclassname">celery.</tt><tt class="descname">current_task</tt><a class="headerlink" href="#celery.current_task" title="Permalink to this definition">¶</a></dt>
<dd><p>The task currently being executed
(only set in the worker, or when eager/apply is used).</p>
</dd></dl>

</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        <a href="/">Home</a>:
        «&#160;&#160;<a href="index.html">API Reference</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="celery.app.html">celery.app</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2012, HDKNR.COM.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2pre/3c28de26aac2.
    </div>
  </body>
</html>