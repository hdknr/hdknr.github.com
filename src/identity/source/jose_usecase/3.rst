3.  Basic Requirements
==============================

For the encrypted and signed object formats, 
the necessary protections will be created 
using appropriate cryptographic mechanisms: 
symmetric or asymmetric encryption for **confidentiality**
and MACs or digital signatures for **integrity protection**.  

In both cases, 
it is necessary for the JOSE format 
to support both symmetric and asymmetric operations.

-  The JOSE encrypted object format must support object encryption in
   the case where the sender and receiver share a symmetric key.

-  The JOSE encrypted object format must support object encryption in
   the case where the sender has only a public key for the receiver.

-  The JOSE signed object format must support integrity protection
   using Message Authentication Codes (MACs), for the case where the
   sender and receiver share only a symmetric key.

-  The JOSE signed object format must support integrity protection
   using digital signatures, for the case where the receiver has only
   a public key for the sender.

In some applications, 
the key used to process a JOSE object is indicated by application context, 
instead of directly in the JOSE object.  

    .. note::
        - キーのネゴシエーション。 Joseのオブジェクトに入れるか、
          暗黙に共有するか。

However, 
in order to avoid confusion, 
endpoints that lack the necessary context need to be able to recognize this 
and fail cleanly.  

Other than keys, 
JOSE objects do not support pre-negotiation; 
all cryptographic parameters must be expressed directly in the JOSE object.

    .. note::
        - キー以外のネゴシエーションはJoseオブジェクトに入れる

-  The JOSE signed and encrypted object formats must define the
   process by which an implementation recognizes 
   whether it has the key required to process a given object, 
   whether the key is specified by the object 
   or by some out-of-band mechanism.

-  Each algorithm used for JOSE must define which parameters are
   required to be present in a JOSE object using that algorithm.

In cases where 
two entities are going to be exchanging several JOSE objects, 
it might be helpful to pre-negotiate some parameters 
so that they do not have to be signaled in every JOSE object.  

However, 
so as not to confuse endpoints that do not support pre-negotiation, 
it is useful to signal 
when pre-negotiated parameters are in use in those cases.

-  It should be possible to extend the base JOSE signed and encrypted
   object formats to indicate that pre-negotiated parameters are to
   be used to process the object.  

   This extension should also provide
   a means of indicating of which parameters are to be used.

   .. note::
        - 事前ネゴシエーションの内容を示すパラメータをJose オブジェクト
          に追加するといいよ

The purpose of the key format is 
to provide the recipient with sufficient information 
to use the encoded key to process cryptographic messages.  

Thus it is sometimes necessary 
to include additional parameters along with the bare key.

-   The JOSE key format must enable inclusion of 
    all algorithm parameters necessary to use the encoded key, 
    including an identifier for the algorithm with which 
    the key is used as well as any additional parameters 
    required by the algorithm 
    (e.g., elliptic curve parameters).

(draft06)
