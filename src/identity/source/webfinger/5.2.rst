5.2. The Web Host Metadata "resource" Parameter
--------------------------------------------------------

In addition to the normal processing logic for processing :term:`host metadata` information, 
WebFinger defines the "**resource**" parameter for querying for :term:`host metadata` 
and returning all of the :term:`link relations` from :term:`LRDD` 
and other resource-specific :term:`link templates` in a single query.  
This resource essentially pushes the work to the server 
to form a complete resource descriptor for the specified resource.

WebFinger servers compliant with this specification MUST 
support for the "resource" parameter 
as a means of improving performance and reducing client complexity.  
Note that an RFC 6415-compliant server might not implement the "resource" parameter, 
though the server would respond to queries from the client as described in RFC 6415.  
Thus, 
WebFinger clients MUST check the server response to ensure 
that the "resource" parameter is supported as explained below.

To utilize the host-meta "**resource**" parameter, 
a WebFinger client issues a request to **/.well-known/host-meta** 
or **/.well-known/host-meta.json** as usual, 
but then appends a "resource" parameter as shown in this example:

::

     GET /.well-known/host-meta.json?resource=\
                            acct%3Abob%40example.com HTTP/1.1
     Host: example.com

Note that 
the "\" character shown above is to indicate 
that the line breaks at this point and continues on the next line.  
This was shown only to avoid line wrapping in this document 
and is not a part of the HTTP protocol.

When processing this request, 
the WebFinger server MUST

       *  Return a 404 status code if the URI provided in the resource
          parameter is unknown to the server; and

       *  Set the "Subject" returned in the response to the value of the
          "resource" parameter if the URI provided in the resource
          parameter is known to the server

The WebFinger client can verify support for the "resource" parameter
by checking the value of the **Subject** returned in the response.  
If the **Subject** matches the value of the "**resource**" parameter, 
then the "resource" parameter is supported by the server.

For illustrative purposes, 
the following is an example usage of the "**resource"** parameter 
that aligns with the example in Section 1.1.1 of RFC 6415.  
The WebFinger client would issue this request:

::

     GET /.well-known/host-meta.json?resource=\
                            http%3A%2F%2Fexample.com%2Fxy HTTP/1.1
     Host: example.com

The WebFinger server would reply with this response:

::

     HTTP/1.1 200 OK
     Access-Control-Allow-Origin: *
     Content-Type: application/json; charset=UTF-8

     {
       "subject" : "http://example.com/xy",
       "properties" :
       {
         "http://spec.example.net/color" : "red"
       },
       "links" :
       [
         {
           "rel" : "hub",
           "href" : "http://example.com/hub"
         },
         {
           "rel" : "hub",
           "href" : "http://example.com/another/hub"
         },
         {
           "rel" : "author",
           "href" : "http://example.com/john"
         },
         {
           "rel" : "author",
           "href" : "http://example.com/author?\
                              q=http%3A%2F%2Fexample.com%2Fxy"
         }
       ]
     }

(Internet Draft 06)

