3.1.6.  4th Party Native Applications
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Fourth party native applications involve four parties: 
1) the user, 
2) the native (desktop) application, 
3) the authorization server, and 
4) the client servlet web application. 

The native application uses protected resources from a client servlet 
but it integrates with authentication services from the authorization server directly. 
The native application directs the user to perform authentication at the authorization server 
to obtain access and ID tokens. 
The tokens can then be used to access protected resources at the web servlet client. 
The process of obtaining an ID Token for the native application is very similar to 
that of using the code authorization (web server) flow method. 
However, the target audience of the ID Token is not the native application, 
but that of the client servlet. 
The client needs to indicate the target audience for the ID Token 
by setting the **id_token_audience** parameter in the authorization request 
to that of the identifier of the client servlet.

Block::

                                         +-----------------------------+
    +----------------+                   |                             |
    |                |                   |   Authorization             |
    |   Native App   |                   |      Server                 |
    |                |                   |                             |
    |                |                   |      +--------------------+ |
    |                |>------------------|----->| Authorization      | |
    |                |<------------------|-----<|   Endpoint         | |
    |                |                   |      |                    | |
    |                |                   |      |                    | |
    |                |                   |      +--------------------+ |
    |                |                   |      | Access Token       | |
    |                |>------------------|----->|   Endpoint         | |
    |                |<------------------|-----<|                    | |
    |                |                   |      |                    | |
    |                |                   |      +--------------------+ |
    |                |>------------------|----->| Session Mgmt       | |
    |                |<------------------|-----<|   Endpoints        | |
    |                |                   |      |                    | |
    +----------------+                   |      |                    | |
            ^                            |      |                    | |
            |                            |      +--------------------+ |
            v                            |                             |
    +----------------+                   |                             |
    | Client         |                   +-----------------------------+
    | Servlet        |
    |                |
    +----------------+

When accessing protected resources at the client servlet, 
the native application sends the ID Token as an Auth HTTP header in the request. 
The client servlet can check the validity of the ID Token 
by verifying the cryptographic information 
or by sending the token to the Check Session Endpoint OpenID Connect Messages 1.0 
[:doc:`OpenID.Messages <messages>`].

::

    GET /resource1
    Auth: jwt_header.jwt_part2.jwt_part3
    Host: servlet.example.com
    
    
