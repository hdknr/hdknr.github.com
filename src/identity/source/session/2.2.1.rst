2.2.1.  Refresh Session
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

To refresh an :term:`ID Token` that has expired, 
the :term:`Client` sends a request to the :term:`Refresh Session Endpoint` with an :term:`ID Token`. 

.. note::
    With the help of user agent?

A new :term:`ID Token` is returned.

Request Parameters:


.. glossary::

    id_token
        REQUIRED. 
        A previously issued :term:`ID Token` from an :term:`authorization request`. 
        The :term:`ID Token` MAY be expired. 

    redirect_uri
        REQUIRED. 
        An absolute URI to which the :term:`Authorization Server` will redirect 
        the :term:`User-Agent` to with the new :term:`ID Token`. 

    state
        REQUIRED. 
        An opaque value used by the Client to maintain state between the request and callback. 
        If provided, 
        the :term:`Authorization Server` MUST include this value 
        when redirecting the :term:`User-Agent` back to the :term:`Client`. 
        Clients are strongly advised to use this variable to relate the request and response. 

Response:

The :term:`Authorization Server` returns the following parameters in the :term:`query` of 
the :term:`redirect_uri` URI specified in the request:

.. glossary::

    id_token
        REQUIRED.A new ID Token. 

    state
        REQUIRED. The value of the state parameter in the request. 

In a typical HTTP binding, 
an HTTP 302 is returned to redirect the :term:`User-Agent` to the specified :term:`redirect_uri` 
in the request with a new :term:`ID Token` in the :term:`query fragment`.

The following is a non-normative session refresh request:

Request:

::

    GET /op/refresh_session?id_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiIsImtpZCI6
    ImNsaWVudC5leGFtcGxlLmNvbSJ9.eyJpc3N1ZXIiOiJodHRwOlwvXC9zZXJ2ZXIuZXhhbXBs
    ZS5jb20iLCJjbGllbnRfaWQiOiJjbGllbnQuZXhhbXBsZS5jb20iLCJhdWRpZW5jZSI6ImNsa
    WVudC5leGFtcGxlLmNvbSIsImlkIjoidXNlcl8yMzQyMzQiLCJleHAiOjEzMDM4NTI4ODB9.a
    JwagC6501Da-zK-X8Az9B-Y625aSEfxVuBpFEDjOxQ
    &state=bar&redirect_uri=https%3A%2F%2Fclient.example.com%2Fidtoken_cb
    Host: server.example.com

Response:


::

    HTTP/1.1 302 OK
    Location: http://client.example.com/idtoken_cb#id_token=eyJ0eXAiOiJKV1QiLCJh
    bGciOiJIUzI1NiIsImtpZCI6ImNsaWVudC5leGFtcGxlLmNvbSJ9.eyJpc3N1ZXIiOiJodHRwO
    lwvXC9zZXJ2ZXIuZXhhbXBsZS5jb20iLCJjbGllbnRfaWQiOiJjbGllbnQuZXhhbXBsZS5jb20
    iLCJhdWRpZW5jZSI6ImNsaWVudC5leGFtcGxlLmNvbSIsImlkIjoidXNlcl8yMzQyMzQiLCJle
    HAiOjEzMDM4NTI4ODB9.aJwagC6501Da-zK-X8Az9B-Y625aSEfxVuBpFEDjOxQ&state=bar&
    expires_in=3600

(Draft 05)
