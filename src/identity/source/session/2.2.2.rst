2.2.2.  End Session
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

To end the session, 
the :term:`Client` sends an :term:`ID Token` to the :term:`End Session Endpoint`. 
Upon receiving the request, 
the :term:`authorization server` performs the **logout flow** for the user 
and then redirects the :term:`User-Agent` to the specified :term:`redirect_uri`.

Request Parameters:

.. glossary::

    id_token
        REQUIRED. 
        A previously issued ID Token 

    state
        REQUIRED. 
        An opaque value used by the Client 
        to maintain state between the request and callback. 

        If provided, 
        the Authorization Server MUST include this value 
        when redirecting the User-Agent back to the Client. 
        Clients are strongly advised to use this variable to relate the request and response. 

    redirect_uri
        REQUIRED. 
        An absolute URI to which the Authorization Server will redirect the User-Agent. 

Response:

The :term:`Authorization Server` returns the following parameters 
in the :term:`query` of the :term:`redirect_uri` URI specified in the request:

.. glossary::

    state
        REQUIRED. The value of the state parameter in the request. 

In HTTP binding, 
the response is a HTTP 302 redirect response to the :term:`redirect_uri` specified in the request.

The following is a non-normative session refresh request:

Request:

::

     GET /op/end_session?id_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiIsImtpZCI6
     ImNsaWVudC5leGFtcGxlLmNvbSJ9.eyJpc3N1ZXIiOiJodHRwOlwvXC9zZXJ2ZXIuZXhhbX
     BsZS5jb20iLCJjbGllbnRfaWQiOiJjbGllbnQuZXhhbXBsZS5jb20iLCJhdWRpZW5jZSI6I
     mNsaWVudC5leGFtcGxlLmNvbSIsImlkIjoidXNlcl8yMzQyMzQiLCJleHAiOjEzMDM4NTI4
     ODB9.aJwagC6501Da-zK-X8Az9B-Y625aSEfxVuBpFEDjOxQ
     &state=bar
     &redirect_uri=https%3A%2F%2Fclient.example.com%2Fendtoken_cb
     Host: server.example.com
     ...
        Authorization Server performs logout flow
     ...

Response:

::

    HTTP/1.1 302 OK
    Location: http://client.example.com/endtoken_cb?state=bar

(Draft 05)
