2.1.2.  Normalization Steps
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

A string of any other type is interpreted as a URI in one of the forms scheme "://" authority path-abempty [ "?" query ] [ "#" fragment ] or authority path-abempty [ "?" query ] [ "#" fragment ] or scheme ":" path-rootless per RFC 3986 [RFC3986] and is normalized according to the following rules:

1. If the user input Identifier does not have an RFC 3986 [RFC3986] scheme portion, the string is interpreted as [userinfo "@"] host [":" port] path-abempty [ "?" query ] [ "#" fragment ] per RFC 3986 [RFC3986].
2. If the userinfo component is present and all of the scheme component, path component, query component, and port component are empty, the acct scheme is assumed. In this case, the normalized URI is formed by prefixing acct: to the string as the scheme. Per The 'acct' URI Scheme [I‑D.ietf‑appsawg‑acct‑uri], if there is an at-sign character ('@') in the userinfo component, it needs to be percent-encoded as described in RFC 3986 [RFC3986].
3. For all other inputs without a scheme portion, the https scheme is assumed, and the normalized URI is formed by prefixing https:// to the string as the scheme.
4.When the input contains an explicit scheme such as acct that matches the RFC 3986 scheme ":" path-rootless syntax, no input normalization is performed.
5. If the resulting URI contains a fragment portion, it MUST be stripped off together with the fragment delimiter character "#".

The WebFinger [RFC7033] Resource in this case is the resulting URI, and the WebFinger Host is the authority component.

NOTE: Since the definition of authority in RFC 3986 [RFC3986] is [ userinfo "@" ] host [ ":" port ], it is legal to have a user input identifier like userinfo@host:port, e.g., alice@example.com:8080.


(draft 20 )
