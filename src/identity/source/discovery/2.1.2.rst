2.1.2.  Normalization Steps
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

A string of any other type is interpreted as a URI 
in one of the forms scheme "://" authority path-abempty [ "?" query ] [ "#" fragment ] 
or authority path-abempty [ "?" query ] [ "#" fragment ] 
or scheme ":" path-rootless per :rfc:`3986 `:term:`[RFC3986]` 
and is normalized according to the following rules:


1. If the user input Identifier does not have an :rfc:`3986` :term:`[RFC3986]` **scheme** component, 
   the string is interpreted as [userinfo "@"] host [":" port] path-abempty [ "?" query ] [ "#" fragment ] 
   per RFC 3986 [RFC3986]. 

   .. note::
        - 入力された識別子にスキームが無い場合 

   Examples are example.com, joe@example.com, example.com/joe, and example.com:8080.


2. If the **userinfo** and **host** components are present 
   and all of the scheme, path, query, port, and fragment components are absent, 
   the **acct** scheme is assumed. 

   In this case, 
   the normalized URI is formed by prefixing **acct:** to the string as the scheme. 

   .. note::
       - userinfoとhostだけがある = userinfo@host -> acct スキーム

   Per The ':term:`acct`' URI Scheme :term:`[I‑D.ietf‑appsawg‑acct‑uri]`, 
   if there is an at-sign character ('@') in the userinfo component, 
   it needs to be percent-encoded, 
   as described in RFC 3986 :term:`[RFC3986]`. 
 
   Examples are joe@example.com and Jane.Doe@example.com.

3. For all other inputs without a **scheme** component, the **https** scheme is assumed, 
   and the normalized URI is formed by prefixing **https://** to the string as the scheme. 

   .. note::
        - それ以外で、スキームがない -> https 

   Examples are example.com, example.com/joe, example.com:8080, and joe@example.com:8080.


4. When the input contains an explicit scheme such as **acct** or **https** 
   that matches the RFC 3986 scheme ":" path-rootless syntax, 
   no input normalization is performed. 

   .. note::
        - スキーム (acct:, https:) がある -> 正規化しません

   Examples are https://example.com, https://example.com/joe, https://joe@example.com:8080, and acct:joe@example.com.

5. If the resulting URI contains a fragment component, 
   it MUST be stripped off, 
   together with the fragment delimiter character "#".

   .. note::
        - フラグメントは削除します

The :doc:`WebFinger <webfinger>` :term:`[RFC7033]` Resource in this case is the resulting URI, 
and the WebFinger Host is the authority component.

NOTE: Since the definition of authority in RFC 3986 [RFC3986] is [ userinfo "@" ] host [ ":" port ], 
it is legal to have a user input identifier like userinfo@host:port, e.g., alice@example.com:8080.

( Draft 21 )
