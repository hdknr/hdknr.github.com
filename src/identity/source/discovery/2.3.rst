2.3.  Redirection
----------------------------------------

In cases 
where the :term:`SWD request` is to be handled at a host or location 
other than the one derived from the End-User's Identifier, 
the host will return a JSON object containing the new location. 
(Support for service redirection is a required feature of Simple Web Discovery [:term:`SWD`].)

To enable service level redirection, 
a SWD server MAY return a 200 OK to an HTTPS request with a content type of application/json 
(or whatever other content type has been negotiated) 
that contains a JSON object that contains a member pair whose name is the string "SWD_service_redirect" whose value is a JSON object with a member pair whose name is "location" and whose value is a string that encodes a URI. Optionally the JSON object value of "SWD_service_redirect" MAY also contain a member whose name is "expires" and whose value is a JSON number that encodes an integer.

The "location" member identifies the URI that the caller MUST redirect all SWD requests for that domain to until the "expires" time is met. SWD requests for the redirected domain MUST be constructed by taking the URI returned in the "location" and using it as the base URI to which the SWD form arguments are then added as query parameters. The location URI MUST NOT include a query component.

GET /.well-known/simple-web-discovery?principal=joe%40example.com&service=http%3A%2F%2Fopenid.net%2Fspecs%2Fconnect%2F1.0%2Fissuer HTTP/1.1
Host: example.com

HTTP/1.1 200 OK
Content-Type: application/json

{
 "SWD_service_redirect":
  {
   "location":"https://example.net/swd_server"
  }
}

GET /swd_server?principal=joe%40example.com&service=http%3A%2F%2Fopenid.net%2Fspecs%2Fconnect%2F1.0%2Fissuer HTTP/1.1
Host: example.net

HTTP/1.1 200 OK
Content-Type: application/json

{
 "locations":["https://server.example.com"]
}


