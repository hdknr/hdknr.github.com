2.3.1.2.  Request Parameter Method
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The :term:`Client` prepares an :term:`Authorization Request` 
to the :term:`Authorization Endpoint` using the appropriate HTTP parameters serialization. 
The :term:`Client` SHOULD construct the request using the HTTP "POST" method, but MAY use the HTTP "GET" method.

The :term:`Authorization Request` MUST include the :term:`request` parameter 
defined in the :ref:`Client Prepares an Authorization Request <standard_2_3_1>` section (2.3.1). 
The :term:`Authorization Request` MUST NOT include the :term:`request_uri` parameter.

The :term:`request` parameter is a JWT [:term:`JWT`] encoded :term:`OpenID Request Object` 
which contains the :term:`Authorization Request` 
and also specifies the content of the responses returned from the :term:`UserInfo <UserInfo Endpoint>` 
and :term:`Check ID Endpoints`. 
The JWT object MAY be signed or signed and encrypted via JWS [:term:`JWS`] and JWE [:term:`JWE`] respectively, 
thereby providing authentication, integrity, non-repudiation and/or confidentiality.

All :term:`Authorization Request` parameters that are part of the :term:`Authorization Request` 
excluding the :term:`request`, :term:`request_uri`, , :term:`redirect_uri`, 
:term:`state`, , :term:`client_id` and :term:`nonce` parameters 
MUST also be JSON Serialized into the :term:`OpenID Request Object` with the same values. 
This allows the :term:`Client` to send signed and/or encrypted requests 
to the :term:`Authorization Server` and maintain conformance to OAuth 2.0.

The :term:`client_id` , :term:`redirect_uri`, :term:`state`, , and :term:`nonce` parameters 
MAY also be included in the :term:`OpenID Request Object`.

The following is a non-normative example of an :term:`OpenID Request Object` before JWT encoding. 
Note that the line wraps within the values are for display purpose only:


.. code-block:: javascript

    {
     "response_type": "code%20id_token",
     "client_id": "s6BhdRkqt3",
     "redirect_uri": "https://client.example.com/cb",
     "scope": "openid profile",
     "state": "af0ifjsldkj",
     "nonce": "n-0S6_WzA2Mj",
     "userinfo":
       {
         "claims":
           {
             "name": null,
             "nickname": {"optional": true},
             "email": null,
             "verified": null,
             "picture": {"optional": true}
           }
       },
     "id_token":
       {
         "max_age": 86400,
         "iso29115": "2"
       }
    }

The following is a non-normative example of a JWT [:term:`JWT`] encoded :term:`OpenID Request Object`. 
Note that the line wraps within the values are for display purpose only:

.. code-block:: javascript 

    JWT algorithm = HS256
    HMAC HASH Key = 'aaa'
    
    JSON Encoded Header = "{"alg":"HS256","typ":"JWT"}"
    JSON Encoded Payload = "{"response_type":"code id_token",
        "client_id":"s6BhdRkqt3",
        "redirect_uri":"https://client.example.com/cb",
        "scope":"openid profile",
        "state":"af0ifjsldkj",
        "nonce":"n-0S6_WzA2Mj",
        "userinfo":{"claims":{"name":null,"nickname":{"optional":true},
            "email":null,"verified":null,
            "picture":{"optional":true}}},
        "id_token":{"max_age":86400,"iso29115":"2"}}"
    
    JWT = eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJyZXNwb25zZV90eXBlIjoiY29kZ
        SBpZF90b2tlbiIsImNsaWVudF9pZCI6InM2QmhkUmtxdDMiLCJyZWRpcmVjdF91cmkiO
        iJodHRwczpcL1wvY2xpZW50LmV4YW1wbGUuY29tXC9jYiIsInNjb3BlIjoib3BlbmlkI
        HByb2ZpbGUiLCJzdGF0ZSI6ImFmMGlmanNsZGtqIiwidXNlcmluZm8iOnsiY2xhaW1zI
        jp7Im5hbWUiOm51bGwsIm5pY2tuYW1lIjp7Im9wdGlvbmFsIjp0cnVlfSwiZW1haWwiO
        m51bGwsInZlcmlmaWVkIjpudWxsLCJwaWN0dXJlIjp7Im9wdGlvbmFsIjp0cnVlfX0sI
        mZvcm1hdCI6InNpZ25lZCJ9LCJpZF90b2tlbiI6eyJtYXhfYWdlIjo4NjQwMCwiaXNvM
        jkxMTUiOiIyIn19.2OiqRgrbrHkA1FZ5p_7bc_RSdTbH-wo_Agk-ZRpD3wY
    
The following is a non-normative example of an :term:`Authorization Request` 
with the :term:`OpenID Request Method`. 
Note that the line wraps within the values are for display purpose only:

:: 

    https://server.example.com/authorize?
    response_type=code%02id_token
    &client_id=s6BhdRkqt3
    &redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb
    &scope=openid
    &state=af0ifjsldkj
    &nonce=n-0S6_WzA2Mj
    &request=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJyZXNwb25zZV90eXBlIjoiY2
    9kZSBpZF90b2tlbiIsImNsaWVudF9pZCI6InM2QmhkUmtxdDMiLCJyZWRpcmVjdF91cmkiOi
    JodHRwczpcL1wvY2xpZW50LmV4YW1wbGUuY29tXC9jYiIsInNjb3BlIjoib3BlbmlkIHByb2
    ZpbGUiLCJzdGF0ZSI6ImFmMGlmanNsZGtqIiwidXNlcmluZm8iOnsiY2xhaW1zIjp7Im5hbW
    UiOm51bGwsIm5pY2tuYW1lIjp7Im9wdGlvbmFsIjp0cnVlfSwiZW1haWwiOm51bGwsInZlcm
    lmaWVkIjpudWxsLCJwaWN0dXJlIjp7Im9wdGlvbmFsIjp0cnVlfX0sImZvcm1hdCI6InNpZ2
    5lZCJ9LCJpZF90b2tlbiI6eyJtYXhfYWdlIjo4NjQwMCwiaXNvMjkxMTUiOiIyIn19.2OiqR
    grbrHkA1FZ5p_7bc_RSdTbH-wo_Agk-ZRpD3wY

(draft 07)
