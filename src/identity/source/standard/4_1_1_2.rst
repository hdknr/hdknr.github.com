4.1.1.2.  Request Parameter Method
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The Client prepares an Authorization Request to the Authorization endpoint 
using the appropriate HTTP parameters serialization. 
The request parameters MUST include the request parameter 
defined in the :ref:`Client Prepares an Authorization Request section <standard_4_1_1>`. 
The request parameter is a :doc:`JWT [JWT] <jwt>` encoded :term:`OpenID Request Object` 
which specifies the content and format of the response 
returned from the UserInfo endpoint and ID Token endpoint. 
The JWT object MAY be signed or signed and encrypted via JWS [JWS] and JWE [JWE] respectively, 
thereby providing authentication, integrity, non-repudiation and/or confidentiality.

Request parameters in the OpenID Request Object takes precedence over query parameters.

The following is a non-normative example of an OpenID Request Object. 
Note that the line wraps within the values are for display purpose only:

::

    {
     "response_type": "code id_token",
     "client_id": "s6BhdRkqt3",
     "redirect_uri": "https://client.example.com/cb",
     "scope": "openid profile",
     "state": "af0ifjsldkj",
     "userinfo":
       {
         "claims":
           {
             "name": null,
             "nickname": {"optional": true},
             "email": null,
             "verified": null,
             "picture": {"optional": true},
           },
         "format": "signed"
       }
     "id_token":
       {
         "max_age": 86400,
         "iso29115": "2"
       }
    }

The following is a non-normative example of a JWT [JWT] encoded OpenID Request Object. 
Note that the line wraps within the values are for display purpose only:

::

    JWT algorithm = HS256
    HMAC HASH Key = 'aaa'
    
    JSON Encoded Header = "{"alg":"HS256","typ":"JWT"}"
    JSON Encoded Payload =  "{"response_type":"code id_token","client_id":"s6BhdRkqt3",
                              "redirect_uri":"https:\/\/client.example.com\/cb","scope":"openid profile","state":"af0ifjsldkj",
                              "userinfo":{"claims":{"name":null,"nickname":{"optional":true},"email":null,"verified":null,
                                                    "picture":{"optional":true}},"format":"signed"},
                              "id_token":{"max_age":86400,"iso29115":"2"}}"
    
    JWT =  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJyZXNwb25zZV90eXBlIjoiY29kZSBpZF90b2tlbiIsImNsaWVudF9pZCI6InM2QmhkUmtx
           dDMiLCJyZWRpcmVjdF91cmkiOiJodHRwczpcL1wvY2xpZW50LmV4YW1wbGUuY29tXC9jYiIsInNjb3BlIjoib3BlbmlkIHByb2ZpbGUiLCJzd
           GF0ZSI6ImFmMGlmanNsZGtqIiwidXNlcmluZm8iOnsiY2xhaW1zIjp7Im5hbWUiOm51bGwsIm5pY2tuYW1lIjp7Im9wdGlvbmFsIjp0cnVlfS
           wiZW1haWwiOm51bGwsInZlcmlmaWVkIjpudWxsLCJwaWN0dXJlIjp7Im9wdGlvbmFsIjp0cnVlfX0sImZvcm1hdCI6InNpZ25lZCJ9LCJpZF9
           0b2tlbiI6eyJtYXhfYWdlIjo4NjQwMCwiaXNvMjkxMTUiOiIyIn19.2OiqRgrbrHkA1FZ5p_7bc_RSdTbH-wo_Agk-ZRpD3wY
    

The following is a non-normative example of an Authorization Request URL. Note that the line wraps within the values are for display purpose only:

:: 

    https://server.example.com/authorize?
    response_type=code%02id_token
    &client_id=s6BhdRkqt3
    &redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb
    &scope=openid
    &state=af0ifjsldkj
    &request=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJyZXNwb25zZV90eXBlIjoiY29kZSBpZF90b2tlbiIsImNsaWVudF9pZCI6InM2QmhkUmtx
    dDMiLCJyZWRpcmVjdF91cmkiOiJodHRwczpcL1wvY2xpZW50LmV4YW1wbGUuY29tXC9jYiIsInNjb3BlIjoib3BlbmlkIHByb2ZpbGUiLCJzd
    GF0ZSI6ImFmMGlmanNsZGtqIiwidXNlcmluZm8iOnsiY2xhaW1zIjp7Im5hbWUiOm51bGwsIm5pY2tuYW1lIjp7Im9wdGlvbmFsIjp0cnVlfS
    wiZW1haWwiOm51bGwsInZlcmlmaWVkIjpudWxsLCJwaWN0dXJlIjp7Im9wdGlvbmFsIjp0cnVlfX0sImZvcm1hdCI6InNpZ25lZCJ9LCJpZF9
    0b2tlbiI6eyJtYXhfYWdlIjo4NjQwMCwiaXNvMjkxMTUiOiIyIn19.2OiqRgrbrHkA1FZ5p_7bc_RSdTbH-wo_Agk-ZRpD3wY


.. todo::

    There is a inconsistency between a query parameter and JWT claim ( i.e, scope ). Should we check the consistency ?
   
 
