2. Client Registration Endpoint
========================================

The Client Registration Endpoint is an OAuth 2.0 Endpoint defined in
this document that is designed to allow a Client to register itself
with the Authorization Server.  The Client Registration Endpoint MUST
accept HTTP POST messages with request parameters encoded in the
entity body using the "application/x-www-form-urlencoded" format.
The Client Registration Endpoint MUST be protected by a transport-
layer security mechanism when sending requests to the Registration
Endpoint.  The server MUST support TLS 1.2 RFC 5246 [RFC5246] and/or
TLS 1.0 [RFC2246] and MAY support additional transport-layer
mechanisms meeting its security requirements.  When using TLS, the
Client MUST perform a TLS/SSL server certificate check, per RFC 6125
[RFC6125].

The Endpoint defines three operations that a client can take on it,
switched by the "operation" parameter:

.. glossary::

    client_associate

        generate a new Client Identifier 
        (and optionally a Client Secret) 
        and associate it with the set of presented metadata (:ref:`Section 3 <oauth_reg.3>`)

    client_update
        update the metadata (Section 3) associated with a Client Identifier

    rotate_secret
        issue a new Registration Access Token and, 
        if applicable, 
        a Client Secret for a Client

.. note::
    - Same with :ref:`reg.2.1` 

In order to facilitate registered clients updating their information,
the Client Registration Endpoint issues a request_access_token for
clients to securely identify themselves in future connections.  As
such, the Endpoint MUST accept requests with OAuth 2.0 Bearer Tokens
[OAuth.Bearer] for these operations.

In order to support open registration and facilitate wider
interoperability, the Client Registration Endpoint SHOULD allow
client_associate requests with no further authentication.  These
requests MAY be rate-limited to prevent a denial-of-service attack on
the Client Registration Endpoint.

In addition, the Client Registration Endpoint MAY accept an initial
authorization credential in the form of an OAuth 2.0 [OAuth2.0]
access token in order to limit registration to only previously
authorized parties.  The method by which this access token is
obtained by the registrant is generally out-of-band and is out of
scope of this specification.

These two aspects, operation selection and client authentication, are
represented by two parameters common to all operations:

.. glossary::

    operation  
        REQUIRED.  

        Values are "client_associate" 
        (for new registrations), 
        "rotate_secret" to request rotation of the "client_secret", 
        and "client_update" (for updating parameters of an existing "client_id").

    access_token  
        OPTIONAL.  

        An OAuth2 Bearer token used to access the
        Client Registration Endpoint, as defined in OAuth2 Bearer.  This
        parameter MUST NOT be sent if the Access Token is sent in the HTTP
        Authorization header as described in Section 7.1 of OAuth 2.0
        [OAuth2.0].  Access Tokens sent in the authorization header must
        be OAuth 2.0 Bearer Tokens [OAuth.Bearer].

Each operation takes a different parameter set, and all operations
are described below.

The Client Registration Endpoint MUST ignore all parameters it does
not understand.

(draft 01)
