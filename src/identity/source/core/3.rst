3.  Authentication
====================================

OpenID Connect performs authentication to log 
in the End-User or to determine that the End-User is already logged in. 
OpenID Connect returns the result of the Authentication 
performed by the Server to the Client in a secure manner 
so that the Client can rely on it. 
For this reason, 
the Client is called Relying Party (RP) in this case.

The Authentication result is returned in an ID Token, 
as defined in :ref:`Section 2 <core.2>`. 
It has Claims expressing such information as the Issuer, 
the Subject Identifier, when the authentication expires, etc.

Authentication can follow one of three paths: 
the :term:`Authorization Code Flow` (response_type=code), 
the :term:`Implicit Flow` (response_type=id_token token or response_type=id_token), 
or the :term:`Hybrid Flow` (using other Response Type values 
defined in OAuth 2.0 Multiple Response Type Encoding Practices :term:`[OAuth.Responses]`). 

The flows determine how the ID Token and Access Token are returned to the Client.

The characteristics of the three flows are summarized in the following non-normative table. 
The table is intended to provide some guidance on which flow to choose in particular contexts.


    =================================================== =========================== =============== ==============
    Property                                            Authorization Code Flow     Implicit Flow   Hybrid Flow
    =================================================== =========================== =============== ==============
    All tokens returned from Authorization Endpoint     no                          yes             no
    All tokens returned from Token Endpoint             yes                         no              no
    Tokens not revealed to User Agent                   yes                         no              no
    Client can be authenticated                         yes                         no              yes
    Refresh Token possible                              yes                         no              yes
    Communication in one round trip                     no                          yes             no
    Most communication server-to-server                 yes                         no              varies
    =================================================== =========================== =============== ==============


The flow used is determined by the :term:`response_type` value 
contained in the Authorization Request. 

These response_type values select these flows:

    ======================= ========================
    "response_type" value   Flow
    ======================= ========================
    code                    Authorization Code Flow
    id_token                Implicit Flow
    id_token token          Implicit Flow
    code id_token           Hybrid Flow
    code token              Hybrid Flow
    code id_token token     Hybrid Flow
    ======================= ========================
    

All but the **code** Response Type value, 
which is defined by :doc:`OAuth 2.0 <oauth>` :term:`[RFC6749]`, 
are defined in the OAuth 2.0 Multiple Response Type Encoding Practices :term:`[OAuth.Responses]` 
specification. 

NOTE: 

    While OAuth 2.0 also defines the **token** Response Type value for the Implicit Flow, 
    OpenID Connect does not use this Response Type, 
    since no ID Token would be returned.

    .. note::
        response_type=token の暗黙フローはConnectでは使えない。

(draft 17)
