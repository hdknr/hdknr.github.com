5.5.  Requesting Claims using the "claims" Request Parameter
--------------------------------------------------------------------------------

OpenID Connect defines the following Authorization Request parameter 
to enable requesting individual Claims 
and specifying parameters that apply to the requested Claims:

.. glossay::

    claims
        OPTIONAL. 

        This parameter is used to request that 
        specific Claims be returned. 

        The value is a JSON object listing the requested Claims.

The claims Authentication Request parameter requests that 
specific Claims be returned from the UserInfo Endpoint and/or in the ID Token. 
It is represented as a JSON object containing lists 
of Claims being requested from these locations. 
Properties of the Claims being requested MAY also be specified.

Support for the claims parameter is OPTIONAL. 
Should an OP not support this parameter and an RP uses it, 
the OP SHOULD return a set of Claims to the RP that 
it believes would be useful to the RP and the End-User 
using whatever heuristics it believes are appropriate. 
The :term:`claims_parameter_supported` Discovery result 
indicates whether the OP supports this parameter.

The claims parameter value is represented in an OAuth 2.0 request 
as UTF-8 encoded JSON 
(which ends up being form-urlencoded when passed as an OAuth parameter). 
When used in a Request Object value, per Section 6.1, 
the JSON is used as the value of the claims member.

The top-level members of the Claims request JSON object are:

.. glossary::

    userinfo
        OPTIONAL. 

        Requests that the listed individual Claims be returned 
        from the UserInfo Endpoint. 

        If present, 
        the listed Claims are being requested to be added to any Claims 
        that are being requested using scope values. 

        If not present, 
        the Claims being requested from the UserInfo Endpoint are 
        only those requested using scope values.

        When the userinfo member is used, 
        the request MUST also use a :term:`response_type` value 
        that results in an Access Token being issued 
        to the Client for use at the UserInfo Endpoint.

    id_token
        OPTIONAL. 

        Requests that the listed individual Claims be returned 
        in the ID Token. 

        If present, 
        the listed Claims are being requested to be added 
        to the default Claims in the ID Token. 

        If not present, 
        the default ID Token Claims are requested, 
        as per the ID Token definition in Section 2 
        and per the additional per-flow ID Token requirements 
        in Sections 3.1.3.6, 3.2.2.10, 3.3.2.11, and 3.3.3.6.

Other members MAY be present. Any members used that are not understood MUST be ignored.

An example Claims request is as follows:

.. code-block:: javascript

  {
   "userinfo":
    {
     "given_name": {"essential": true},
     "nickname": null,
     "email": {"essential": true},
     "email_verified": {"essential": true},
     "picture": null,
     "http://example.info/claims/groups": null
    },
   "id_token":
    {
     "auth_time": {"essential": true},
     "acr": {"values": ["urn:mace:incommon:iap:silver"] }
    }
  }

Note that a Claim that is not in the standard set defined in Section 5.1, 
the (example) http://example.info/claims/groups Claim, is being requested. 
Using the claims parameter is the only way to request Claims outside the standard set. 
It is also the only way to request specific combinations 
of the standard Claims that cannot be specified using scope values. 

(draft17)
