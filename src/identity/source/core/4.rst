4.  Initiating Login from a Third Party
==========================================

.. note::
    - OP起点でOpenID Connectが始まることもある
    - 場合によっては3rdパーティ起点

In some cases, 
the login flow is initiated by an OpenID Provider or another party, 
rather than the Relying Party. 

In this case, 
the initiator redirects to the RP at its login initiation endpoint, 
which requests that the RP send an Authentication Request to a specified OP. 
This login initiation endpoint can be a deep link at the RP, 
rather than a default landing page. 

RPs supporting OpenID Connect Dynamic Client Registration 1.0 [OpenID.Registration] 
register this endpoint value using the :term:`initiate_login_uri` Registration parameter.

The party initiating the login request does so 
by redirecting to the login initiation endpoint at the RP, 
passing the following parameters:

.. glossary::

    iss
        REQUIRED. 
    
        Issuer Identifier for the OP that the RP is to send the Authentication Request to. 

        Its value MUST be a URL using the https scheme.

    login_hint
        OPTIONAL. 

        Hint to the Authorization Server 
        about the login identifier the End-User might use to log in. 

        If the client receives a value for this string-valued parameter, 
        it MUST include it in the Authentication Request 
        as the :term:`login_hint` parameter value.

    target_link_uri
        OPTIONAL. 

        URL that the RP is requested to redirect to after authentication. 

        RPs MUST verify the value of the :term:`target_link_uri` 
        to prevent being used as an open redirector to external sites.

The parameters can either be passed as :term:`query` parameters 
using the HTTP GET method or be passed as :term:`HTML form` values 
that are auto-submitted in the User Agent, 
and thus are transmitted via the HTTP POST method.

.. note::
    - Code フロー
    - CSRF 対策は？

Other parameters MAY be sent, if defined by extensions. 
Any parameters used that are not understood MUST be ignored by the Client.

Clients SHOULD employ frame busting and other techniques to prevent End-Users 
from being logged in by third party sites 
without their knowledge through attacks such as Clickjacking. 

Refer to Section 4.4.1.9 of :ref:`[RFC6819]` for more details.


(draft17)
