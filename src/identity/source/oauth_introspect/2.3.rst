2.3. Non-normative Example


For example, 
a Protected Resource accepts a request from a Client
carrying an OAuth2 Bearer Token.  In order to know how and whether to
serve the request, the Protected Resource then makes the following
request to the Introspection Endpoint of the Authorization Server.
The Protected Resource is here authenticating with its own Client ID
and Client Secret as per OAuth2 [RFC6749] Section 2.3.1.

Following is a non-normative example request (with line wraps for
display purposes only):

::

   POST /register HTTP/1.1
   Accept: application/x-www-form-urlencoded
   Host: server.example.com
   Authorization: Basic czZCaGRSa3F0Mzo3RmpmcDBaQnIxS3REUmJuZlZkbUl3

   token=X3241Affw.4233-99JXJ

The Authorization Server validates the client credentials and looks
up the information in the token.  If the token is valid, it returns
the following JSON document.

Following is a non-normative example valid token response (with line
wraps for display purposes only):

::

   HTTP/1.1 200 OK
   Content-Type: application/json
   Cache-Control: no-store

   {
    "valid": true,
    "client_id":"s6BhdRkqt3",
    "scope": ["read", "write", "dolphin"],
    "subject": "2309fj32kl",
    "audience": "http://example.org/protected-resource/*"
   }


If the token presented is not valid (but the authentication presented
is valid), it returns the following JSON document.

Following is a non-normative example invalid response (with line
wraps for display purposes only):

::

   HTTP/1.1 200 OK
   Content-Type: application/json
   Cache-Control: no-store

   {
    "valid": false
   }

If the client credentials are invalid or there is another error, the
Authorization Server responds with the appropriate error response
from the OAuth2 Core.

( http://tools.ietf.org/html/draft-richer-oauth-introspection-01#section-2.3 )
