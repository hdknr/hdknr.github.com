:orphan:

2.3. Resource Set Registration API
---------------------------------------


The resource server uses the RESTful API at the authorization server's 
:term:`resource set registration endpoint` 
to create, read, update, and delete :term:`resource set descriptions`, 
along with listing groups of such descriptions.  
The :term:`resource server` is free to use its own methods of 
identifying and describing :term:`resource sets`.

(Note carefully the similar but distinct senses in which the word
"resource" is used in this section.  The resource set descriptions
are themselves managed as web resources at the authorization server
through this API.)

The authorization server MUST present an API 
for registering :term:`resource set descriptions` at a set of URIs 
with the structure "{rsreguri}/resource_set/{rsid}", 
where the PAT provides sufficient context to distinguish 
between identical resource set identifiers assigned by different hosts.

.. warning::
    - PAT (Protection API Token) は定義されていない。
    - RAT (Resource Set Registration API Token)なんじゃないの？

The components of these URIs are defined as follows:

.. glossary::

   {rsreguri}  

      The authorization server's resource set registration
      endpoint as advertised in its configuration data 
      (see :ref:`Section 1.3 <oauth_res_reg>`).

   {rsid}  
    
      An identifier for a resource set description.

Without a specific resource set identifier path component, 
the URI applies to the set of resource set descriptions already registered.

Following is a summary of the five registration operations the
authorization server is REQUIRED to support.  
Each is defined in its own section below.  
All other methods are unsupported.  

This API uses :term:`ETag` and :term:`If-Match` 
to ensure the desired resource at the :term:`authorization server` is targeted.

   -  Create resource set description: PUT /resource_set/{rsid}

   -  Read resource set description: GET /resource_set/{rsid}

   -  Update resource set description: PUT /resource_set/{rsid} with If-Match

   -  Delete resource set description: DELETE /resource_set/{rsid}

   -  List resource set descriptions: GET /resource_set/ with If-Match

If the request to the resource set registration endpoint is incorrect, 
then the authorization server responds with an error message 
by including one of the following error codes with the response:

.. glossary::

   unsupported_method_type  
      The resource server request used an
      unsupported HTTP method.  The authorization server MUST respond
      with the HTTP 405 (Method Not Allowed) status code and MUST fail
      to act on the request.

   not_found  
      The resource set requested from the authorization server
      cannot be found.  The authorization server MUST respond with HTTP
      404 (Not Found) status code.

   precondition_failed  
      The resource set that was requested to be
      deleted or updated at the authorization server did not match the
      If-Match value present in the request.  The authorization server
      MUST respond with HTTP 412 (Precondition Failed) status code and
      MUST fail to act on the request.

( draft 00 ,http://tools.ietf.org/html/draft-hardjono-oauth-resource-reg-00#section-2.3 )
