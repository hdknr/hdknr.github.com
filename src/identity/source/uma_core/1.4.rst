1.4.  Authorization Server Configuration Data
----------------------------------------------------------------

.. note::
    - openid-configurationみたいなもの

The authorization server MUST provide configuration data 
in a JSON [RFC4627] document 
that resides in an **/uma-configuration** directory 
at at its :term:`hostmeta` :term:`[hostmeta]` location.  

The configuration data documents conformance options 
and endpoints supported by the authorization server.  

(At the appropriate time, this section will instead profile 
whatever self-describing metadata specification OAuth adopts, 
for example, :term:`[OAuth-linktypes]` or :term:`[OAuth-meta]`.)

The configuration data has the following properties.


.. glossary::

    version
          REQUIRED.  The version of the UMA core protocol to which this
          authorization server conforms.  The value MUST be the string
          "1.0".
    
    issuer
          REQUIRED.  A URI indicating the party operating the
          authorization server.
    
    pat_profiles_supported
          REQUIRED.  OAuth access token profiles supported by this
          authorization server for PAT issuance.  The property value is
          an array of string values, where each string value is either a
          reserved keyword defined in this specification or a URI
          identifying an access token profile defined elsewhere.  The
          reserved keyword "bearer" as a value for this property stands
          for the OAuth bearer token profile [OAuth-bearer].  The
          authorization server is REQUIRED to support this profile, and
          to supply this string value explicitly.  The authorization
          server MAY declare its support for additional access token
          profiles for PATs.
    
    aat_profiles_supported
          REQUIRED.  OAuth access token profiles supported by this
          authorization server for AAT issuance.  The property value is
          an array of string values, where each string value is either a
          reserved keyword defined in this specification or a URI
          identifying an access token profile defined elsewhere.  The
          reserved keyword "bearer" as a value for this property stands
          for the OAuth bearer token profile [OAuth-bearer].  The
          authorization server is REQUIRED to support this profile, and
          to supply this string value explicitly.  The authorization
          server MAY declare its support for additional access token
          profiles for AATs.
    
    rpt_profiles_supported
          REQUIRED.  UMA RPT profiles supported by this authorization
          server for RPT issuance.  The property value is an array of
          string values, where each string value is either a reserved
          keyword defined in this specification or a URI identifying an
          RPT profile defined elsewhere.  The reserved keyword "bearer"
          as a value for this property stands for the UMA bearer RPT
          profile defined in [OAuth-bearer].  The authorization server is
          REQUIRED to support this profile, and to supply this string
          value explicitly.  The authorization server MAY declare its
          support for additional RPT profiles.
    
    pat_grant_types_supported
          REQUIRED.  OAuth grant types supported by this authorization
          server in issuing PATs.  The property value is an array of
          string values.  Each string value MUST be one of the grant_type
          values defined in [OAuth2], or alternatively a URI identifying
          a grant type defined elsewhere.
    
    aat_grant_types_supported
          REQUIRED.  OAuth grant types supported by this authorization
          server in issuing AATs.  The property value is an array of
          string values.  Each string value MUST be one of the grant_type
          values defined in [OAuth2], or alternatively a URI identifying
          a grant type defined elsewhere.
    
    claim_profiles_supported
          OPTIONAL.  Claim formats and associated sub-protocols for
          gathering claims from requesting parties, as supported by this
          authorization server.  The property value is an array of string
          values, which each string value is either a reserved keyword
          defined in this specification or a URI identifying a claim
          profile defined elsewhere.
    
    uma_profiles_supported
          OPTIONAL.  UMA profiles supported by this authorization server.
          The property value is an array of string values, which each
          string value is either a reserved keyword defined in this
          specification or a URI identifying an UMA profile defined
          elsewhere.  The reserved keywords "prot-ext", "authz-ext", and
          "rsrc-ext" as values for this property stand for the
          extensibility profiles defined, respectively, in Section 5.
    
    dynamic_client_endpoint
          OPTIONAL.  The endpoint to use for performing dynamic client
          registration.  Usage of this endpoint is defined by
          [DynClientReg].  The presence of this property indicates
          authorization server support for the dynamic client
          registration feature and its absence indicates a lack of
          support.
    
    token_endpoint
          REQUIRED.  The endpoint URI at which the resource server or
          client asks the authorization server for a PAT or AAT,
          respectively.  A requested scope of "http://
          docs.kantarainitiative.org/uma/scopes/prot.json" results in a
          PAT.  A requested scope of "http://docs.kantarainitiative.org/
          uma/scopes/authz.json" results in an AAT.  Usage of this
          endpoint is defined by [OAuth2].
    
    user_endpoint
          REQUIRED.  The endpoint URI at which the resource server
          gathers the consent of the end-user resource owner or the
          client gathers the consent of the end-user requesting party, if
          the "authorization_code" grant type is used.  Usage of this
          endpoint is defined by [OAuth2].
    
    introspection_endpoint
          REQUIRED.  The endpoint URI at which the resource server
          introspects an RPT presented to it by a client.  Usage of this
          endpoint is defined by [OAuth-introspection] and Section 3.3.1.
          A valid PAT MUST accompany requests to this protected endpoint.
    
    resource_set_registration_endpoint
          REQUIRED.  The endpoint URI at which the resource server
          registers resource sets to put them under authorization manager
          protection.  Usage of this endpoint is defined by
          [OAuth-resource-reg] and Section 2.  A valid PAT MUST accompany
          requests to this protected endpoint.
    
    permission_registration_endpoint
          REQUIRED.  The endpoint URI at which the resource server
          registers a client-requested permission with the authorization
          server.  Usage of this endpoint is defined by Section 3.2.  A
          valid PAT MUST accompany requests to this protected endpoint.
    
    rpt_endpoint
          REQUIRED.  The endpoint URI at which the client asks the
          authorization server for an RPT.  Usage of this endpoint is
          defined by Section 3.4.1.  A valid AAT MUST accompany requests
          to this protected endpoint.
    
    authorization_request_endpoint
          REQUIRED.  The endpoint URI at which the client asks to have
          authorization data associated with its RPT.  Usage of this
          endpoint is defined in Section 3.4.2.  A valid AAT MUST
          accompany requests to this protected endpoint.

Example of authorization server configuration data 
that resides at https://example.com/.well-known/uma-configuration 
(note the use of https: for endpoints throughout):

.. code-block:: javascript

       {
       "version":"1.0",
       "issuer":"https://example.com",
       "pat_profiles_supported":["bearer"],
       "aat_profiles_supported":["bearer"],
       "rpt_profiles_supported":["bearer"],
       "pat_grant_types_supported":["authorization_code"],
       "aat_grant_types_supported":["authorization_code"],
       "claim_profiles_supported":["openid"],
       "dynamic_client_endpoint":"https://as.example.com/dyn_client_reg_uri",
       "token_endpoint":"https://as.example.com/token_uri",
       "user_endpoint":"https://as.example.com/user_uri",
       "resource_set_registration_endpoint":"https://as.example.com/rs/rsrc_uri",
       "introspection_endpoint":"https://as.example.com/rs/status_uri",
       "permission_registration_endpoint":"https://as.example.com/rs/perm_uri",
       "rpt_endpoint":"https://as.example.com/client/rpt_uri",
       "authorization_request_endpoint":"https://as.example.com/client/perm_uri"
       }

Authorization server configuration data MAY contain 
extension properties that are not defined in this specification.  

Extension names that are unprotected from collisions are 
outside the scope of this specification.


(draft09)
