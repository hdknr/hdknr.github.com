1.5.  AM Configuration Data
------------------------------------


The AM MUST provide configuration data to other entities it interacts
with in aJSON [RFC4627] document that resides in an /uma-
configuration directory at at its hostmeta [RFC6415] location.  The
configuration data documents major conformance options supported by
the AM (described further in Section 7) and protection and
authorization API endpoints (as described in :term:`Section 1.3`).

The configuration data has the following properties and a Content-Type 
of **application/uma-configuration+json**.  
All endpoint URIs supplied SHOULD require the use of a transport-layer security mechanism such as TLS.

.. glossary::

   version
         REQUIRED.  The version of the UMA core protocol to which this
         AM conforms.  The value MUST be the string "1.0".

   issuer
         REQUIRED.  A URI indicating the party operating the AM.

   dynamic_client_registration_supported
         OPTIONAL.  Whether dynamic client registration, such as through
         [OCDynClientReg], is supported for both hosts and requesters.
         The value, if this property is present, the value MUST be the
         string "yes" (dynamic registration is supported, using an
         unspecified method) or "no" (it is not supported; hosts and
         requesters are required to pre-register).  The default is AM-
         specific.  This property is not currently extensible.  (This
         conformance option is largely a placeholder for now.)

   token_types_supported
         REQUIRED.  

         Access token types produced by this AM.  

         The property value is an **array** of string values.  
         Currently the only string value for this property defined by this specification is ":term:`artifact`", 
         meaning an **opaque token string** whose associations 
         the :term:`host` MUST determine through a token status interaction with the :term:`AM` 
         (see :ref:`Section 3.3 <uma_core.3.3>`).  

         The AM is REQUIRED to support the **artifact** token type, 
         and to supply this string value explicitly.  
         The AM MAY declare its support for
         additional access token types by assigning each one a unique
         absolute URI in a string value in the array.

   host_grant_types_supported
         REQUIRED.  OAuth grant types supported by this AM.  The
         property value is an array of string values.  Each string value
         MUST be one of the grant_type values defined in [OAuth2], or
         alternatively an extension grant type indicated by a unique
         absolute URI.  The AM is REQUIRED to support the
         "authorization_code" and "client_credentials" grant types, and
         to supply these values explicitly.  The authorization_code
         grant type is primarily intended for use with hosts, and the
         client_credentials grant type is primarily intended for use
         with requesters.


   claim_types_supported
         OPTIONAL.  Claim formats and associated sub-protocols for
         gathering claims from requesting parties, as supported by this
         AM.  The property value is an array of string values.
         Currently the only string value for this property defined by
         this specification is "openid", for which details are supplied
         in Section 3.6.1.1.  The AM MAY declare its support for
         additional claim types by assigning each one a unique absolute
         URI in a string value in the array.

   host_token_endpoint
         REQUIRED.  The property value is a string conveying the host
         access token endpoint URI, at which the host asks for a host
         access token.  Available HTTP methods are as defined by
         [OAuth2] for a token endpoint.

   host_user_endpoint
         REQUIRED.  The property value is a string conveying the host
         user authorization endpoint URI, at which the host gathers the
         consent of the authorizing user for a host-AM relationship if
         it is using the "authorization_code" grant type.  Available
         HTTP methods are as defined by [OAuth2] for an end-user
         authorization endpoint.

   resource_set_registration_endpoint
         REQUIRED.  The property value is a string conveying the
         resource set registration endpoint URI, at which the host
         registers resource sets with the AM to put them under its
         protection (see :ref:`Section 2.4.3 <uma_core.2.4.3>`).  
         Requests to this endpoint
         require a host access token to be present.

   token_status_endpoint
         REQUIRED.  The property value is a string conveying the token
         status endpoint URI, at which the host requests the status of
         access tokens presented to them by requesters (see
         Section 3.3).  Requests to this endpoint require a host access
         token to be present.

   permission_registration_endpoint
         REQUIRED.  The property value is a string conveying the
         permission registration endpoint URI, at which the host
         registers permissions with the AM for which a requester will be
         seeking authorization (see Section 3.4).  Requests to this
         endpoint require a host access token to be present.

   requester_token_endpoint
         REQUIRED.  The property value is a string conveying the
         requester access token endpoint URI, at which the requester
         asks for an access token.  Available HTTP methods are as
         defined by [OAuth2] for a token issuance endpoint.

   permission_request_endpoint
         REQUIRED.  The property value is a string conveying the
         permission endpoint URI, at which the requester asks for
         authorization to have a new permission associated with its
         existing requester access token, which MUST accompany the
         request (see Section 3.5).

The following is an example of AM configuration data that resides at
https://example.com/.well-known/uma-configuration:

Example of AM configuration data that resides at
https://example.com/.well-known/uma-configuration:

.. code-block:: javascript

    {
    "version":"1.0",
    "issuer":"https://example.com",
    "dynamic_client_registration_supported":"yes",
    "token_types_supported":[
      "artifact"
    ],
    "host_grant_types_supported":[
      "authorization_code",
      "client_credentials"
    ],
    "claim_types_supported":[
      "openid"
    ],
    "host_token_endpoint":"https://am.example.com/host/token_uri",
    "host_user_endpoint":"https://am.example.com/host/user_uri",
    "resource_set_registration_endpoint":"https://am.example.com/host/rsrc_uri",
    "token_status_endpoint":"https://am.example.com/host/status_uri",
    "permission_registration_endpoint":"https://am.example.com/host/perm_uri",
    "requester_token_endpoint":"https://am.example.com/requester/token_uri",
    "permission_request_endpoint":"https://am.example.com/requester/perm_uri"
    }

AM configuration data MAY contain extension properties that are not
defined in this specification.  The names of extension properties
MUST consist of a fully qualified URL, or begin with "x-" or "X-".


(03)
