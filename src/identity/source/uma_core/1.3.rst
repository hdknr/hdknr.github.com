1.3.  Endpoints, Endpoint Protection, and Tokens
---------------------------------------------------------------

Various :term:`UMA` entities present APIs for other UMA entities to use.
These APIs are as follows:

-   The :term:`AM` presents a :term:`protection API` to the :term:`host`, 
    as standardized by this specification.  
    This API is :term:`OAuth-protected`, 
    requiring a host :term:`access token` (issued by the :term:`AM`) 
    for successful access (see :ref:`Section 2.3 <uma_core.2.3>` for this issuance process).

-   The :term:`AM` presents an :term:`authorization API` to the requester, 
    as standardized by this specification.  
    This API is :term:`OAuth-protected`, 
    requiring a :term:`requester` :term:`access token` (issued by the :term:`AM`) 
    for successful access (see :ref:`Section 3.2 <uma_core.3.2>` for this issuance process).

-   The :term:`host` presents a :term:`protected resource` to the :term:`requester`, 
    which can be considered -- and may in fact be -- 
    an application-specific or proprietary API.  
    This API is :term:`UMA-protected`, requiring a :term:`requester access token` (issued by the AM) 
    and sufficient permissions (also issued by the AM) for successful access 
    (see :ref:`Section 3.5 <uma_core.3.5>` for this latter issuance process).

.. note::

    - These are the "Protection API" endpoint set.

The AM presents standard OAuth endpoints for token issuance 
and user authorization in protecting its own UMA APIs, as follows.  

Hosts asking to use the protection API would be issued a PAT.  
Requesters asking to use the authorization API would be issued an AAT.

.. glossary::

    token endpoint  

        Part of standard OAuth, as profiled by UMA.  
        The endpoint at which the host asks for a PAT and the requester
        asks for an AAT.  
        (The AM may also choose to issue a :term:`refresh token`.)  

        This specification makes the OAuth token profile "bearer" mandatory for the AM to implement.  
        The AM can declare its ability to handle other token profiles.


    user authorization endpoint  

        Part of standard OAuth, as profiled by UMA.  
        The endpoint to which the host or requester redirects an authorizing user 
        or end-user requesting party, respectively, 
        to authorize it to use this AM in resource protection or authorization, 
        if the OAuth authorization code grant type 
        (mandatory for the AM to implement) is being used.

.. note::

        - Bearer Token (MTI,Mandatory To Implement)
        - Code Flow (MTI)
        - Refresh Token (Optional) 

The AM presents the following endpoints to the host as part of its protection API; 
these endpoints are OAuth-protected and require a PAT for access, 
for which the "http://docs.kantarainitiative.org/uma/scopes/prot.json" OAuth scope is required:

.. glossary::


   resource set registration endpoint  

         The endpoint at which the host
         registers resource sets it wants the AM to protect.  The
         operations available at this endpoint constitute a resource set
         registration API that is a subset of the protection API (see Section 2.4.3).

    permission registration endpoint  
         The endpoint at which the host
         registers permissions that it anticipates a requester will
         shortly be asking for from the AM.

    RPT status endpoint  

         The endpoint at which the host submits
         (forwards) an RPT that has accompanied an access request, to
         learn what currently valid permissions are associated with it.
         This specification defines an UMA token profile, "bearer",
         which is mandatory for the AM to implement and which, if used,
         REQUIRES the host to use this endpoint (see Section 3.3).   


The AM presents the following endpoints to the requester as part of its authorization API; 
these endpoints are OAuth-protected and requires an AAT for access, 
for which the "http://docs.kantarainitiative.org/uma/scopes/authorization" OAuth scope is required:

.. glossary::

    RPT endpoint  

         The endpoint at which the requester asks the AM for the
         issuance of an RPT relating to this requesting party, host, and AM.

    permission request endpoint  

         The endpoint at which the requester asks
         for authorization to have permissions associated with an RPT.


Similarly to OAuth authorization servers, an UMA AM has the
opportunity to manage the validity periods of the access tokens, the
corresponding refresh tokens (in the case of the PAT and AAT), and
even the client credentials that it issues.  Different lifetime
strategies may be suitable for different resources and scopes of
access, and the AM has the opportunity to give the authorizing user
control through policy.  These options are all outside the scope of
this specification.

(05)
