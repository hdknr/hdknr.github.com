6.3.  Client acting on behalf of a user
--------------------------------------------

.. note::

    I'm not quite sure what use case is taken accounted into....

When a :term:`client` is accessing resources on behalf of a user, 
it SHOULD be treated as using an assertion as an :term:`Authorization Grant` 
according to :ref:`section 4.2 <oauth_assertion.4.2>`.  
The following format and processing rules SHOULD be applied:

   -  The :term:`client_id` HTTP parameter MUST identify the :term:`client` 
      to the :term:`authorization server`.

   -  The :term:`grant_type` HTTP request parameter MUST indicate the assertion format.

   -  The :term:`assertion` HTTP parameter MUST contain the serialized assertion
      as in a format indicated by the :term:`grant_type` parameter.

   -  The :term:`Issuer` of the assertion MUST identify the entity that issued the assertion 
      as recognized by the :term:`Authorization Server`.  
      If the assertion is self-asserted, the :term:`Issuer` SHOULD be the :term:`client_id`.
      If the assertion was issued by a :term:`STS`, 
      the :term:`Issuer` SHOULD identify the :term:`STS` as recognized by the :term:`Authorization Server`.

   -  The :term:`Principal` MUST identify an authorized accessor for whom 
      the :term:`access token` is being requested 
      (typically the :term:`resource owner`, or an authorized delegate).

   -  The :term:`Audience` of the assertion MUST identify the :term:`Authorization Server`
      and MAY be the URL of the :term:`Token Endpoint`.

   -  The :term:`Authorization Server` MUST validate the assertion 
      in order to establish a mapping between the :term:`Issuer` and the secret used to
      generate the assertion.

The following non-normative example demonstrates the use of a client
authenticating using an assertion during an :term:`Authorization Code Access Token Request` 
as defined in :ref:`Section 4.1.3 of OAuth 2.0 [I-D.ietf.oauth-v2] <oauth_4_1_3>`.
(line breaks are for display purposes only):

::

   POST /token HTTP/1.1
   Host: server.example.com
   Content-Type: application/x-www-form-urlencoded

   client_id=s6BhdRkqt3&
   grant_type=urn%3Aoasis%3Anames%sAtc%3ASAML%3A2.0%3Aassertion&
   assertion=PHNhbWxwOl...[omitted for brevity]...ZT4%3D


