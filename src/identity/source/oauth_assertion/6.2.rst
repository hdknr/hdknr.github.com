6.2.  Client acting on behalf of itself
---------------------------------------------------

When a :term:`client` is accessing resources on behalf of itself, 
it SHOULD do so in a manner analogous to the Client Credentials flow 
defined in :ref:`Section 4.4 of OAuth 2.0 [I-D.ietf.oauth-v2] <oauth_4_4>`.  
This is a special case that combines 
both the authentication and :term:`authorization grant` usage patterns.  
In this case, 
the interactions with the :term:`authorization server` SHOULD be treated 
as using an assertion for Client Authentication according to :ref:`section 4.1 <oauth_assertion.4.1>`, 
with the addition of a :term:`grant_type` parameter.  

The following format and processing rules SHOULD be applied.

   -  The :term:`client_id` HTTP parameter SHOULD identify the client to the
      :term:`authorization server`.

   -  The :term:`grant_type` HTTP request parameter MUST be
      ":term:`client_credentials`".

   -  The :term:`client_assertion_type` HTTP parameter MUST identify the assertion format.

   -  The :term:`client_assertion` HTTP parameter MUST contain the serialized assertion 
      as in a format indicated by the :term:`client_assertion_type` parameter.

   -  The :term:`Issuer` of the assertion MUST identify the entity that issued the assertion 
      as recognized by the :term:`Authorization Server`.  
      If the assertion is self-asserted, the :term:`Issuer` SHOULD be the :term:`client_id`.
      If the assertion was issued by a :term:`Security Token Service`, 
      the :term:`Issuer` SHOULD identify the :term:`STS` as recognized by the :term:`Authorization Server`.

   -  The :term:`Principal` SHOULD be the :term:`client_id`.

   -  The :term:`Audience` of the assertion MUST identify the :term:`Authorization Server` 
      and SHOULD be the URL of the :term:`Token Endpoint`.

   -  The :term:`Authorization Server` MUST validate the assertion in order to
      establish a mapping between the :term:`Issuer` and the secret used to generate the assertion.

The following non-normative example demonstrates the use of a sample assertion 
being used for a :term:`Client Credentials Access Token Request` 
as defined in :ref:`Section 4.4.2 of OAuth 2.0 [I-D.ietf.oauth-v2] <oauth_4_4_2>`. 
(line breaks are for display purposes only):

::

    POST /token HTTP/1.1
    Host: server.example.com
    Content-Type: application/x-www-form-urlencoded
    
    client_id=s6BhdRkqt3&
    grant_type=client_credentials&
    client_assertion_type=urn%3Aoasis%3Anames%sAtc%3ASAML%3A2.0%3Aassertion&
    client_assertion=PHNhbWxwOl...[omitted for brevity]...ZT4%3D
    
