3.1.1.  ID Token
^^^^^^^^^^^^^^^^^^^^

.. note::
   `Issue 183 <https://bitbucket.org/openid/connect/issue/183>`_ .
   The section detailing the ID Token should make it clear whether the ID Token is a kind of Assertion or not. (This has implications on how this entity relates to other terms that are defined in relation to Assertions.)

The :term:`ID Token` is a token that contains claims pertinent to the **authentication event**. 
The default format of an ID Token is a :doc:`JWT <jwt>` which contains JSON claims. 
:term:`Authorization servers` MAY return ID Tokens in a different format. 
Clients can discover the ID Token format used by authorization servers 
via :doc:`OpenID Connect Discovery [OpenID.Discovery] <discovery>` 
or by possessing prior knowledge of the authorization server.

The ID Token is used to manage the **authentication event** 
and **user identifier**
and is scoped to a particular client via the **audience** and **nonce** claims. 
It MUST NOT be used as an access token to access :doc:`OAuth 2.0 <oauth>` protected resources.

The ID Token MUST attests minimally to the following claims:

.. glossary::

    iss
        REQUIRED. 
        The unique identifier of the issuer of the response. [#]_ 

    user_id
        REQUIRED. 
        A locally unique and never reassigned identifier for the user, 
        which is intended to be consumed by the Client. e.g. 24400320 
        or AItOawmwtWwcT0k51BayewNvutrJUqsvl6qs7A4. It MUST NOT exceed 255 ASCII characters in length. 

    aud
        REQUIRED. 
        This member identifies the audience that this ID Token is intended for. 
        It is RECOMENDED that aud be the OAuth client_id of the RP. 

    exp
        REQUIRED. 
        Type Integer. 
        Identifies the expiration time on or after which the ID Token MUST NOT be accepted for processing. 
        The processing of this parameter requires 
        that the current date/time MUST be before the expiration date/time listed in the value. 
        Implementers MAY provide for some small leeway [#]_ , usually no more than a few minutes, 
        to account for clock skew. 
        The value is number of seconds from 1970-01-01T0:0:0Z as measured in UTC until the desired date/time. 
        See RFC 3339 [:rfc:`3339`] for details regarding date/times in general and UTC in particular. 

    iso29115
        OPTIONAL. 
        (entity authentication assurance): 
        Specifies the X.eaa / ISO/IEC29115 [ISO29115] entity authentication assurance level of the authentication performed. 

    nonce
        OPTIONAL. 
        If the authorization request includes a nonce request value, 
        then this value is REQUIRED and its value is set to the same value as the request value. [#]_

    issued_to
        OPTIONAL. The OAuth identifier of the client the token was issued to; this SHOULD only present if different from the aud value. 

.. [#]  " A margin of freedom or variation, as of activity, time, or expenditure; latitude. " 
        ( `FreeDictionary <http://www.thefreedictionary.com/leeway>`_ )

.. [#] `Issue 184 <https://bitbucket.org/openid/connect/issue/184>`_
.. [#] `Issue 185 <https://bitbucket.org/openid/connect/issue/185>`_

JWT ID Tokens MAY be signed or signed and encrypted via :doc:`JWS [JWS] <jws>` and :doc:`JWE [JWE] <jwe>` respectively, 
thereby providing authentication, integrity, non-repudiation and/or confidentiality. 
ID Tokens in other formats MAY be signed or encrypted with methods suitable for the respective formats.

Clients SHOULD verify and decipher signed or encrypted ID Tokens independently. 
Clients that do not understand the ID Token format or do not wish 
to process ID Tokens MAY treat ID Tokens as opaque values and submit them to the :term:`Check ID Endpoint` for verification and decoding. 
