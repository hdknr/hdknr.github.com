3.1.2.1.  OpenID Request Object
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. note::
   `Issue 192 <https://bitbucket.org/openid/connect/issue/192>`_

The OpenID Request object is used to provide OpenID request parameters that MAY differ from the default ones. 
Implementing support for the OpenID Request object is **OPTIONAL**. [#]_ 
Supporting it is necessary for implementations that need to request or 
provide sets of claims other than the default UserInfo, ID Token, and Check ID claim sets. 

.. [#] `Issue 191 <https://bitbucket.org/openid/connect/issue/191>`_

The OpenID Request object is a :doc:`JWT [JWT] <jwt>` 
that is passed as the value of the "request" parameter in the authorization request. 
The OpenID Request Object can also be sent by reference. 
Parameters that affect the information returned from the UserInfo endpoint are in the ":term:`userinfo`" member. 
Parameters that affect the information returned from the ID Token and Check ID endpoint are in the ":term:`id_token`" member. 
If the same parameters are available both as query strings and in the OpenID Request Object, the later takes the precedence.

The OpenID Request Object MUST contain all REQUIRED :doc:`OAuth 2.0 <oauth>` authorization request parameters 
and MAY contain optional and extension parameters.

The OpenID Request object MAY contain a set of members defined by this specification 
and MAY contain other members that are not defined by this specification. 
OpenID Request object members SHOULD be understood by both parties.

The JWT MAY be signed or unsigned. 
When it is unsigned, it will be indicated by the JWT "signed":"none" convention in the JWT header. 
If signed, the OpenID Request object SHOULD contain the standard JWT "iss" and "aud" claims.

The members defined by this specification are:

.. glossary::

    userinfo
        OPTIONAL. 
        (UserInfo request): 
        Requests affecting the values to be returned from the UserInfo endpoint. 
        If not present, the UserInfo endpoint behaves in the default manner. 

    id_token
        OPTIONAL. 
        (ID request): 
        Requests affecting the values to be to be returned from the ID Token and Check ID endpoint. 
        If not present, the default ID Token contents are used. 
        If present, these parameters are used to request deltas to the default contents of the ID Token. 

An example an OpenID request object is as follows:

.. code-block:: javascript

    {
     "response_type": "code id_token",
     "client_id": "s6BhdRkqt3",
     "redirect_uri": "https://client.example.com/cb",
     "scope": "openid profile",
     "state": "af0ifjsldkj", 

     "userinfo":
       {
         "claims":
           {
             "name": null,
             "nickname": {"optional": true},
             "email": null,
             "verified": null,
             "picture": {"optional": true},
           }
         "format": "signed"
       }

     "id_token":
       {
         "claims":
           {
            "auth_time": null
           }
         "max_age": 86400,
         "iso29115": "2"
       }
    }

.. note::
    `Issue 193 <https://bitbucket.org/openid/connect/issue/193>`_
