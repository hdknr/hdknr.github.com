2.1.2.1.  OpenID Request Object
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The :term:`OpenID Request Object` is used to provide OpenID request parameters 
that MAY differ from the default ones. 
Implementing support for the :term:`OpenID Request Object` is OPTIONAL. 
Supporting it is necessary for implementations 
that need to request or provide sets of Claims 
other than the default :term:`UserInfo`, and :term:`ID Token` Claim sets.

The OpenID Request Object is a JWT [:term:`JWT`] 
that is passed as the **value** of the "request" parameter in the :term:`Authorization Request`. 
The :term:`OpenID Request Object` can also be sent **by reference**. 

.. note::

    :term:`request` (by value) and :term:`request_uri` ( by reference )

Parameters that affect the information returned from the :term:`UserInfo Endpoint` are 
in the ":term:`userinfo`" member. 
Parameters that affect the information returned in the :term:`ID Token` are 
in the ":term:`id_token`" member. 
If the same parameters are present both in the :term:`Authorization Request` 
and in the OpenID Request Object, the later takes the precedence.

The OpenID Request Object MUST contain all REQUIRED OAuth 2.0 Authorization Request parameters 
and MAY contain OPTIONAL and extension OAuth 2.0 parameters. 
The OAuth 2.0 parameter values included MUST match the actual OAuth 2.0 request parameters used.

The OpenID Request Object MAY contain a set of members defined by this specification 
and MAY contain other members that are not defined by this specification. 
With only one exception, 
OpenID Request Object members MUST be understood by both parties; 
that exception is that OpenID Providers MAY ignore requests for Claims 
they can not provide or do not understand; 
however, Relying Parties MAY also consider it an error condition 
if all requested required Claims are not provided.

The OpenID Request Object JWT MAY be signed or unsigned (plaintext). 
When it is a :term:`plaintext JWT`, 
this is indicated by use of the JWT ":term:`alg`":"none" convention in the :term:`JWT header`. 
If signed, 
the OpenID Request Object SHOULD contain the standard JWT ":term:`iss`" (issuer) and ":term:`aud`" (audience) Claims.

The OpenID Request Object members defined by this specification are:

.. glossary::

    userinfo
        OPTIONAL. 
        (UserInfo request): 
        Requests affecting the values to be returned from the UserInfo Endpoint. 
        If not present, the UserInfo Endpoint behaves in the default manner. 

    id_token
        OPTIONAL. 
        (ID Token request): 
        Requests affecting the values to be to be returned in the ID Token. 
        If not present, the default ID Token contents are used. 
        If present, 
        these parameters are used to request additional Claims incremental 
        to the default Claims of the ID Token. 

An example OpenID Request Object body before JWT encoding is as follows:

.. code-block:: javascript

    {
     "response_type": "code id_token",
     "client_id": "s6BhdRkqt3",
     "redirect_uri": "https://client.example.com/cb",
     "scope": "openid profile",
     "state": "af0ifjsldkj",
     "userinfo":
       {
         "claims":
           {
             "name": null,
             "nickname": {"optional": true},
             "email": null,
             "verified": null,
             "picture": {"optional": true}
           }
       },
     "id_token":
       {
         "claims":
           {
            "auth_time": null
           },
         "max_age": 86400,
         "iso29115": "2"
       }
    }

(draft 07)

