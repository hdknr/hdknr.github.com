13.1.  Access Token Request
---------------------------------------------

The OAuth "Token Endpoint" as defined in section 2.2 
(Habber-Lahav, E., Recordon, D., and D. Hardt, “The OAuth 2.0 Authorization Protocol,” May 2011.) 
[OAuth2] is used to obtain an access token 
to be used for retrieving messages 
from the :ref:`Get Messages (Get Messages) <backplane.13.2>` endpoint.

    Endpoint
        /v2/token 

    HTTP mehod
        POST 

    Security
        HTTPS 

    Parameters
        The parameters constitute an access token request as defined in either section 4.1.3 
        (Habber-Lahav, E., Recordon, D., and D. Hardt, “The OAuth 2.0 Authorization Protocol,” May 2011.) 
        [OAuth2] ( "code" grant type) 
        or section 4.4.2 
        (Habber-Lahav, E., Recordon, D., and D. Hardt, “The OAuth 2.0 Authorization Protocol,” May 2011.) 
        [OAuth2] ("client credentials" grant type). 

        The parameters MUST be passed in the request body 
        using the "application/x-www-form-urlencoded" format:

            - client_id (string, REQUIRED)
            - client_secret (string, OPTIONAL)
            - grant_type: MUST be "client_credentials" or "code"
            - code (string): REQUIRED if and only if grant_type is "code"
            - redirect_uri (string): REQUIRED if and only if grant_type is "code"
            - scope (string, OPTIONAL): a list of space-delimited filter criteria 
              (Access Scopes) for the messages the client is interested in.

    Returns
        On success, a JSON object is returned per section 5.1 
        (Habber-Lahav, E., Recordon, D., and D. Hardt, “The OAuth 2.0 Authorization Protocol,” May 2011.) 
        [OAuth2] with the following fields:

            - token_type: MUST be "Bearer" [OAuth2.token.bearer] 
              (Jones, M., Hardt, D., and D. Recordon, “The OAuth 2.0 Protocol: Bearer Tokens,” Jun 2011.)
            - access_token: the issued bearer access token
            - expires_in: the server MUST include the "expires_in" parameter if the issued token is set to expire.
            - backplane_channel (optional): the Channel name, if one was generated as a result of an anonymous request

        The server MUST NOT include the "refresh_token" into the response. 

Response example

.. code-block:: javascript 

    {
      "access_token": "465203f03680f59b7ddd5e1e5d851461",
      "token_type": "Bearer",
      "backplane_channel": "0a92d76f54f7877a68abe19c5b3ffcf8"
    }

(draft 08)
